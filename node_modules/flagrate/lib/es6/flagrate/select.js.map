{"version":3,"sources":["flagrate/select.ts"],"names":[],"mappings":"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","file":"select.js","sourcesContent":["/*\r\n   Copyright 2016 Webnium\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n*/\r\n\"use strict\";\r\n\r\nimport { extendObject } from \"./util\";\r\nimport { Element, Attribute, Property, FHTMLDivElement } from \"./element\";\r\nimport { Option as ButtonOption } from \"./button\";\r\nimport { Pulldown } from \"./pulldown\";\r\nimport { Grid } from \"./grid\";\r\n\r\n/*?\r\n    class flagrate.Select\r\n\r\n    #### Event\r\n\r\n    * `change`: when the value(s) changes.\r\n\r\n    #### Inheritance\r\n\r\n    * flagrate.Element\r\n**/\r\nexport interface Select extends Instance, FHTMLDivElement { }\r\n\r\nexport interface Class {\r\n    new (option?: Option): Select;\r\n    prototype: Instance;\r\n}\r\n\r\nexport interface Instance {\r\n    select(index: number): this;\r\n    deselect(index: number): this;\r\n    selectAll(): this;\r\n    deselectAll(): this;\r\n    disable(): this;\r\n    enable(): this;\r\n    isEnabled(): boolean;\r\n    getValue(): any;\r\n    getValues(): any[];\r\n\r\n    onChange?(event?: any, menu?: this): void;\r\n\r\n    readonly listView?: boolean;\r\n\r\n    readonly multiple?: boolean;\r\n\r\n    readonly items?: ItemOption[];\r\n\r\n    readonly max?: number;\r\n\r\n    readonly selectedIndex?: number;\r\n\r\n    readonly selectedIndexes?: number[];\r\n\r\n    readonly isPulldown?: boolean;\r\n\r\n    _pulldown?: Pulldown;\r\n    _grid?: Grid;\r\n}\r\n\r\nexport interface Option {\r\n    /** id attribute. */\r\n    id?: string;\r\n\r\n    /** class attribute. */\r\n    className?: string;\r\n\r\n    /** attribute/value pairs properties. */\r\n    attribute?: Attribute;\r\n\r\n    /** CSS style properties (uses flagrate.Element.setStyle). */\r\n    style?: Property;\r\n\r\n    /** default is false. */\r\n    listView?: boolean;\r\n\r\n    /** default is false. */\r\n    multiple?: boolean;\r\n\r\n    /** default is -1 (unlimited). */\r\n    max?: number;\r\n\r\n    /** Array of any value or, SelectItemOption object. */\r\n    items?: ItemOption[];\r\n\r\n    selectedIndex?: number;\r\n    selectedIndexes?: number[];\r\n\r\n    /** default is false. */\r\n    isDisabled?: boolean;\r\n}\r\n\r\nexport type ItemOption = string | number | {\r\n    /** if not specifies label, tries convert value to string for display label. */\r\n    label?: string;\r\n    labelHTML?: string;\r\n\r\n    /** icon image URL. */\r\n    icon?: string;\r\n\r\n    /** value. */\r\n    value: any;\r\n};\r\n\r\n/*?\r\n    flagrate.createSelect(option)\r\n    new flagrate.Select(option)\r\n    - option (Object) - options.\r\n\r\n    Select.\r\n\r\n    #### option\r\n\r\n    * `id`                       (String): `id` attribute of container element.\r\n    * `className`                (String):\r\n    * `attribute`                (Object):\r\n    * `style`                    (Object): (using flagrate.Element.setStyle)\r\n    * `items`                    (Array):\r\n    * `listView`                 (Boolean; default `false`):\r\n    * `multiple`                 (Boolean; default `false`):\r\n    * `max`                      (Number; default `-1`):\r\n    * `selectedIndex`            (Number):\r\n    * `selectedIndexes`          (Array): array of Number.\r\n    * `isDisabled`               (Boolean; default `false`):\r\n**/\r\nfunction FSelect(option: Option = {}) {\r\n\r\n    this.items = option.items || [];\r\n    this.listView = option.listView || false;\r\n    this.multiple = option.multiple || false;\r\n    this.max = option.max || -1;\r\n\r\n    if (this.multiple) {\r\n        this.selectedIndexes = option.selectedIndexes || [];\r\n    } else {\r\n        this.selectedIndex = typeof option.selectedIndex === \"undefined\" ? -1 : option.selectedIndex;\r\n    }\r\n\r\n    const attr = option.attribute || {};\r\n\r\n    if (option.id) {\r\n        attr[\"id\"] = option.id;\r\n    }\r\n\r\n    this.isPulldown = (!this.listView && !this.multiple);\r\n\r\n    // create\r\n    const container = new Element(\"div\", attr) as Select;\r\n\r\n    function createOnSelectHandler(i: number) {\r\n        return () => container.select(i);\r\n    }\r\n\r\n    function createOnDeselectHandler(i: number) {\r\n        return () => container.deselect(i);\r\n    }\r\n\r\n    // normalize items\r\n    for (let i = 0, l = this.items.length; i < l; i++) {\r\n        if (typeof this.items[i] !== \"object\") {\r\n            this.items[i] = {\r\n                label: typeof this.items[i] === \"string\" ? this.items[i] : this.items[i].toString(10),\r\n                value: this.items[i]\r\n            };\r\n        }\r\n    }\r\n\r\n    if (this.isPulldown) {\r\n        container._pulldown = new Pulldown({\r\n            label: \"-\",\r\n            items: [\r\n                {\r\n                    label: \"-\",\r\n                    onSelect: createOnSelectHandler(-1)\r\n                }\r\n            ].concat(\r\n                this.items.map((item, i) => {\r\n                    return {\r\n                        label: item.label,\r\n                        labelHTML: item.labelHTML,\r\n                        icon: item.icon,\r\n                        onSelect: createOnSelectHandler(i)\r\n                    };\r\n                })\r\n            )\r\n        }).insertTo(container);\r\n    } else {\r\n        container._grid = new Grid({\r\n            headless: true,\r\n            multiSelect: this.multiple,\r\n            cols: [\r\n                {\r\n                    key: \"label\"\r\n                }\r\n            ],\r\n            rows: this.items.map((item, i) => {\r\n                return {\r\n                    cell: {\r\n                        label: {\r\n                            text: item.label,\r\n                            html: item.labelHTML,\r\n                            icon: item.icon\r\n                        }\r\n                    },\r\n                    onSelect: createOnSelectHandler(i),\r\n                    onDeselect: createOnDeselectHandler(i)\r\n                };\r\n            })\r\n        }).insertTo(container);\r\n    }\r\n    extendObject(container, this);\r\n\r\n    container.addClassName(\"flagrate flagrate-select\");\r\n    if (!container.isPulldown) {\r\n        container.addClassName(\"flagrate-select-list-view\");\r\n    }\r\n    if (option.className) {\r\n        container.addClassName(option.className);\r\n    }\r\n\r\n    if (option.style) {\r\n        container.setStyle(option.style);\r\n    }\r\n\r\n    if (option.isDisabled) {\r\n        container.disable();\r\n    }\r\n\r\n    if (container.multiple) {\r\n        container.selectedIndexes.forEach(function (index) {\r\n            container.select(index);\r\n        });\r\n    } else {\r\n        if (container.selectedIndex > -1) {\r\n            container.select(container.selectedIndex);\r\n        }\r\n    }\r\n\r\n    return container;\r\n}\r\n\r\nexport const Select = FSelect as any as Class;\r\n\r\nexport function createSelect(option?: Option): Select {\r\n    return new Select(option);\r\n}\r\n\r\nSelect.prototype = {\r\n    select(index) {\r\n\r\n        if (this.items.length <= index) {\r\n            return this;\r\n        }\r\n\r\n        if (this.multiple) {\r\n            if (this.max > -1 && this.selectedIndexes.length >= this.max) {\r\n                if (this._grid.rows[index].isSelected === true) {\r\n                    this._grid.deselect(index);\r\n                }\r\n                return this;\r\n            }\r\n            if (this.selectedIndexes.indexOf(index) === -1) {\r\n                this.selectedIndexes.push(index);\r\n            }\r\n        } else {\r\n            this.selectedIndex = index;\r\n        }\r\n\r\n        if (this.isPulldown) {\r\n            if (index === -1) {\r\n                this._pulldown.setLabel(\"-\");\r\n                this._pulldown.setIcon(null);\r\n            } else {\r\n                if (this.items[index].label !== undefined) {\r\n                    this._pulldown.setLabel(this.items[index].label);\r\n                } else if (this.items[index].labelHTML !== undefined) {\r\n                    this._pulldown.setLabelHTML(this.items[index].labelHTML);\r\n                }\r\n                this._pulldown.setIcon(this.items[index].icon);\r\n            }\r\n\r\n            this.fire(\"change\");\r\n        } else {\r\n            if (!this._grid.rows[index].isSelected) {\r\n                this._grid.select(index);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    deselect(index) {\r\n\r\n        if (this.items.length <= index) {\r\n            return this;\r\n        }\r\n\r\n        if (this.multiple) {\r\n            const selectedIndex = this.selectedIndexes.indexOf(index);\r\n            if (selectedIndex !== -1) {\r\n                this.selectedIndexes.splice(this.selectedIndexes.indexOf(index), 1);\r\n            }\r\n        } else {\r\n            this.selectedIndex = -1;\r\n        }\r\n\r\n        if (this.isPulldown) {\r\n            this._pulldown.setLabel(\"-\");\r\n            this._pulldown.setIcon(null);\r\n\r\n            this.fire(\"change\");\r\n        } else {\r\n            if (this.multiple) {\r\n                if (this._grid.rows[index].isSelected === true) {\r\n                    this._grid.deselect(index);\r\n                }\r\n            } else {\r\n                for (let i = 0, l = this.items.length; i < l; i++) {\r\n                    if (this._grid.rows[i].isSelected === true) {\r\n                        this._grid.deselect(i);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    selectAll() {\r\n\r\n        if (this.multiple) {\r\n            this._grid.selectAll();\r\n            this.selectedIndexes = [];\r\n\r\n            for (let i = 0, l = this.items.length; i < l; i++) {\r\n                this.selectedIndexes.push(i);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    deselectAll() {\r\n\r\n        if (this.multiple) {\r\n            this._grid.deselectAll();\r\n            this.selectedIndexes = [];\r\n        } else {\r\n            this.deselect();\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    disable() {\r\n\r\n        this.addClassName(\"flagrate-disabled\");\r\n\r\n        if (this.isPulldown) {\r\n            this._pulldown.disable();\r\n        } else {\r\n            this._grid.disable();\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    enable() {\r\n\r\n        this.removeClassName(\"flagrate-disabled\");\r\n\r\n        if (this.isPulldown) {\r\n            this._pulldown.enable();\r\n        } else {\r\n            this._grid.enable();\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    isEnabled() {\r\n        return !this.hasClassName(\"flagrate-disabled\");\r\n    },\r\n\r\n    getValue() {\r\n\r\n        if (this.selectedIndex > -1) {\r\n            return this.items[this.selectedIndex].value;\r\n        } else {\r\n            return void 0;\r\n        }\r\n    },\r\n\r\n    getValues() {\r\n\r\n        let result = [];\r\n\r\n        for (let i = 0, l = this.selectedIndexes.length; i < l; i++) {\r\n            result.push(this.items[this.selectedIndexes[i]].value);\r\n        }\r\n\r\n        return result;\r\n    }\r\n};"]}