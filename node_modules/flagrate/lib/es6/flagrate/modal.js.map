{"version":3,"sources":["flagrate/modal.ts"],"names":[],"mappings":"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","file":"modal.js","sourcesContent":["/*\r\n   Copyright 2016 Webnium\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n*/\r\n\"use strict\";\r\n\r\nimport { Element, FHTMLElement, FHTMLDivElement, FHTMLHeadingElement } from \"./element\";\r\nimport { Button } from \"./button\";\r\n\r\n/*?\r\n    class flagrate.Modal\r\n**/\r\n// ref: Hypermodal/1.2 https://github.com/kanreisa/Hypermodal/blob/9470a7/hypermodal.css\r\nexport interface Option {\r\n    /** default is `document.body`. */\r\n    target?: HTMLElement;\r\n    id?: string;\r\n    className?: string;\r\n    title?: string;\r\n    subtitle?: string;\r\n    text?: string;\r\n    html?: string;\r\n    element?: HTMLElement;\r\n    content?: FHTMLDivElement;\r\n    //href?: string;\r\n    buttons?: ModalButtonOption[];\r\n    /** default is `\"flex\"`. */\r\n    sizing?: Sizing;\r\n    onBeforeClose?(modal?: Modal, e?: Event): boolean;\r\n    onClose?(modal?: Modal, e?: Event): void;\r\n    onShow?(modal?: Modal): void;\r\n    /** default is `false`. */\r\n    disableCloseButton?: boolean;\r\n    /** default is `false`. */\r\n    disableCloseByMask?: boolean;\r\n    /** default is `false`. */\r\n    disableCloseByEsc?: boolean;\r\n}\r\n\r\nexport type Sizing = \"flex\" | \"full\";\r\n\r\nexport interface ModalButton extends ModalButtonOption {\r\n    _button?: Button;\r\n}\r\n\r\nexport interface ModalButtonOption {\r\n    key?: string;\r\n    label?: string;\r\n    icon?: string;\r\n    color?: string;\r\n    onSelect?(e?: Event, modal?: Modal): void;\r\n    isFocused?: boolean;\r\n    isDisabled?: boolean;\r\n    className?: string;\r\n}\r\n\r\n/*?\r\n    flagrate.createModal(option)\r\n    new flagrate.Modal(option)\r\n    - option (Object) - configuration for the modal.\r\n\r\n    Create and initialize the modal.\r\n\r\n    #### option\r\n\r\n    * `target`                   (Element; default `document.body`):\r\n    * `id`                       (String):\r\n    * `className`                (String):\r\n    * `title`                    (String):\r\n    * `subtitle`                 (String):\r\n    * `text`                     (String):\r\n    * `html`                     (String):\r\n    * `element`                  (Element):\r\n    * `href`                     (String):\r\n    * `buttons`                  (Array): of button object.\r\n    * `sizing`                   (String;  default `\"flex\"`; `\"flex\"` | `\"full\"`):\r\n    * `onBeforeClose`            (Function):\r\n    * `onClose`                  (Function):\r\n    * `onShow`                   (Function):\r\n    * `disableCloseButton`       (Boolean; default `false`):\r\n    * `disableCloseByMask`       (Boolean; default `false`):\r\n    * `disableCloseByEsc`        (Boolean; default `false`):\r\n\r\n    #### button\r\n\r\n    * `key`                      (String):\r\n    * `label`                    (String; required):\r\n    * `icon`                     (String):\r\n    * `color`                    (String):\r\n    * `onSelect`                 (Function):\r\n    * `isFocused`                (Boolean; default `false`):\r\n    * `isDisabled`               (Boolean; default `false`):\r\n    * `className`                (String):\r\n**/\r\nexport class Modal {\r\n\r\n    private _content: FHTMLDivElement;\r\n    private _buttons: ModalButton[] = [];\r\n\r\n    onBeforeClose: (modal?: Modal, e?: Event) => boolean;\r\n    onClose: (modal?: Modal, e?: Event) => void;\r\n    onShow: (modal?: Modal) => void;\r\n\r\n    private _container: FHTMLDivElement;\r\n    private _obi: FHTMLDivElement;\r\n\r\n    private _modal: FHTMLDivElement;\r\n    private _closeButton: Button;\r\n    private _header: FHTMLElement;\r\n    private _middle: FHTMLDivElement;\r\n    private _footer: FHTMLElement;\r\n    private _title: FHTMLHeadingElement;\r\n    private _subtitle: FHTMLElement;\r\n\r\n    private _positioningTimer: number;\r\n    private _closingTimer: number;\r\n\r\n    private _close = this.close.bind(this);\r\n    private __onKeydownHandler = this._onKeydownHandler.bind(this);\r\n\r\n    constructor(private _opt: Option = {}) {\r\n\r\n        if (!_opt.target) {\r\n            _opt.target = document.body;\r\n        }\r\n        if (!_opt.sizing) {\r\n            _opt.sizing = \"flex\";\r\n        }\r\n        if (_opt.disableCloseButton === undefined) {\r\n            _opt.disableCloseButton = false;\r\n        }\r\n        if (_opt.disableCloseByMask === undefined) {\r\n            _opt.disableCloseByMask = false;\r\n        }\r\n        if (_opt.disableCloseByEsc === undefined) {\r\n            _opt.disableCloseByEsc = false;\r\n        }\r\n\r\n        if (_opt[\"description\"]) {\r\n            // description has deprecated but no schedule to remove.\r\n            this._opt.subtitle = _opt[\"description\"];\r\n        }\r\n\r\n        if (_opt.buttons) {\r\n            this._buttons = _opt.buttons;\r\n        }\r\n\r\n        if (_opt.onBeforeClose) {\r\n            this.onBeforeClose = _opt.onBeforeClose;\r\n        }\r\n        if (_opt.onClose) {\r\n            this.onClose = _opt.onClose;\r\n        }\r\n        if (_opt.onShow) {\r\n            this.onShow = _opt.onShow;\r\n        }\r\n\r\n        if (this._buttons.length === 0) {\r\n            this._buttons = [\r\n                {\r\n                    label: \"OK\",\r\n                    color: \"@primary\",\r\n                    onSelect: this._close,\r\n                    isFocused: true\r\n                }\r\n            ];\r\n        }\r\n\r\n        this._create();\r\n    }\r\n\r\n    get buttons(): Button[] {\r\n        return this.getButtons();\r\n    }\r\n\r\n    get id(): string {\r\n        return this._container.id;\r\n    }\r\n    set id(id: string) {\r\n        this._container.id = id;\r\n    }\r\n\r\n    get className(): string {\r\n        return this._container.className;\r\n    }\r\n    set className(className: string) {\r\n        this._container.className = className;\r\n    }\r\n\r\n    get content(): FHTMLDivElement {\r\n        return this._content;\r\n    }\r\n    set content(div: FHTMLDivElement) {\r\n        this.setContent(div);\r\n    }\r\n\r\n    get sizing(): Sizing {\r\n        return this._opt.sizing;\r\n    }\r\n    set sizing(sizing: Sizing) {\r\n        this.setSizing(sizing);\r\n    }\r\n\r\n    get element(): HTMLElement {\r\n        return this._opt.element;\r\n    }\r\n    set element(element: HTMLElement) {\r\n        this.setElement(element);\r\n    }\r\n\r\n    get html(): string {\r\n        return this._opt.html;\r\n    }\r\n    set html(html: string) {\r\n        this.setHTML(html);\r\n    }\r\n\r\n    get text(): string {\r\n        return this._opt.text;\r\n    }\r\n    set text(text: string) {\r\n        this.setText(text);\r\n    }\r\n\r\n    get title(): string {\r\n        return this._opt.title;\r\n    }\r\n    set title(title: string) {\r\n        this.setTitle(title);\r\n    }\r\n\r\n    get subtitle(): string {\r\n        return this._opt.subtitle;\r\n    }\r\n    set subtitle(subtitle: string) {\r\n        this.setSubtitle(subtitle);\r\n    }\r\n\r\n    setId(id: string): this {\r\n\r\n        this._container.id = id;\r\n\r\n        return this;\r\n    }\r\n\r\n    setClassName(className: string): this {\r\n\r\n        this._container.className = className;\r\n\r\n        return this;\r\n    }\r\n\r\n    setContent(div: FHTMLDivElement): this {\r\n\r\n        this._opt.content = div;\r\n        this._middle.update(div);\r\n\r\n        return this;\r\n    }\r\n\r\n    setSizing(sizing: Sizing): this {\r\n\r\n        this._container.removeClassName(`flagrate-sizing-${this._opt.sizing}`);\r\n        this._container.addClassName(`flagrate-sizing-${sizing}`);\r\n\r\n        this._opt.sizing = sizing;\r\n\r\n        return this;\r\n    }\r\n\r\n    setElement(element: HTMLElement): this {\r\n\r\n        this._opt.element = element;\r\n        this._content.update(element);\r\n\r\n        return this;\r\n    }\r\n\r\n    setHTML(html: string): this {\r\n\r\n        this._opt.html = html;\r\n        this._content.update(html);\r\n\r\n        return this;\r\n    }\r\n\r\n    setText(text: string): this {\r\n\r\n        this._opt.text = text;\r\n        this._content.updateText(text);\r\n\r\n        return this;\r\n    }\r\n\r\n    setTitle(title: string): this {\r\n\r\n        this._opt.title = title;\r\n        this._title.updateText(title);\r\n\r\n        return this;\r\n    }\r\n\r\n    setSubtitle(subtitle: string): this {\r\n\r\n        this._opt.subtitle = subtitle;\r\n        this._subtitle.updateText(subtitle);\r\n\r\n        return this;\r\n    }\r\n\r\n    visible(): boolean {\r\n        return this._container.hasClassName(\"flagrate-modal-visible\");\r\n    }\r\n\r\n    open(): this {\r\n\r\n        if (this.visible() === true) {\r\n            return this;\r\n        }\r\n\r\n        // make free\r\n        if (document.activeElement && document.activeElement[\"blur\"]) {\r\n            (<HTMLElement>document.activeElement).blur();\r\n        }\r\n        window.getSelection().removeAllRanges();\r\n\r\n        if (this._closingTimer) {\r\n            clearTimeout(this._closingTimer);\r\n        }\r\n\r\n        Element.insert(this._opt.target, this._container);\r\n\r\n        setTimeout(() => this._container.addClassName(\"flagrate-modal-visible\"), 0);\r\n\r\n        // Callback: onShow\r\n        if (this.onShow) {\r\n            this.onShow(this);\r\n        }\r\n\r\n        this._positioning();\r\n\r\n        // focus to primary button\r\n        if (this._buttons[0]) {\r\n            this._buttons[0]._button.focus();\r\n        }\r\n\r\n        window.addEventListener(\"keydown\", this.__onKeydownHandler, true);\r\n\r\n        return this;\r\n    }\r\n\r\n    /** DEPRECATED */\r\n    show(): this {\r\n        return this.open();\r\n    }\r\n\r\n    /** DEPRECATED */\r\n    render(): this {\r\n        return this.open();\r\n    }\r\n\r\n    close(e?: Event): this {\r\n\r\n        if (this.visible() === false) {\r\n            return this;\r\n        }\r\n\r\n        this._container.removeClassName(\"flagrate-modal-visible\");\r\n\r\n        if (e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n        }\r\n\r\n        // Callback: onBeforeClose\r\n        if (this.onBeforeClose) {\r\n            if (this.onBeforeClose(this, e) === false) {\r\n                return this;//abort closing\r\n            }\r\n        }\r\n\r\n        clearTimeout(this._positioningTimer);\r\n\r\n        this._closingTimer = setTimeout(() => this._container.remove(), 1000);\r\n\r\n        window.removeEventListener(\"keydown\", this.__onKeydownHandler, true);\r\n\r\n        // Callback: onClose\r\n        if (this.onClose) {\r\n            this.onClose(this, e);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    getButtonByKey(key: string): Button {\r\n\r\n        let result = null;\r\n\r\n        const buttons = this._buttons;\r\n\r\n        for (let i = 0; i < buttons.length; i++) {\r\n            if (!buttons[i].key) { continue; }\r\n\r\n            if (buttons[i].key === key) {\r\n                result = buttons[i]._button;\r\n                break;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getButtons(): Button[] {\r\n        return this._buttons.map(button => button._button);\r\n    }\r\n\r\n    setButtons(buttons: ModalButtonOption[]): this {\r\n\r\n        this._buttons = buttons;\r\n        this._createButtons();\r\n\r\n        return this;\r\n    }\r\n\r\n    private _create(): void {\r\n\r\n        this._createBase();\r\n        this._createModal();\r\n        this._createButtons();\r\n    }\r\n\r\n    private _createBase(): void {\r\n\r\n        this._container = new Element(\"div\", {\r\n            id: this._opt.id,\r\n            \"class\": `flagrate flagrate-modal flagrate-sizing-${this._opt.sizing}`\r\n        });\r\n\r\n        if (this._opt.className) {\r\n            this._container.addClassName(this._opt.className);\r\n        }\r\n\r\n        if (this._opt.target !== document.body) {\r\n            this._container.style.position = \"absolute\";\r\n        }\r\n\r\n        this._obi = new Element().insertTo(this._container);\r\n\r\n        if (this._opt.disableCloseByMask === false) {\r\n            this._container.addEventListener(\"click\", this._close);\r\n        }\r\n    }\r\n\r\n    private _createModal(): void {\r\n\r\n        this._modal = new Element().insertTo(this._obi);\r\n        this._modal.addEventListener(\"click\", e => e.stopPropagation());\r\n\r\n        this._closeButton = new Button({\r\n            label: \"\",\r\n            onSelect: this._close\r\n        });\r\n\r\n        if (this._opt.disableCloseButton === false) {\r\n            this._closeButton.insertTo(this._modal);\r\n        }\r\n\r\n        this._header = new Element(\"hgroup\").insertTo(this._modal);\r\n        this._title = new Element(\"h1\").insertText(this._opt.title || \"\").insertTo(this._header);\r\n        this._subtitle = new Element(\"small\").insertText(this._opt.subtitle || \"\").insertTo(this._header);\r\n\r\n        this._middle = new Element().insertTo(this._modal);\r\n\r\n        if (this._opt.content) {\r\n            this._middle.insert(this._opt.content);\r\n        } else {\r\n            this._content = new Element().insertTo(this._middle);\r\n\r\n            if (this._opt.element) {\r\n                this._content.insert(this._opt.element);\r\n            } else if (this._opt.html) {\r\n                this._content.insert(this._opt.html);\r\n            } else if (this._opt.text) {\r\n                this._content.insertText(this._opt.text);\r\n            }\r\n        }\r\n\r\n        this._footer = new Element(\"footer\").insertTo(this._modal);\r\n    }\r\n\r\n    private _createButtons(): void {\r\n\r\n        if (this._footer.hasChildNodes() === true) {\r\n            this._footer.update();\r\n        }\r\n\r\n        this._buttons.forEach(button => {\r\n\r\n            button._button = new Button({\r\n                className: button.className,\r\n                label: button.label,\r\n                icon: button.icon,\r\n                color: button.color,\r\n                isFocused: button.isFocused || false,\r\n                isDisabled: button.isDisabled,\r\n                onSelect: e => {\r\n\r\n                    if (button.onSelect) {\r\n                        button.onSelect.call(e.targetButton, e, this);\r\n                    } else if (button[\"onClick\"]) {\r\n                        console.warn(\"ModalButton#onClick is deprecated. Use ModalButton#onSelect instead.\");\r\n                        button[\"onClick\"](e, this);// DEPRECATED\r\n                    }\r\n                }\r\n            });\r\n\r\n            // DEPRECATED, This is for backward compatibility.\r\n            button._button[\"button\"] = button;\r\n            button[\"button\"] = button._button;\r\n            button[\"disable\"] = button._button.disable.bind(button._button);\r\n            button[\"enable\"] = button._button.enable.bind(button._button);\r\n            button[\"setColor\"] = button._button.setColor.bind(button._button);\r\n\r\n            this._footer.insert(button._button);\r\n        });\r\n    }\r\n\r\n    private _positioning(): void {\r\n\r\n        let baseWidth = -1;\r\n        let baseHeight = -1;\r\n        let modalWidth = -1;\r\n        let modalHeight = -1;\r\n\r\n        const update = () => {\r\n\r\n            if (\r\n                baseWidth !== this._container.getWidth() ||\r\n                baseHeight !== this._container.getHeight() ||\r\n                modalWidth !== this._modal.getWidth() ||\r\n                modalHeight !== this._modal.getHeight()\r\n            ) {\r\n                baseWidth = this._container.getWidth();\r\n                baseHeight = this._container.getHeight();\r\n                modalWidth = this._modal.getWidth();\r\n                modalHeight = this._modal.getHeight();\r\n\r\n                if (this._opt.sizing === \"flex\") {\r\n                    if (baseWidth - 20 <= modalWidth) {\r\n                        this._modal.style.left = \"0\";\r\n                        this._middle.style.width = baseWidth + \"px\";\r\n                        this._middle.style.overflowX = \"auto\";\r\n                    } else {\r\n                        this._modal.style.left = Math.floor((baseWidth / 2) - (modalWidth / 2)) + \"px\";\r\n                        this._middle.style.width = \"\";\r\n                        this._middle.style.overflowX = \"visible\";\r\n                    }\r\n\r\n                    if (baseHeight - 20 <= modalHeight) {\r\n                        this._obi.style.top = \"10px\";\r\n                        this._obi.style.bottom = \"10px\";\r\n                        this._obi.style.height = \"\";\r\n                        this._middle.style.height = baseHeight - this._header.getHeight() - this._footer.getHeight() - 20 + \"px\";\r\n                        this._middle.style.overflowY = \"auto\";\r\n                    } else {\r\n                        this._obi.style.top = (baseHeight / 2) - (modalHeight / 2) + \"px\";\r\n                        this._obi.style.bottom = \"\";\r\n                        this._obi.style.height = modalHeight + \"px\";\r\n                        this._middle.style.height = \"\";\r\n                        this._middle.style.overflowY = \"visible\";\r\n                    }\r\n                }\r\n\r\n                if (this._opt.sizing === \"full\") {\r\n                    this._modal.style.right = \"10px\";\r\n                    this._modal.style.left = \"10px\";\r\n                    this._middle.style.overflowX = \"auto\";\r\n\r\n                    this._obi.style.top = \"10px\";\r\n                    this._obi.style.bottom = \"10px\";\r\n                    this._obi.style.height = \"\";\r\n                    this._middle.style.height = baseHeight - this._header.getHeight() - this._footer.getHeight() - 20 + \"px\";\r\n                    this._middle.style.overflowY = \"auto\";\r\n                }\r\n            };\r\n\r\n            this._positioningTimer = setTimeout(update, 30);\r\n        }\r\n\r\n        this._positioningTimer = setTimeout(update, 0);\r\n    }\r\n\r\n    private _onKeydownHandler(e: KeyboardEvent) {\r\n\r\n        const active = document.activeElement && document.activeElement.tagName;\r\n\r\n        if (this.visible() === false) { return; }\r\n        if (active !== \"BODY\" && active !== \"DIV\" && active !== \"BUTTON\") { return; }\r\n        if (window.getSelection().toString() !== \"\") { return; }\r\n\r\n        let activated = false;\r\n\r\n        // TAB:9\r\n        if (e.keyCode === 9 && active !== \"BUTTON\") {\r\n            activated = true;\r\n            if (this._closeButton) {\r\n                this._closeButton.focus();\r\n            } else if (this._buttons[0]) {\r\n                this._buttons[0]._button.focus();\r\n            }\r\n        }\r\n\r\n        // ENTER:13\r\n        if (e.keyCode === 13 && this._buttons[0] && active !== \"BUTTON\") {\r\n            activated = true;\r\n            this._buttons[0]._button.click();\r\n        }\r\n\r\n        // ESC:27\r\n        if (e.keyCode === 27 && this._opt.disableCloseByEsc === false) {\r\n            activated = true;\r\n            this.close();\r\n        }\r\n\r\n        if (activated === true) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n        }\r\n    }\r\n}\r\n\r\nexport function createModal(option?: Option): Modal {\r\n    return new Modal(option);\r\n}"]}