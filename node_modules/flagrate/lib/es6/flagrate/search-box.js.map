{"version":3,"sources":["flagrate/search-box.ts"],"names":[],"mappings":"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","file":"search-box.js","sourcesContent":["/*\r\n   Copyright 2016 Webnium\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n*/\r\n\"use strict\";\r\n\r\nimport { extendObject, emptyFunction } from \"./util\";\r\nimport { Element, Attribute, Property, FHTMLDivElement } from \"./element\";\r\nimport { Button } from \"./button\";\r\nimport { TextInput } from \"./text-input\";\r\nimport { Menu } from \"./menu\";\r\n\r\n/*?\r\n    class flagrate.SearchBox\r\n\r\n    Smart UI Component for Search Things. **(This is still in preview!!)**\r\n\r\n    #### Example\r\n\r\n        var searchBox = flagrate.createSearchBox({\r\n            suggester: function (value, done) {\r\n                someAsyncFunction(function (resultItems) {\r\n                    done(resultItems);\r\n                });\r\n            },\r\n            onSearch: function (value) {\r\n                console.log(\"searching: \" + value);\r\n            }\r\n        }).insertTo(x);\r\n\r\n    #### Additional Event\r\n\r\n    * `search`:\r\n**/\r\nexport interface SearchBox extends Instance, FHTMLDivElement { }\r\n\r\nexport interface Class {\r\n    new (option?: Option): SearchBox;\r\n    prototype: Instance;\r\n}\r\n\r\nexport interface Instance {\r\n    disable(): this;\r\n    enable(): this;\r\n    isEnabled(): boolean;\r\n    getValue(): string;\r\n    setValue(value: string): this;\r\n    search(): this;\r\n    suggest(): this;\r\n    focus(): void;\r\n    blur(): void;\r\n\r\n    _suggested(items: (string | SuggestedItem)[]): void;\r\n    _onKeydownHandler(e: KeyboardEvent): void;\r\n    _onKeyupHandler(e: KeyboardEvent): void;\r\n    _onFocusHandler(e: FocusEvent): void;\r\n    _onBlurHandler(e: FocusEvent): void;\r\n\r\n    _input?: TextInput;\r\n    _button?: Button;\r\n    _suggest?: FHTMLDivElement;\r\n}\r\n\r\nexport interface Option {\r\n    id?: string;\r\n    className?: string;\r\n    attribute?: Attribute;\r\n    style?: Property;\r\n    value?: string;\r\n    placeholder?: string;\r\n    icon?: string;\r\n    isDisabled?: boolean;\r\n    suggester?(value: string, callback: (items: (string | SuggestedItem)[]) => void): void;\r\n    suggester?(value: string): (string | SuggestedItem)[];\r\n    onSearch?(value?: string, target?: SearchBox): void;\r\n}\r\n\r\nexport interface SuggestedItem {\r\n    label: string;\r\n    icon?: string;\r\n    onSelect?(): void;\r\n}\r\n\r\n/*?\r\n    flagrate.createSearchBox(option)\r\n    new flagrate.SearchBox(option)\r\n    - option (Object) - options.\r\n\r\n    text input for search.\r\n\r\n    #### option\r\n\r\n    * `id`                       (String): `id` attribute of container element.\r\n    * `className`                (String):\r\n    * `attribute`                (Object):\r\n    * `style`                    (Object): (using flagrate.Element.setStyle)\r\n    * `value`                    (String): default value.\r\n    * `placeholder`              (String):\r\n    * `icon`                     (String):\r\n    * `isDisabled`               (Boolean; default `false`):\r\n    * `suggester`                (Function):\r\n    * `onSearch`                 (Function): callback with input value.\r\n**/\r\nfunction FSearchBox(opt: Option = {}) {\r\n\r\n    this.suggester = opt.suggester || null;\r\n    this.onSearch = opt.onSearch || emptyFunction;\r\n\r\n    const attr = opt.attribute || {};\r\n\r\n    attr[\"id\"] = opt.id || null;\r\n    attr[\"class\"] = opt.className || null;\r\n\r\n    //create\r\n    const searchBox = new Element(\"div\", attr) as SearchBox;\r\n    extendObject(searchBox, this);\r\n\r\n    searchBox.addClassName(\"flagrate flagrate-search-box\");\r\n\r\n    searchBox._input = new TextInput({\r\n        className: \"search-input\",\r\n        value: opt.value,\r\n        placeholder: opt.placeholder,\r\n        icon: opt.icon\r\n    }).insertTo(searchBox);\r\n\r\n    searchBox._button = new Button({\r\n        className: \"search-button\",\r\n        onSelect: searchBox.search.bind(searchBox)\r\n    }).insertTo(searchBox);\r\n\r\n    searchBox._suggest = new Element(\"div\", {\r\n        \"class\": \"search-suggest\"\r\n    }).hide().insertTo(searchBox);\r\n\r\n    searchBox._input.on(\"keydown\", searchBox._onKeydownHandler.bind(searchBox));\r\n    searchBox._input.on(\"keyup\", searchBox._onKeyupHandler.bind(searchBox));\r\n    searchBox._input.on(\"focus\", searchBox._onFocusHandler.bind(searchBox));\r\n    searchBox._input.on(\"blur\", searchBox._onBlurHandler.bind(searchBox));\r\n\r\n    // for Chrome\r\n    searchBox._suggest.on(\"mousedown\", e => e.preventDefault());\r\n\r\n    if (opt.style) {\r\n        searchBox.setStyle(opt.style);\r\n    }\r\n\r\n    if (opt.isDisabled) {\r\n        searchBox.disable();\r\n    }\r\n\r\n    return searchBox;\r\n}\r\n\r\nexport const SearchBox = FSearchBox as any as Class;\r\n\r\nexport function createSearchBox(option?: Option): SearchBox {\r\n    return new SearchBox(option);\r\n}\r\n\r\nSearchBox.prototype = {\r\n    disable() {\r\n\r\n        this.addClassName(\"flagrate-disabled\");\r\n        this._input.disable();\r\n        this._button.disable();\r\n\r\n        this._suggest.hide();\r\n\r\n        return this;\r\n    },\r\n\r\n    enable() {\r\n\r\n        this.removeClassName(\"flagrate-disabled\");\r\n        this._input.enable();\r\n        this._button.enable();\r\n\r\n        return this;\r\n    },\r\n\r\n    isEnabled() {\r\n        return !this.hasClassName(\"flagrate-disabled\");\r\n    },\r\n\r\n    getValue() {\r\n        return this._input.getValue();\r\n    },\r\n\r\n    setValue(value) {\r\n\r\n        this._input.setValue(value);\r\n\r\n        return this;\r\n    },\r\n\r\n    search() {\r\n\r\n        const value = this.getValue();\r\n\r\n        this.onSearch(value, this);\r\n        this.fire(\"search\", value);\r\n\r\n        this._input.blur();\r\n\r\n        return this;\r\n    },\r\n\r\n    suggest() {\r\n\r\n        if (!this.suggester) {\r\n            return this;\r\n        }\r\n\r\n        this._suggest.hide();\r\n\r\n        const value = this.getValue();\r\n\r\n        const result = this.suggester(value, this._suggested.bind(this));\r\n\r\n        if (result !== void 0) {\r\n            this._suggested(result);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    focus() {\r\n        this._input.focus();\r\n    },\r\n\r\n    blur() {\r\n        this._input.blur();\r\n    },\r\n\r\n    _suggested(suggestedItems) {\r\n\r\n        if (!suggestedItems) {\r\n            return;\r\n        }\r\n\r\n        if (suggestedItems.length === 0) {\r\n            this._suggest.hide();\r\n            return;\r\n        }\r\n\r\n        const items = [];\r\n\r\n        suggestedItems.forEach(item => {\r\n\r\n            if (typeof item === \"string\" && item.trim() !== \"\") {\r\n                items.push({\r\n                    label: item.trim(),\r\n                    onSelect: _createCompletionHandler(this, item.trim())\r\n                });\r\n            } else if (typeof item === \"object\") {\r\n                items.push({\r\n                    label: item.label,\r\n                    icon: item.icon,\r\n                    onSelect: _createSuggestionHandler(this, item.onSelect)\r\n                });\r\n            }\r\n        });\r\n\r\n        if (items.length === 0) {\r\n            this._suggest.hide();\r\n            return;\r\n        }\r\n\r\n        const menu = this._menu = new Menu({\r\n            items: items,\r\n            onSelect: () => {\r\n                this._suggest.hide();\r\n            }\r\n        });\r\n\r\n        Element.addClassName(menu.firstChild, \"flagrate-search-suggest-selected\");\r\n\r\n        this._suggest.update(menu).show();\r\n\r\n        // To prevent overflow.\r\n        let menuHeight = this._suggest.getHeight();\r\n        let menuMargin = parseInt(this._suggest.getStyle(\"margin-top\").replace(\"px\", \"\"), 10);\r\n        let cummOffsetTop = this.cumulativeOffset().top;\r\n        let upsideSpace = - window.pageYOffset + cummOffsetTop;\r\n        let downsideSpace = window.pageYOffset + window.innerHeight - cummOffsetTop - this.getHeight();\r\n        if (menuHeight + menuMargin > downsideSpace) {\r\n            if (upsideSpace > downsideSpace) {\r\n                if (upsideSpace < menuHeight + menuMargin) {\r\n                    menuHeight = (upsideSpace - menuMargin - menuMargin);\r\n                    this._suggest.style.maxHeight = `${menuHeight}px`;\r\n                }\r\n                this._suggest.addClassName(\"flagrate-search-suggest-upper\");\r\n            } else {\r\n                menuHeight = (downsideSpace - menuMargin - menuMargin);\r\n                this._suggest.style.maxHeight = `${menuHeight}px`;\r\n                this._suggest.removeClassName(\"flagrate-search-suggest-upper\");\r\n            }\r\n        } else {\r\n            this._suggest.removeClassName(\"flagrate-search-suggest-upper\");\r\n        }\r\n\r\n        // reset scroll position\r\n        this._suggest.scrollTop = 0;\r\n    },\r\n\r\n    _onKeydownHandler(e) {\r\n\r\n        // ESC: 27\r\n        if (e.keyCode === 27) {\r\n            this._input.select();\r\n            this._suggest.hide();\r\n        } else if (this._suggest.visible() === true) {\r\n            // ENTER: 13\r\n            if (e.keyCode === 13) {\r\n                const target = this._menu.getElementsByClassName(\"flagrate-search-suggest-selected\")[0];\r\n                target.click();\r\n                return;\r\n            }\r\n\r\n            // UP: 38, DOWN: 40\r\n            if (e.keyCode !== 38 && e.keyCode !== 40) {\r\n                return;\r\n            }\r\n\r\n            e.preventDefault();\r\n\r\n            const elements = this._menu.getElementsByTagName(\"button\");\r\n\r\n            for (let i = 0, l = elements.length; i < l; i++) {\r\n                if (elements[i].hasClassName(\"flagrate-search-suggest-selected\") === true) {\r\n                    if ((e.keyCode === 38 && i !== 0) || (e.keyCode === 40 && (i + 1) !== l)) {\r\n                        elements[i].removeClassName(\"flagrate-search-suggest-selected\");\r\n                    }\r\n\r\n                    let scrollTop = -1;\r\n\r\n                    if (e.keyCode === 38 && i !== 0) {\r\n                        elements[i - 1].addClassName(\"flagrate-search-suggest-selected\");\r\n                        scrollTop = elements[i - 1].offsetHeight + elements[i - 1].offsetTop;\r\n                    } else if (e.keyCode === 40 && (i + 1) !== l) {\r\n                        elements[i + 1].addClassName(\"flagrate-search-suggest-selected\");\r\n                        scrollTop = elements[i + 1].offsetHeight + elements[i + 1].offsetTop;\r\n                    }\r\n\r\n                    if (scrollTop !== -1) {\r\n                        this._suggest.scrollTop = scrollTop + 4 - this._suggest.getHeight();\r\n                    }\r\n\r\n                    break;\r\n                }\r\n            }\r\n        } else if (e.keyCode === 13) {\r\n            setTimeout(this.search.bind(this), 100);\r\n        }\r\n    },\r\n\r\n    _onKeyupHandler(e) {\r\n\r\n        if (this._lastValue !== this.getValue()) {\r\n            this._lastValue = this.getValue();\r\n\r\n            this.suggest();\r\n        }\r\n    },\r\n\r\n    _onFocusHandler(e) {\r\n\r\n        setTimeout(this.suggest.bind(this), 100);\r\n    },\r\n\r\n    _onBlurHandler(e) {\r\n\r\n        setTimeout(() => {\r\n            if (document.activeElement !== this._suggest && this._suggest.visible() === true) {\r\n                this._suggest.hide();\r\n            }\r\n        }, 100);\r\n    }\r\n};\r\n\r\nfunction _createCompletionHandler(searchBox: SearchBox, value: string) {\r\n\r\n    return () => {\r\n        searchBox._input.setValue(value);\r\n        searchBox._input.focus();\r\n    };\r\n}\r\n\r\nfunction _createSuggestionHandler(searchBox: SearchBox, onSelect: () => void) {\r\n\r\n    return () => {\r\n        onSelect.call(searchBox);\r\n        searchBox._input.blur();\r\n    };\r\n}"]}