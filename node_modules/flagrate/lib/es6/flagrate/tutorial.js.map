{"version":3,"sources":["flagrate/tutorial.ts"],"names":[],"mappings":"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","file":"tutorial.js","sourcesContent":["/*\r\n   Copyright 2016 Webnium\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n*/\r\n\"use strict\";\r\n\r\nimport { emptyFunction } from \"./util\";\r\nimport { Element } from \"./element\";\r\nimport { Button } from \"./button\";\r\nimport { Popover } from \"./popover\";\r\nimport { Modal } from \"./modal\";\r\n\r\n/*?\r\n    class flagrate.Tutorial\r\n\r\n    The flagrate.Tutorial object provides a tutorial UI.\r\n\r\n    #### Example\r\n\r\n        // create\r\n        var tutorial = flagrate.createTutorial({\r\n        steps: [\r\n            {\r\n                target: \"#tutorial-step1\",// using selector string\r\n                text  : \"step1\"\r\n            },\r\n            {\r\n                target: \"#tutorial-step2\",\r\n                text  : \"step2\",\r\n            },\r\n            {\r\n                target: element,\r\n                text  : \"step3\"\r\n            },\r\n            {\r\n                title : \"Finish\",\r\n                text  : \"Good luck!\"\r\n            }\r\n        ]\r\n        });\r\n\r\n        // open\r\n        tutorial.open();\r\n**/\r\nexport interface Option {\r\n    steps?: Step[];\r\n    index?: number;\r\n\r\n    onFinish?(tutorial?: this): void;\r\n    onAbort?(tutorial?: this): void;\r\n    onClose?(tutorial?: this): void;\r\n}\r\n\r\nexport interface Step {\r\n    /** Element to target. If target is undefined or not found, will creates flagrate.Modal. */\r\n    target?: string | HTMLElement;\r\n    /** Title for this step. */\r\n    title?: string;\r\n    /** Descriptive text for this step. */\r\n    text?: string;\r\n    /** Descriptive html for this step. */\r\n    html?: string;\r\n\r\n    /** Triggered whenever a step is started. */\r\n    onStep?(): void;\r\n    /** Triggered at before starting of this step. */\r\n    onBeforeStep?(done?: AsyncCallback): void;\r\n    /** Triggered at after of this step. */\r\n    onAfterStep?(done?: AsyncCallback): void;\r\n}\r\n\r\nexport interface AsyncCallback {\r\n    (): void;\r\n}\r\n\r\nexport interface ButtonOption {\r\n    id?: string;\r\n    className?: string;\r\n    color?: string;\r\n    label?: string;\r\n    labelHTML?: string;\r\n    icon?: string;\r\n    isFocused?: boolean;\r\n    isDisabled?: boolean;\r\n    onSelect?(): void;\r\n}\r\n\r\n/*?\r\n    flagrate.createTutorial(option)\r\n    new flagrate.Tutorial(option)\r\n    - option (Object) - options.\r\n\r\n    Creates new tutorial.\r\n\r\n    #### option\r\n\r\n    * `steps`              (Array; required): Array of **step** object.\r\n    * `count`              (Number; default `0`): current count of step.\r\n    * `onFinish`           (Function): callback when finish.\r\n    * `onAbort`            (Function): callback when abort.\r\n    * `onClose`            (Function): callback when close.\r\n\r\n    #### step\r\n\r\n    * `target`             (Element|String): Element to target. If target is undefined or not found, will creates flagrate.Modal.\r\n    * `title`              (String): Title for this step.\r\n    * `text`               (String): Descriptive text for this step.\r\n    * `html`               (String): Descriptive html for this step.\r\n    * `onStep`             (Function): Triggered whenever a step is started.\r\n    * `onBeforeStep`       (Function): Triggered at before starting of this step.\r\n    * `onAfterStep`        (Function): Triggered at after of this step.\r\n\r\n    ##### onBeforeStep / onAfterStep\r\n\r\n        // async callback\r\n        function (done) {// if expects callback, will waits for it.\r\n            setTimeout(done, 1000);\r\n        }\r\n\r\n        // sync\r\n        function () {\r\n            // ...\r\n        }\r\n**/\r\nexport class Tutorial {\r\n\r\n    onFinish: (tutorial?: this) => void = emptyFunction;\r\n    onAbort: (tutorial?: this) => void = emptyFunction;\r\n    onClose: (tutorial?: this) => void = emptyFunction;\r\n\r\n    private _steps: Step[] = [];\r\n    private _index: number = 0;\r\n\r\n    private _popover: Popover;\r\n    private _modal: Modal;\r\n    private _inStep: boolean;\r\n\r\n    constructor(opt: Option = {}) {\r\n\r\n        if (opt.steps) {\r\n            this._steps = opt.steps;\r\n        }\r\n        if (opt.index) {\r\n            this._index = opt.index;\r\n        }\r\n        if (opt.onFinish) {\r\n            this.onFinish = opt.onFinish;\r\n        }\r\n        if (opt.onAbort) {\r\n            this.onAbort = opt.onAbort;\r\n        }\r\n        if (opt.onClose) {\r\n            this.onClose = opt.onClose;\r\n        }\r\n    }\r\n\r\n    visible(): boolean {\r\n        return !!this._popover || !!this._modal || !!this._inStep;\r\n    }\r\n\r\n    open(): this {\r\n\r\n        if (this.visible() === false) {\r\n            this._main();\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    close(): this {\r\n\r\n        if (this.visible() === true) {\r\n            this._afterStep(this.onClose.bind(this));\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    abort(): this {\r\n\r\n        if (this.visible() === true) {\r\n            this._afterStep(this.onAbort.bind(this));\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    finish(): this {\r\n\r\n        this._afterStep(this.onFinish.bind(this));\r\n        this._index = 0;\r\n\r\n        return this;\r\n    }\r\n\r\n    prev(): this {\r\n\r\n        this._afterStep(() => {\r\n\r\n            if (this._index > 0) { --this._index; }\r\n            this._main();\r\n        });\r\n\r\n        return this;\r\n    }\r\n\r\n    next(): this {\r\n\r\n        this._afterStep(() => {\r\n\r\n            if ((this._index + 1) < this._steps.length) {\r\n                ++this._index;\r\n            }\r\n            this._main();\r\n        });\r\n\r\n        return this;\r\n    }\r\n\r\n    private _main(): this {\r\n\r\n        this._inStep = true;\r\n\r\n        const step = this._steps[this._index];\r\n\r\n        if (step.onBeforeStep) {\r\n            if (step.onBeforeStep.length) {\r\n                step.onBeforeStep.call(this, this._step.bind(this));\r\n                return this;\r\n            } else {\r\n                step.onBeforeStep.call(this);\r\n            }\r\n        }\r\n\r\n        this._step();\r\n\r\n        return this;\r\n    }\r\n\r\n    private _step(): this {\r\n\r\n        const step = this._steps[this._index];\r\n\r\n        const buttons: ButtonOption[] = [];\r\n\r\n        if ((this._index + 1) >= this._steps.length) {\r\n            buttons.push({\r\n                className: \"flagrate-tutorial-button-finish\",\r\n                onSelect: () => {\r\n                    this._afterStep(this.finish.bind(this));\r\n                }\r\n            });\r\n        } else {\r\n            buttons.push({\r\n                className: \"flagrate-tutorial-button-next\",\r\n                onSelect: () => {\r\n                    this._afterStep(this.next.bind(this));\r\n                }\r\n            });\r\n        }\r\n\r\n        if (this._index > 0) {\r\n            buttons.push({\r\n                className: \"flagrate-tutorial-button-prev\",\r\n                onSelect: () => {\r\n                    this._afterStep(this.prev.bind(this));\r\n                }\r\n            });\r\n        }\r\n\r\n        if ((this._index + 1) < this._steps.length) {\r\n            buttons.push({\r\n                className: \"flagrate-tutorial-button-abort\",\r\n                onSelect: () => {\r\n                    this._afterStep(this.abort.bind(this));\r\n                }\r\n            });\r\n        }\r\n\r\n        buttons[0].color = \"@primary\";\r\n\r\n        let target;\r\n        if (typeof step.target === \"string\") {\r\n            target = document.querySelector(step.target as string);\r\n        } else if (Element.isElement(step.target) === true) {\r\n            target = step.target;\r\n        }\r\n\r\n        if (target) {\r\n            const container = new Element();\r\n            const body = new Element();\r\n\r\n            if (step.html) {\r\n                body.insert(step.html).insertTo(container);\r\n            }\r\n\r\n            if (step.text) {\r\n                body.insertText(step.text).insertTo(container);\r\n            }\r\n\r\n            const buttonContainer = new Element(\"footer\").insertTo(container);\r\n            buttons.forEach(button => {\r\n                new Button(button).insertTo(buttonContainer);\r\n            });\r\n\r\n            this._popover = new Popover({\r\n                className: \"flagrate-tutorial\",\r\n                element: container\r\n            });\r\n\r\n            this._popover.open(target);\r\n        } else {\r\n            this._modal = new Modal({\r\n                disableCloseByMask: true,\r\n                disableCloseButton: true,\r\n                disableCloseByEsc: true,\r\n                className: \"flagrate-tutorial\",\r\n                title: step.title,\r\n                text: step.text,\r\n                html: step.html,\r\n                buttons: buttons\r\n            });\r\n\r\n            this._modal.open();\r\n        }\r\n\r\n        if (step.onStep) {\r\n            step.onStep.call(this);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    _afterStep(done: AsyncCallback) {\r\n\r\n        this._inStep = false;\r\n\r\n        let pp = false;\r\n\r\n        if (this._popover) {\r\n            pp = true;\r\n            this._popover.remove();\r\n            delete this._popover;\r\n        }\r\n        if (this._modal) {\r\n            pp = true;\r\n            this._modal.close();\r\n            delete this._modal;\r\n        }\r\n\r\n        if (pp === true) {\r\n            const step = this._steps[this._index];\r\n\r\n            if (step.onAfterStep) {\r\n                if (step.onAfterStep.length) {\r\n                    step.onAfterStep.call(this, done);\r\n                    return this;\r\n                } else {\r\n                    step.onAfterStep.call(this);\r\n                }\r\n            }\r\n        }\r\n\r\n        done();\r\n\r\n        return this;\r\n    }\r\n}\r\n\r\nexport function createTutorial(option?: Option): Tutorial {\r\n    return new Tutorial(option);\r\n}"]}