{"version":3,"sources":["node_modules/browser-pack/_prelude.js","lib/es6/Order.js","lib/es6/OrderSet.js","lib/es6/Position.js","lib/es6/PositionSet.js","lib/es6/kuromaty.js","lib/es6/util.js","node_modules/decimal.js-light/decimal.js","node_modules/flagrate/lib/es6/flagrate.js","node_modules/flagrate/lib/es6/flagrate/button.js","node_modules/flagrate/lib/es6/flagrate/buttons.js","node_modules/flagrate/lib/es6/flagrate/checkbox.js","node_modules/flagrate/lib/es6/flagrate/checkboxes.js","node_modules/flagrate/lib/es6/flagrate/combo-box.js","node_modules/flagrate/lib/es6/flagrate/context-menu.js","node_modules/flagrate/lib/es6/flagrate/element.js","node_modules/flagrate/lib/es6/flagrate/form.js","node_modules/flagrate/lib/es6/flagrate/grid.js","node_modules/flagrate/lib/es6/flagrate/menu.js","node_modules/flagrate/lib/es6/flagrate/modal.js","node_modules/flagrate/lib/es6/flagrate/notify.js","node_modules/flagrate/lib/es6/flagrate/popover.js","node_modules/flagrate/lib/es6/flagrate/progress.js","node_modules/flagrate/lib/es6/flagrate/pulldown.js","node_modules/flagrate/lib/es6/flagrate/radio.js","node_modules/flagrate/lib/es6/flagrate/radios.js","node_modules/flagrate/lib/es6/flagrate/search-box.js","node_modules/flagrate/lib/es6/flagrate/select.js","node_modules/flagrate/lib/es6/flagrate/slider.js","node_modules/flagrate/lib/es6/flagrate/switch.js","node_modules/flagrate/lib/es6/flagrate/tab.js","node_modules/flagrate/lib/es6/flagrate/text-area.js","node_modules/flagrate/lib/es6/flagrate/text-input.js","node_modules/flagrate/lib/es6/flagrate/tokenizer.js","node_modules/flagrate/lib/es6/flagrate/toolbar.js","node_modules/flagrate/lib/es6/flagrate/tutorial.js","node_modules/flagrate/lib/es6/flagrate/util.js"],"names":[],"mappings":"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","file":"generated.js","sourceRoot":"","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*!\n    Copyright 2017 Kuromatch\n*/\n\"use strict\";\nimport { Decimal } from \"decimal.js-light\";\nexport class Order {\n    constructor(order) {\n        this.time = order.time;\n        this.price = new Decimal(order.price);\n        this.origSize = new Decimal(order.origSize);\n        this.size = new Decimal(order.size);\n        this.side = order.side;\n        this.type = order.type;\n    }\n    merge(order) {\n        if (!this.price.equals(order.price)) {\n            throw new Error(\"Can not merge different price orders.\");\n        }\n        if (this.side !== order.side) {\n            // d8!e;:c&\n            throw new Error(\"Double options is not supported.\");\n        }\n        this.origSize = this.origSize.plus(order.origSize);\n        this.size = this.size.plus(order.size);\n    }\n}\n\n//# sourceMappingURL=Order.js.map\n","/*!\n    Copyright 2017 Kuromatch\n*/\n\"use strict\";\nimport { Order } from \"./Order\";\nexport class OrderSet {\n    constructor(orders) {\n        this.orders = {};\n        this._length = 0;\n        if (orders) {\n            orders.forEach(position => {\n                this.add(new Order(position));\n            });\n        }\n    }\n    add(position) {\n        const key = position.price.toString();\n        const existed = this.orders[key];\n        if (existed) {\n            existed.merge(position);\n            return;\n        }\n        this.orders[key] = position;\n        this._length++;\n    }\n    forEach(callbackFn) {\n        const orders = this.orders;\n        Object.keys(orders).forEach(key => callbackFn(orders[key], key));\n    }\n    isEmpty() {\n        return this._length === 0;\n    }\n}\n\n//# sourceMappingURL=OrderSet.js.map\n","/*!\n    Copyright 2017 Kuromatch\n*/\n\"use strict\";\nimport { Decimal } from \"decimal.js-light\";\nexport class Position {\n    constructor(position) {\n        this.time = position.time;\n        this.price = new Decimal(position.price);\n        this.size = new Decimal(position.size);\n        this.side = position.side;\n        this._sideSign = new Decimal(position.side === \"S\" ? 1 : -1);\n    }\n    marginAgainst(price) {\n        return this.price.minus(price).mul(this.size).mul(this._sideSign).toNumber();\n    }\n    merge(position) {\n        if (!this.price.equals(position.price)) {\n            throw new Error(\"Can not merge different price positions.\");\n        }\n        if (this.side != position.side) {\n            // d8!e;:c&\n            throw new Error(\"Double options is not supported.\");\n        }\n        this.size = this.size.plus(position.size);\n    }\n}\n\n//# sourceMappingURL=Position.js.map\n","/*!\n    Copyright 2017 Kuromatch\n*/\n\"use strict\";\nimport { Position } from \"./Position\";\nimport { Decimal } from \"decimal.js-light\";\nexport class PositionSet {\n    constructor(positions) {\n        this.positions = {};\n        this._size = new Decimal(0);\n        this._length = 0;\n        if (positions) {\n            positions.forEach(position => {\n                this.add(new Position(position));\n            });\n        }\n    }\n    get size() {\n        return this._size.toNumber();\n    }\n    add(position) {\n        this._size = this._size.plus(position.size);\n        const key = position.price.toString();\n        const existed = this.positions[key];\n        if (existed) {\n            existed.merge(position);\n            return;\n        }\n        this.positions[key] = position;\n        this._length++;\n    }\n    forEach(callbackFn) {\n        const positions = this.positions;\n        Object.keys(positions).forEach(key => callbackFn(positions[key], key));\n    }\n    marginAgainst(price) {\n        let margin = 0;\n        this.forEach(pos => {\n            margin += pos.marginAgainst(price);\n        });\n        return margin;\n    }\n    isEmpty() {\n        return this._length === 0;\n    }\n}\n\n//# sourceMappingURL=PositionSet.js.map\n","/*!\n    Copyright 2017 Kuromatch\n*/\nimport * as util from \"./util\";\nimport { PositionSet } from \"./PositionSet\";\nimport { OrderSet } from \"./OrderSet\";\nimport flagrate from \"flagrate/lib/es6/flagrate\";\nimport { Decimal } from \"decimal.js-light\";\nexport class Kuromaty {\n    constructor(container, options = {}) {\n        this.options = options;\n        this.timePeriod = 1;\n        this.barIndex = 0;\n        this.cursorPrice = 0;\n        this.cursorVolume = 0;\n        this.cursorBoard = 0;\n        this.cursorBoardPrice = 0;\n        this.pinnedPrices = [];\n        this.maxBarCount = 8200;\n        this.hasDepleted = false;\n        this.color = {\n            bg: \"#fafafa\",\n            text: \"#333333\",\n            textStrong: \"#111111\",\n            textWeak: \"#777777\",\n            short: \"#e9546b\",\n            long: \"#3eb370\",\n            askOrder: \"#ff303e\",\n            bidOrder: \"#17cb00\",\n            volume: \"#9b7cb6\",\n            askDepth: \"rgba(210,179,189,0.21)\",\n            bidDepth: \"rgba(201,210,179,0.25)\",\n            askDepthLast: \"rgba(210,179,189,0.45)\",\n            bidDepthLast: \"rgba(201,210,179,0.55)\",\n            grid: \"#eeeeee\",\n            border: \"#cccccc\",\n            borderText: \"#111111\",\n            borderLTP: \"rgba(255,150,25,0.6)\",\n            borderLTPText: \"#ffffff\",\n            lineMA1: \"#e9e7c6\",\n            lineMA2: \"#c6e6e9\",\n            lineMA3: \"#e9c6e8\"\n        };\n        this.cursorX = -1;\n        this.cursorY = -1;\n        this.canvasW = 0;\n        this.canvasH = 0;\n        this._dpr = window.devicePixelRatio;\n        this._hasUpdated = false;\n        this._hasRemoved = true;\n        this._afs = 0;\n        this._pricePops = [];\n        this._lastPointerdown = [0, 0];\n        this._lastPointerButtons = 0;\n        this._positions = new PositionSet();\n        this._orders = new OrderSet();\n        this.__keydownHandler = this._keydownHandler.bind(this);\n        if (typeof options.chartCount !== \"number\") {\n            options.chartCount = 1;\n        }\n        if (options.chartTitles === undefined) {\n            options.chartTitles = [];\n        }\n        if (options.chartOverlay === undefined) {\n            options.chartOverlay = false;\n        }\n        options.barWidth = options.barWidth || 5;\n        options.barMargin = options.barMargin || 3;\n        options.decimalPower = options.decimalPower || 0;\n        this._decimal = parseInt(\"1\" + Array(options.decimalPower + 1).join(\"0\"), 10);\n        this._create();\n        if (container) {\n            this.insertTo(container);\n        }\n    }\n    insertTo(container) {\n        container.appendChild(this._rootContainer);\n        this._hasRemoved = false;\n        this.resize();\n    }\n    remove() {\n        this._removeListeners();\n        this._rootContainer.parentNode.removeChild(this._rootContainer);\n        this.canvasW = this.canvasH = 0;\n        this._hasRemoved = true;\n        cancelAnimationFrame(this._afr);\n    }\n    resize() {\n        let w = this.canvasW = this._chartContainer.clientWidth;\n        let h = this.canvasH = this._chartContainer.clientHeight;\n        w *= this._dpr;\n        h *= this._dpr;\n        this.canvases.forEach(canvas => {\n            canvas.width = w;\n            canvas.height = h;\n        });\n        this._hasUpdated = true;\n        this._redraw();\n    }\n    zoom(delta) {\n        this.options.barWidth = Math.min(11, Math.max(1, this.options.barWidth + delta));\n        this._hasUpdated = true;\n    }\n    update(index, bars) {\n        this.charts[index].bars = bars;\n        this._hasUpdated = true;\n    }\n    updateHBars(index, hBars) {\n        this.charts[index].hBars = hBars;\n        this._hasUpdated = true;\n    }\n    tick(index, tick) {\n        const chart = this.charts[index];\n        chart.tickDelta = 0;\n        if (chart.ticks[0] && chart.bars[0] && chart.bars[0][4 /* Close */] !== tick[1 /* Ltp */]) {\n            chart.tickDelta = tick[1 /* Ltp */] - chart.bars[0][4 /* Close */];\n        }\n        if (!chart.ticks[0] || 1000 < tick[0 /* Time */] - chart.ticks[0][0 /* Time */]) {\n            chart.ticks.unshift(tick);\n            if (chart.ticks.length > 250) {\n                chart.ticks.pop();\n            }\n        }\n        let lastTime = Date.now() - 1000 * 60;\n        if (chart.bars.length > 0) {\n            lastTime = chart.bars[0][0 /* Time */];\n        }\n        const bar = chart.bars[0];\n        const time = tick[0 /* Time */];\n        if (!bar || new Date(lastTime).getMinutes() !== new Date(time).getMinutes()) {\n            const delta = Math.floor((time - lastTime) / 1000 / 60);\n            for (let i = delta; i > 0; i--) {\n                if (i === 1) {\n                    chart.bars.unshift([\n                        new Date(tick[0 /* Time */]).setSeconds(0, 0),\n                        tick[1 /* Ltp */],\n                        tick[1 /* Ltp */],\n                        tick[1 /* Ltp */],\n                        tick[1 /* Ltp */],\n                        tick[2 /* Volume */],\n                        tick[3 /* AskDepth */],\n                        tick[4 /* BidDepth */],\n                        tick[5 /* SellVolume */],\n                        tick[6 /* BuyVolume */]\n                    ]);\n                }\n                else {\n                    chart.bars.unshift([\n                        new Date(tick[0 /* Time */]).setSeconds(0, 0) - (1000 * 60 * (i - 1)),\n                        chart.ticks[0][1 /* Ltp */],\n                        chart.ticks[0][1 /* Ltp */],\n                        chart.ticks[0][1 /* Ltp */],\n                        chart.ticks[0][1 /* Ltp */],\n                        chart.ticks[0][2 /* Volume */],\n                        chart.ticks[0][3 /* AskDepth */],\n                        chart.ticks[0][4 /* BidDepth */],\n                        chart.ticks[0][5 /* SellVolume */],\n                        chart.ticks[0][6 /* BuyVolume */]\n                    ]);\n                }\n                if (chart.bars.length > this.maxBarCount) {\n                    chart.bars.pop();\n                }\n            }\n        }\n        else {\n            if (bar[2 /* High */] < tick[1 /* Ltp */]) {\n                bar[2 /* High */] = tick[1 /* Ltp */];\n            }\n            if (bar[3 /* Low */] > tick[1 /* Ltp */]) {\n                bar[3 /* Low */] = tick[1 /* Ltp */];\n            }\n            bar[4 /* Close */] = tick[1 /* Ltp */];\n            if (bar[5 /* Volume */] < tick[2 /* Volume */]) {\n                bar[5 /* Volume */] = tick[2 /* Volume */];\n            }\n            bar[6 /* AskDepth */] = tick[3 /* AskDepth */];\n            bar[7 /* BidDepth */] = tick[4 /* BidDepth */];\n            if (bar[8 /* SellVolume */] < tick[5 /* SellVolume */]) {\n                bar[8 /* SellVolume */] = tick[5 /* SellVolume */];\n            }\n            if (bar[9 /* BuyVolume */] < tick[6 /* BuyVolume */]) {\n                bar[9 /* BuyVolume */] = tick[6 /* BuyVolume */];\n            }\n        }\n        this._hasUpdated = true;\n    }\n    updateBoard(index, board) {\n        board = util.deepCopy(board);\n        const chart = this.charts[index];\n        const groupPrice = util.generatePriceGrouping(this._decimal, this.options.boardGroupSize);\n        let boardMaxSize = 0;\n        const maxPrice = chart.highest;\n        const minPrice = chart.lowest;\n        function groupUp(boardItems) {\n            if (boardItems.length === 0) {\n                return [];\n            }\n            let current = { price: groupPrice(boardItems[0].price), size: 0 };\n            let currentSize = new Decimal(0);\n            const groupedItems = [current];\n            for (let i = 0; i < boardItems.length; i++) {\n                const price = groupPrice(boardItems[i].price);\n                if (price < minPrice || maxPrice < price) {\n                    break;\n                }\n                if (current.price !== price) {\n                    if (boardMaxSize < current.size) {\n                        boardMaxSize = current.size;\n                    }\n                    current = {\n                        price,\n                        size: boardItems[i].size\n                    };\n                    currentSize = new Decimal(current.size);\n                    groupedItems.push(current);\n                }\n                else {\n                    currentSize = currentSize.plus(boardItems[i].size);\n                    current.size = currentSize.toNumber();\n                }\n            }\n            if (boardMaxSize < current.size) {\n                boardMaxSize = current.size;\n            }\n            return groupedItems;\n        }\n        board.asks = groupUp(board.asks);\n        board.bids = groupUp(board.bids);\n        chart.board = board;\n        chart.boardMaxSize = boardMaxSize;\n        this._hasUpdated = true;\n    }\n    setColor(option) {\n        for (const key in option) {\n            this.color[key] = option[key];\n        }\n        this._chartContainer.style.borderColor = this.color.border;\n    }\n    setPositions(positions) {\n        this._positions = new PositionSet(positions);\n    }\n    setOrders(orders) {\n        this._orders = new OrderSet(orders);\n    }\n    _create() {\n        this._rootContainer = document.createElement(\"div\");\n        this._rootContainer.className = \"kuromaty\";\n        this._chartContainer = document.createElement(\"div\");\n        this._chartContainer.className = \"kuromaty-chart\";\n        this._chartContainer.style.borderColor = this.color.border;\n        this._rootContainer.appendChild(this._chartContainer);\n        this.charts = [];\n        this.canvases = [];\n        this.contexts = [];\n        {\n            this.overlay = {\n                canvas: document.createElement(\"canvas\"),\n                context: null\n            };\n            this.overlay.context = this.overlay.canvas.getContext(\"2d\");\n            this.canvases.push(this.overlay.canvas);\n            this.contexts.push(this.overlay.context);\n            this.overlay.canvas.addEventListener(\"pointerdown\", this._pointerdownHandler.bind(this));\n            this.overlay.canvas.addEventListener(\"pointerup\", this._pointerupHandler.bind(this));\n            this.overlay.canvas.addEventListener(\"pointermove\", this._pointermoveHandler.bind(this));\n            this.overlay.canvas.addEventListener(\"pointerout\", this._pointeroutHandler.bind(this));\n            this.overlay.canvas.addEventListener(\"wheel\", this._wheelHandler.bind(this) /* , { passive: true } */);\n            this.overlay.canvas.addEventListener(\"contextmenu\", this._contextmenuHandler.bind(this));\n        }\n        for (let i = 0; i < this.options.chartCount; i++) {\n            const chart = {\n                title: this.options.chartTitles[i] || \"Untitled\",\n                canvas: document.createElement(\"canvas\"),\n                context: null,\n                bars: [],\n                hBars: [],\n                _bars: [],\n                ticks: [],\n                board: null,\n                boardMaxSize: 0,\n                range: 0,\n                highest: 0,\n                highestPrice: 0,\n                highestPricePrinted: false,\n                lowest: 0,\n                lowestPrice: 0,\n                lowestPricePrinted: false,\n                askPrice: 0,\n                bidPrice: 0,\n                maxVolume: 0,\n                volumeRatio: 0,\n                maxDepth: 0,\n                minDepth: 0,\n                depthRatio: 1,\n                latest: 0,\n                ratio: 1,\n                tickDelta: 0,\n                selected: i === 0\n            };\n            chart.context = chart.canvas.getContext(\"2d\");\n            this.charts.push(chart);\n            this.canvases.push(chart.canvas);\n            this.contexts.push(chart.context);\n        }\n        {\n            this.grid = {\n                canvas: document.createElement(\"canvas\"),\n                context: null\n            };\n            this.grid.context = this.grid.canvas.getContext(\"2d\");\n            this.canvases.push(this.grid.canvas);\n            this.contexts.push(this.grid.context);\n        }\n        // insert all canvas\n        this.canvases.reverse();\n        this.contexts.reverse();\n        this.canvases.forEach(canvas => {\n            this._chartContainer.appendChild(canvas);\n        });\n        this._addListeners();\n    }\n    _addListeners() {\n        window.addEventListener(\"keydown\", this.__keydownHandler);\n    }\n    _removeListeners() {\n        window.removeEventListener(\"keydown\", this.__keydownHandler);\n    }\n    _redraw() {\n        if (this._afr) {\n            cancelAnimationFrame(this._afr);\n        }\n        // initial settings\n        this.contexts.forEach(context => {\n            context.scale(this._dpr, this._dpr);\n            context.imageSmoothingEnabled = false;\n        });\n        const tick = () => {\n            if (this._hasUpdated && this.canvasW > 40 && this.canvasH > 40) {\n                this._hasUpdated = false;\n                this._draw();\n            }\n            if (!this._hasRemoved) {\n                this._afr = requestAnimationFrame(tick);\n            }\n        };\n        this._afr = requestAnimationFrame(tick);\n    }\n    _draw() {\n        const canvasW = this.canvasW, canvasH = this.canvasH, barW = this.options.barWidth + this.options.barMargin, chartW = canvasW - 45, chartH = canvasH - 16, chartM = barW * Math.max(2, 5 - this.barIndex), chartI = Math.max(0, this.barIndex - 3), barCount = Math.round((chartW - chartM) / barW) - 1, decimal = this._decimal, decimalPower = this.options.decimalPower, period = this.timePeriod;\n        let i = 0, j = 0, l = 0, m = this.charts.length, end = false, highest = 0, lowest = Infinity, maxVolume = 0, minVolume = Infinity, maxDepth = 0, minDepth = Infinity, bar, barH = 0, barDate, barDateMinutes, barDateHours, barDateDate;\n        this.hasDepleted = false;\n        // pre\n        for (j = 0; j < m; j++) {\n            let chart = this.charts[j];\n            chart.context.clearRect(0, 0, canvasW, canvasH);\n            if (period === 0 && !chart.selected) {\n                continue;\n            }\n            highest = 0;\n            lowest = Infinity;\n            maxVolume = 0;\n            maxDepth = 0;\n            minDepth = Infinity;\n            chart._bars = this._getBars(j, chartI, barCount * 2);\n            l = Math.min(barCount, chart._bars.length);\n            if (chart.selected) {\n                if (barCount > chart._bars.length && this.maxBarCount > chart.bars.length) {\n                    this.hasDepleted = true;\n                }\n            }\n            for (i = 0; i < l; i++) {\n                bar = chart._bars[i];\n                if (!bar) {\n                    break;\n                }\n                if (highest < bar[2 /* High */]) {\n                    highest = bar[2 /* High */];\n                }\n                if (lowest > bar[3 /* Low */]) {\n                    lowest = bar[3 /* Low */];\n                }\n                if (maxVolume < bar[5 /* Volume */]) {\n                    maxVolume = bar[5 /* Volume */];\n                }\n                if (maxDepth < bar[6 /* AskDepth */]) {\n                    maxDepth = bar[6 /* AskDepth */];\n                }\n                if (minDepth > bar[6 /* AskDepth */]) {\n                    minDepth = bar[6 /* AskDepth */];\n                }\n                if (maxDepth < bar[7 /* BidDepth */]) {\n                    maxDepth = bar[7 /* BidDepth */];\n                }\n                if (minDepth > bar[7 /* BidDepth */]) {\n                    minDepth = bar[7 /* BidDepth */];\n                }\n            }\n            if (chart._bars.length === 0) {\n                return;\n            }\n            chart.latest = chart.bars[0][4 /* Close */];\n            chart.highestPrice = highest;\n            chart.lowestPrice = lowest;\n            chart.highestPricePrinted = false;\n            chart.lowestPricePrinted = false;\n            let priceRatio = chartH / (highest - lowest);\n            chart.highest = highest + Math.round(((chartH / 3) / priceRatio) * decimal) / decimal;\n            chart.lowest = lowest - Math.round(((chartH / 3) / priceRatio) * decimal) / decimal;\n            chart.range = chart.highest - chart.lowest;\n            chart.ratio = chartH / chart.range;\n            chart.maxVolume = maxVolume;\n            chart.volumeRatio = (chartH / 5) / maxVolume;\n            chart.maxDepth = maxDepth;\n            chart.minDepth = minDepth;\n            chart.depthRatio = (chartH / 5) / (maxDepth - minDepth);\n            chart.canvas.style.opacity = chart.selected ? \"1\" : \"0.2\";\n            // border\n            chart.context.fillStyle = this.color.border;\n            chart.context.fillRect(chartW, 0, 1, chartH);\n            chart.context.fillRect(0, chartH, chartW + 1, 1);\n        } // pre\n        this.grid.context.clearRect(0, 0, canvasW, canvasH);\n        this.grid.context.fillStyle = this.color.bg;\n        this.grid.context.fillRect(0, 0, canvasW, canvasH);\n        this.grid.context.textAlign = \"center\";\n        this.overlay.context.clearRect(0, 0, canvasW, canvasH);\n        // main\n        for (j = 0; j < m; j++) {\n            let chart = this.charts[j];\n            let ctx = chart.context;\n            let barX = chartW - chartM;\n            if (period === 0 && !chart.selected) {\n                continue;\n            }\n            // bars\n            for (i = 0; i < l; i++) {\n                bar = chart._bars[i];\n                if (!bar || !chart._bars[i + 1]) {\n                    break;\n                }\n                if (i !== 0) {\n                    barX -= barW;\n                }\n                // ask/bid depth\n                if (chart.selected) {\n                    ctx.fillStyle = i === 0 && chartI < 1 ? this.color.askDepthLast : this.color.askDepth;\n                    ctx.fillRect(barX - this.options.barWidth, 0, barW, Math.round((bar[6 /* AskDepth */] - chart.minDepth) * chart.depthRatio));\n                    ctx.fillStyle = i === 0 && chartI < 1 ? this.color.bidDepthLast : this.color.bidDepth;\n                    ctx.fillRect(barX - this.options.barWidth, chartH, barW, -Math.round((bar[7 /* BidDepth */] - chart.minDepth) * chart.depthRatio));\n                }\n                // volume\n                ctx.fillStyle = this.color.volume;\n                ctx.fillRect(barX - Math.ceil(this.options.barWidth / 2), chartH, 1, -Math.round(bar[5 /* Volume */] * chart.volumeRatio));\n                if (period !== 0) {\n                    // bar height\n                    barH = Math.round((bar[1 /* Open */] - bar[4 /* Close */]) * chart.ratio);\n                    // candlestick\n                    ctx.fillStyle = bar[1 /* Open */] > bar[4 /* Close */] ? this.color.short : this.color.long;\n                    ctx.fillRect(barX - this.options.barWidth, Math.round((chart.highest - bar[1 /* Open */]) * chart.ratio), this.options.barWidth, barH === 0 ? 1 : barH);\n                    // candlestick (hige)\n                    ctx.fillRect(barX - Math.ceil(this.options.barWidth / 2), Math.round((chart.highest - bar[2 /* High */]) * chart.ratio), 1, Math.round((bar[2 /* High */] - bar[3 /* Low */]) * chart.ratio));\n                }\n                if (!chart.selected) {\n                    continue;\n                }\n                // highest\n                if (period !== 0 && bar[2 /* High */] === chart.highestPrice) {\n                    this.overlay.context.fillStyle = this.color.long;\n                    let hpX = barX - this.options.barWidth / 2;\n                    let hpY = Math.round((chart.highest - bar[2 /* High */]) * chart.ratio);\n                    this.overlay.context.beginPath();\n                    this.overlay.context.moveTo(hpX, hpY - 2);\n                    this.overlay.context.lineTo(hpX + 3, hpY - 5);\n                    this.overlay.context.lineTo(hpX - 3, hpY - 5);\n                    this.overlay.context.fill();\n                    if (chart.highestPricePrinted === false) {\n                        chart.highestPricePrinted = true;\n                        this.overlay.context.textAlign = (i < l / 2) ? \"right\" : \"left\";\n                        this.overlay.context.fillText(new Decimal(bar[2 /* High */]).toFixed(decimalPower), barX - ((i < l / 2) ? 0 : 5), hpY - 8);\n                        this._drawBorder(this.overlay.context, 0, hpY - 0.5, chartW, this.color.long, [1, 2]);\n                    }\n                }\n                // lowest\n                if (period !== 0 && bar[3 /* Low */] === chart.lowestPrice) {\n                    this.overlay.context.fillStyle = this.color.short;\n                    let lpX = barX - this.options.barWidth / 2;\n                    let lpY = Math.round((chart.highest - bar[3 /* Low */]) * chart.ratio);\n                    this.overlay.context.beginPath();\n                    this.overlay.context.moveTo(lpX, lpY + 2);\n                    this.overlay.context.lineTo(lpX + 3, lpY + 5);\n                    this.overlay.context.lineTo(lpX - 3, lpY + 5);\n                    this.overlay.context.fill();\n                    if (chart.lowestPricePrinted === false) {\n                        chart.lowestPricePrinted = true;\n                        this.overlay.context.textAlign = (i < l / 2) ? \"right\" : \"left\";\n                        this.overlay.context.fillText(new Decimal(bar[3 /* Low */]).toFixed(decimalPower), barX - ((i < l / 2) ? 0 : 5), lpY + 15);\n                        this._drawBorder(this.overlay.context, 0, lpY + 0.5, chartW, this.color.short, [1, 2]);\n                    }\n                }\n                // bar date\n                barDate = new Date(bar[0 /* Time */]);\n                barDateMinutes = barDate.getMinutes();\n                barDateHours = barDate.getHours();\n                barDateDate = barDate.getDate();\n                // datetime\n                if ((period === 0 && i % 10 === 0) ||\n                    (period >= 1 && period < 3 && barDateMinutes % 15 === 0) ||\n                    (period >= 3 && period < 5 && barDateMinutes % 30 === 0) ||\n                    (period >= 5 && period < 10 && barDateMinutes % 60 === 0) ||\n                    (period >= 10 && period < 15 && barDateMinutes % 60 === 0 && barDateHours % 2 === 0) ||\n                    (period >= 15 && period < 30 && barDateMinutes % 60 === 0 && barDateHours % 3 === 0) ||\n                    (period >= 30 && period < 60 && barDateMinutes % 60 === 0 && barDateHours % 6 === 0) ||\n                    (period >= 60 && period < 120 && barDateMinutes % 60 === 0 && barDateHours % 12 === 0) ||\n                    (period >= 120 && period < 240 && barDateHours === 0) ||\n                    (period >= 240 && period < 360 && barDateHours === 0 && barDateDate % 2 === 0) ||\n                    (period >= 360 && period < 720 && barDateHours === 0 && barDateDate % 3 === 0) ||\n                    (period >= 720 && barDateHours === 0 && barDateDate % 7 === 0)) {\n                    // vertical grid\n                    this.grid.context.fillStyle = this.color.grid;\n                    this.grid.context.fillRect(barX - Math.ceil(this.options.barWidth / 2), 0, 1, chartH);\n                    // time\n                    let timeStr;\n                    if (barDateHours === 0 && barDateMinutes === 0) {\n                        timeStr = `${barDate.getMonth() + 1}/${barDateDate}'`;\n                    }\n                    else {\n                        timeStr = `${barDateHours}:${util.zeroPadding(barDateMinutes, 2)}`;\n                    }\n                    this.grid.context.fillStyle = this.color.text;\n                    this.grid.context.font = \"10px sans-serif\";\n                    this.grid.context.fillText(timeStr, barX - Math.ceil(this.options.barWidth / 2), canvasH - 4);\n                }\n            } // bars\n            if (chart.selected) {\n                // LTP Position (Y)\n                let ltpp = Math.round((chart.highest - chart.latest) * chart.ratio);\n                if (!ltpp) {\n                    ltpp = Math.round(canvasH / 2);\n                }\n                // horizontal grid (price)\n                let lp = Infinity, cp = 0, add = decimal === 1 ? 1000 : 100 / decimal;\n                if (period === 0) {\n                    add /= 100;\n                }\n                for (i = chart.lowest - chart.lowest % add; i < chart.highest; i += add) {\n                    cp = Math.round((chart.highest - i) * chart.ratio);\n                    if (lp - cp < 80 || cp + 30 > chartH) {\n                        continue;\n                    }\n                    // grid\n                    this.grid.context.fillStyle = this.color.grid;\n                    this.grid.context.fillRect(0, cp, chartW, 1);\n                    // text\n                    this.grid.context.fillStyle = this.color.textWeak;\n                    this.grid.context.font = \"11px sans-serif\";\n                    this.grid.context.textAlign = \"left\";\n                    this.grid.context.fillText(new Decimal(i).toFixed(decimalPower), chartW + 2, cp + 5, 39);\n                    lp = cp;\n                }\n                // Price Range Indicator\n                this._drawVerticalRange(this.grid.context, chartW - chartM + barW, (chart.highest - chart.highestPrice) * chart.ratio, (chart.highestPrice - chart.lowestPrice) * chart.ratio, this.color.border, [2, 1]);\n                let priceRangeLabelY = ((chart.highestPrice - chart._bars[0][2 /* High */]) > (chart._bars[0][3 /* Low */] - chart.lowestPrice)) ? ((chart.highest - chart.highestPrice) * chart.ratio + 40) : ((chart.highest - chart.lowestPrice) * chart.ratio - 40);\n                this.grid.context.save();\n                this.grid.context.fillStyle = this.color.bg;\n                this.grid.context.fillRect(chartW - chartM + barW, priceRangeLabelY - 10, 1, 12);\n                this.grid.context.textAlign = \"right\";\n                this.grid.context.fillStyle = this.color.textWeak;\n                this.grid.context.font = \"10px sans-serif\";\n                this.grid.context.globalAlpha = 0.6;\n                this.grid.context.fillText(new Decimal(chart.highestPrice - chart.lowestPrice).toFixed(decimalPower), chartW - chartM + barW + 6, priceRangeLabelY);\n                this.grid.context.restore();\n                // Last Sell/Buy Volume Indicator (experimental)\n                this.overlay.context.save();\n                if (chart._bars[0][8 /* SellVolume */] > chart._bars[0][9 /* BuyVolume */]) {\n                    let grad = this.overlay.context.createLinearGradient(0, 1, 0, ltpp - 2);\n                    grad.addColorStop(0, this.color.askOrder);\n                    grad.addColorStop(1, this.color.bg);\n                    this.overlay.context.fillStyle = grad;\n                    this.overlay.context.globalAlpha = (chart._bars[0][8 /* SellVolume */] - chart._bars[0][9 /* BuyVolume */]) / chart._bars[0][5 /* Volume */];\n                    this.overlay.context.fillRect(chartW - 1, 1, -4, ltpp - 2);\n                }\n                else if (chart._bars[0][8 /* SellVolume */] < chart._bars[0][9 /* BuyVolume */]) {\n                    let grad = this.overlay.context.createLinearGradient(0, ltpp + 1, 0, chartH);\n                    grad.addColorStop(0, this.color.bg);\n                    grad.addColorStop(1, this.color.bidOrder);\n                    this.overlay.context.fillStyle = grad;\n                    this.overlay.context.globalAlpha = (chart._bars[0][9 /* BuyVolume */] - chart._bars[0][8 /* SellVolume */]) / chart._bars[0][5 /* Volume */];\n                    this.overlay.context.fillRect(chartW - 1, chartH - 1, -4, -(chartH - ltpp - 2));\n                }\n                this.overlay.context.restore();\n                if (this.cursorX > -1) {\n                    this._drawDepthIndicator(this.overlay.context, chartW - chartM - 7, 40, `Sell Vol. ${new Decimal(chart._bars[0][8 /* SellVolume */]).toFixed(1)}`, this.color.askOrder);\n                    this._drawDepthIndicator(this.overlay.context, chartW - chartM - 7, chartH - 40, `Buy Vol. ${new Decimal(chart._bars[0][9 /* BuyVolume */]).toFixed(1)}`, this.color.bidOrder);\n                }\n                // Last Depth Indicator (v2.25)\n                if (chart._bars[0][6 /* AskDepth */] && chart._bars[0][7 /* BidDepth */]) {\n                    this._drawDepthIndicator(this.overlay.context, chartW - chartM - 7, 20, `Ask Depth ${Math.round(chart._bars[0][6 /* AskDepth */])}`, this.color.askDepthLast);\n                    this._drawDepthIndicator(this.overlay.context, chartW - chartM - 7, chartH - 20, `Bid Depth ${Math.round(chart._bars[0][7 /* BidDepth */])}`, this.color.bidDepthLast);\n                }\n                // Ask/Bid Price Indicator (v2.24)\n                if (chart.askPrice && chart.bidPrice) {\n                    let askp = Math.round((chart.highest - chart.askPrice) * chart.ratio);\n                    let bidp = Math.round((chart.highest - chart.bidPrice) * chart.ratio);\n                    this._drawPriceTag2(this.overlay.context, chartW - chartM + Math.round(barW / 2), askp, chartM - Math.round(barW / 2), chart.askPrice, this.color.long, [2, 2]);\n                    this._drawPriceTag2(this.overlay.context, chartW - chartM + Math.round(barW / 2), bidp, chartM - Math.round(barW / 2), chart.bidPrice, this.color.short, [2, 2]);\n                }\n                // Board (testing)\n                if (chart.board) {\n                    let board;\n                    const boardItemHeight = Math.round((this.options.boardGroupSize / decimal) * chart.ratio);\n                    this.overlay.context.save();\n                    this.overlay.context.fillStyle = this.color.askOrder;\n                    for (i = 0; i < chart.board.asks.length - 1; i++) {\n                        board = chart.board.asks[i];\n                        this.overlay.context.globalAlpha = Math.min(1, board.size / chart.boardMaxSize + 0.12);\n                        this.overlay.context.fillRect(chartW - 1, Math.round((chart.highest - board.price) * chart.ratio), -(Math.min(19, Math.ceil(board.size / chart.boardMaxSize * 19)) + 1), -boardItemHeight);\n                    }\n                    this.overlay.context.fillStyle = this.color.bidOrder;\n                    for (i = 0; i < chart.board.bids.length - 1; i++) {\n                        board = chart.board.bids[i];\n                        this.overlay.context.globalAlpha = Math.min(1, board.size / chart.boardMaxSize + 0.12);\n                        this.overlay.context.fillRect(chartW - 1, Math.round((chart.highest - board.price) * chart.ratio), -(Math.min(19, Math.ceil(board.size / chart.boardMaxSize * 19)) + 1), boardItemHeight);\n                    }\n                    this.overlay.context.restore();\n                }\n                // Pinned Price\n                this.pinnedPrices.forEach(price => {\n                    this._drawPriceTag(this.overlay.context, 0, Math.round((chart.highest - price) * chart.ratio), chartW, price, price > chart.latest ? this.color.long : this.color.short, \"#ffffff\", [3, 3]);\n                });\n                // Positions (testing)\n                this._positions.forEach(position => {\n                    this._drawPositionMarker(this.overlay.context, 0, Math.round((chart.highest - position.price) * chart.ratio), chartW, position, chart.latest);\n                });\n                // Orders (testing)\n                this._orders.forEach(order => {\n                    this._drawOrderMarker(this.overlay.context, 0, Math.round((chart.highest - order.price) * chart.ratio), chartW, order, chart.latest);\n                });\n                // LTP\n                let color = this.color.borderLTP;\n                if (chart.highestPrice === chart.latest) {\n                    color = this.color.long;\n                }\n                else if (chart.lowestPrice === chart.latest) {\n                    color = this.color.short;\n                }\n                this._drawPriceTag(this.overlay.context, 0, ltpp, chartW, chart.latest, color, this.color.borderLTPText, []);\n                // Price Pop Effect (testing)\n                if (this.options.pricePopEffect) {\n                    this._drawPricePopEffect(chart, decimal, chartW, ltpp);\n                }\n            }\n        } // main\n        // technical\n        for (j = 0; j < m; j++) {\n            const chart = this.charts[j];\n            if (!chart.selected) {\n                break;\n            }\n            const ctx = chart.context;\n            const barX = chartW - chartM - 0.5;\n            if (period === 0) {\n                // tick (special)\n                this._drawSMA(ctx, barX, chart, l, 1, this.color.text);\n            }\n            else {\n                this._drawSMA(ctx, barX, chart, l, 10, this.color.lineMA1);\n                this._drawSMA(ctx, barX, chart, l, 21, this.color.lineMA2);\n                this._drawSMA(ctx, barX, chart, l, 34, this.color.lineMA3);\n            }\n        } // technical\n        // datetime\n        barDate = new Date(this.charts[0]._bars[0][0 /* Time */]);\n        this.grid.context.textAlign = \"right\";\n        this.grid.context.fillStyle = this.color.text;\n        this.grid.context.fillText(`:${util.zeroPadding(barDate.getMinutes(), 2)}`, canvasW - 45, canvasH - 4);\n        // cursor\n        this.cursorPrice = 0;\n        if (this.cursorX > 0 && this.cursorY > 30 && this.cursorX < chartW && this.cursorY < chartH) {\n            let pX = this.cursorX - (this.cursorX % barW);\n            i = Math.round((chartW - pX - chartM - this.options.barWidth) / barW);\n            pX = Math.floor(chartW - chartM - (i * barW) - (barW / 2)) - 1;\n            // bar line\n            this.grid.context.fillStyle = this.color.grid;\n            this.grid.context.fillRect(pX, 0, this.options.barWidth, chartH);\n            let chart = this.charts[0];\n            this.cursorPrice = Math.ceil((chart.highest - this.cursorY / chart.ratio) * decimal) / decimal;\n            if (decimal === 1) {\n                this.cursorPrice = Math.round(this.cursorPrice / 50) * 50;\n            }\n            else {\n                this.cursorPrice = Math.round(this.cursorPrice * (decimal / 10)) / (decimal / 10);\n            }\n            const cursorPriceY = Math.round((chart.highest - this.cursorPrice) * chart.ratio);\n            // price\n            this._drawPriceTag(this.overlay.context, 0, cursorPriceY, chartW, this.cursorPrice, this.color.border, this.color.textStrong, []);\n            // board\n            this.cursorBoard = 0;\n            this.cursorBoardPrice = 0;\n            if (chart.board) {\n                if (this.cursorPrice > chart.latest) {\n                    for (j = chart.board.asks.length - 1; j >= 0; j--) {\n                        if (chart.board.asks[j].price <= this.cursorPrice) {\n                            this.cursorBoard = chart.board.asks[j].size;\n                            this.cursorBoardPrice = chart.board.asks[j].price;\n                            break;\n                        }\n                    }\n                }\n                if (this.cursorPrice < chart.latest) {\n                    for (j = chart.board.bids.length - 1; j >= 0; j--) {\n                        if (chart.board.bids[j].price >= this.cursorPrice) {\n                            this.cursorBoard = chart.board.bids[j].size;\n                            this.cursorBoardPrice = chart.board.bids[j].price;\n                            break;\n                        }\n                    }\n                }\n            }\n            this.cursorBoard = Math.round(this.cursorBoard);\n            if (this.cursorBoard > 0) {\n                const cursorBoardPriceY = Math.round((chart.highest - this.cursorBoardPrice) * chart.ratio);\n                this._drawBorder(this.overlay.context, chartW - 25, cursorBoardPriceY + (this.cursorPrice > chart.latest ? -0.5 : +0.5), 10, this.cursorPrice > chart.latest ? this.color.askOrder : this.color.bidOrder, [1, 1]);\n                this.overlay.context.save();\n                this.overlay.context.globalAlpha = 0.8;\n                this.overlay.context.fillStyle = this.color.bg;\n                this.overlay.context.fillRect(chartW - 29, cursorBoardPriceY - 7, -22, 13);\n                this.overlay.context.globalAlpha = 1;\n                this.overlay.context.textAlign = \"right\";\n                this.overlay.context.fillStyle = this.cursorPrice > chart.latest ? this.color.askOrder : this.color.bidOrder;\n                this.overlay.context.fillText(this.cursorBoard.toString(10), chartW - 29, cursorBoardPriceY + 3, 20);\n                this.overlay.context.restore();\n            }\n            this.overlay.context.save();\n            if (i >= 0 && i < chart._bars.length) {\n                // Time Line\n                this.grid.context.fillStyle = this.color.grid;\n                this.grid.context.fillRect(pX - 13, chartH, 31, 20);\n                // Time Text\n                barDate = new Date(chart._bars[i][0 /* Time */]);\n                const barTime = barDate.getHours() === 0 && barDate.getMinutes() === 0 ?\n                    `${barDate.getMonth() + 1}/${barDate.getDate()}'` :\n                    `${barDate.getHours()}:${util.zeroPadding(barDate.getMinutes(), 2)}`;\n                this.grid.context.textAlign = \"center\";\n                this.grid.context.fillStyle = this.color.textStrong;\n                this.grid.context.font = \"10px sans-serif\";\n                this.grid.context.fillText(barTime, pX + this.options.barWidth / 2, canvasH - 4);\n                // Bar Info\n                this.overlay.context.textAlign = \"left\";\n                this.overlay.context.fillStyle = this.color.textStrong;\n                this.overlay.context.font = \"12px monospace\";\n                const diff = Math.round((100 - (chart._bars[i][1 /* Open */] / chart._bars[i][4 /* Close */] * 100)) * 1000) / 1000;\n                this.overlay.context.fillText((barDate.toLocaleString() +\n                    `  O ${new Decimal(chart._bars[i][1 /* Open */]).toFixed(decimalPower)}` +\n                    `  H ${new Decimal(chart._bars[i][2 /* High */]).toFixed(decimalPower)}` +\n                    `  L ${new Decimal(chart._bars[i][3 /* Low */]).toFixed(decimalPower)}` +\n                    `  C ${new Decimal(chart._bars[i][4 /* Close */]).toFixed(decimalPower)}` +\n                    `  ${util.toStringWithSign(diff)}%`), 10, 20);\n                this.overlay.context.fillText(\"[d>!f <cc<c+c<] e7&c/c*cc/c'h?=e
 c;e	
i$\", 10, 40);\n                // Volume\n                if (chart._bars[i + 1]) {\n                    this.overlay.context.globalAlpha = 0.8;\n                    this.overlay.context.fillStyle = this.color.bg;\n                    this.overlay.context.fillRect(pX + (barW / 2) - 17, (chart.highest - chart.lowestPrice) * chart.ratio + 2, 34, 13);\n                    this.overlay.context.globalAlpha = 1;\n                    this.overlay.context.textAlign = \"center\";\n                    this.overlay.context.font = \"10px sans-serif\";\n                    this.overlay.context.fillStyle = this.color.volume;\n                    this.overlay.context.fillText(Math.round(chart._bars[i][5 /* Volume */]).toString(10), pX + (barW / 2), (chart.highest - chart.lowestPrice) * chart.ratio + 12, 30);\n                }\n            }\n            this.overlay.context.restore();\n            // Total Margin of Positions on Cursor (testing)\n            if (!this._positions.isEmpty() && this.cursorPrice) {\n                const margin = Math.floor(this._positions.marginAgainst(this.cursorPrice));\n                const marginText = util.toStringWithSign(margin);\n                this.overlay.context.save();\n                this.overlay.context.globalAlpha = 0.8;\n                this.overlay.context.fillStyle = this.color.bg;\n                this.overlay.context.fillRect(6, cursorPriceY - 5, 60, 13);\n                this.overlay.context.globalAlpha = 1;\n                this.overlay.context.textAlign = \"left\";\n                this.overlay.context.fillStyle = margin < 0 ? this.color.short : this.color.long;\n                this.overlay.context.fillText(marginText, 10, cursorPriceY + 5, 56);\n                this.overlay.context.restore();\n            }\n        }\n        else {\n            this.overlay.context.save();\n            this.overlay.context.textAlign = \"left\";\n            this.overlay.context.font = \"11px monospace\";\n            this.overlay.context.fillStyle = this.color.text;\n            this.overlay.context.fillText(\"> \" + this.charts[0].title, 10, 20);\n            if (this.charts[1]) {\n                this.overlay.context.fillStyle = this.color.textWeak;\n                this.overlay.context.fillText(\"  \" + this.charts[1].title, 10, 35);\n            }\n            this.overlay.context.restore();\n        } // cursor\n        // Total Margin of Positions (testing)\n        if (!this._positions.isEmpty()) {\n            const chart = this.charts[0];\n            const margin = Math.floor(this._positions.marginAgainst(chart.latest));\n            const marginText = `e;:g	: ${this._positions.size}  h)d>!fg
: ${util.toStringWithSign(margin)}`;\n            this.overlay.context.save();\n            this.overlay.context.font = \"bold 11px sans-serif\";\n            this.overlay.context.textAlign = \"left\";\n            this.overlay.context.strokeStyle = this.color.bg;\n            this.overlay.context.fillStyle = margin < 0 ? this.color.short : this.color.long;\n            this.overlay.context.strokeText(marginText, 10, 80);\n            this.overlay.context.fillText(marginText, 10, 80);\n            this.overlay.context.restore();\n        }\n        if (this._afs !== 0) {\n            this._afs--;\n            this._hasUpdated = true;\n        }\n    }\n    _drawPricePopEffect(chart, decimal, chartW, ltpp) {\n        let i;\n        for (i = 0; i < this._pricePops.length; i++) {\n            this._pricePops[i][0] *= 0.95;\n            if (this._pricePops[i][0] < 0.08) {\n                this._pricePops.splice(i, 1);\n                i--;\n                continue;\n            }\n            if (this._pricePops[i][5]) {\n                this._pricePops[i][4] -= 0.15;\n            }\n            else {\n                this._pricePops[i][4] += 0.15;\n            }\n        }\n        if (chart.tickDelta !== 0) {\n            this._pricePops.push([\n                1,\n                (Math.round(Math.abs(chart.tickDelta) * decimal) / decimal).toString(10),\n                chart.tickDelta > 0 ? this.color.long : this.color.short,\n                chartW - 12,\n                chart.tickDelta > 0 ? (ltpp - 8) : (ltpp + 16),\n                chart.tickDelta > 0,\n                Math.abs(chart.tickDelta) / chart.latest * 100 > 0.025 ? \"bold 11px sans-serif\" : \"10px sans-serif\"\n            ]);\n            this._afs = Math.max(50, this._afs);\n            chart.tickDelta = 0;\n        }\n        this.overlay.context.save();\n        this.overlay.context.textAlign = \"right\";\n        for (i = 0; i < this._pricePops.length; i++) {\n            const [alpha, delta, fillStyle, posX, posY, isBuy, font] = this._pricePops[i];\n            this.overlay.context.font = font;\n            this.overlay.context.globalAlpha = alpha;\n            this.overlay.context.fillStyle = fillStyle;\n            this.overlay.context.fillText(delta, posX, posY);\n        }\n        this.overlay.context.restore();\n    }\n    _getBars(index, start, barCount) {\n        const chart = this.charts[index];\n        const period = this.timePeriod;\n        if (chart.bars.length === 0) {\n            return [];\n        }\n        if (period === 1) {\n            return chart.bars.slice(start, start + barCount);\n        }\n        else if (period === 0) {\n            return chart.ticks.slice(start, start + barCount).map(tick => {\n                return [\n                    tick[0 /* Time */],\n                    tick[1 /* Ltp */],\n                    tick[1 /* Ltp */],\n                    tick[1 /* Ltp */],\n                    tick[1 /* Ltp */],\n                    tick[2 /* Volume */],\n                    tick[3 /* AskDepth */],\n                    tick[4 /* BidDepth */],\n                    tick[5 /* SellVolume */],\n                    tick[6 /* BuyVolume */]\n                ];\n            });\n        }\n        const bars = [];\n        let date;\n        let backCount = 0;\n        // use hBars (experimental)\n        if (period === 60) {\n            bars.push.apply(bars, util.deepCopy(chart.hBars.slice(start, start + barCount)));\n        }\n        else if (period > 60) {\n            const hBars = chart.hBars;\n            if (start !== 0) {\n                date = new Date(hBars[0][0 /* Time */]);\n                backCount = start * (period / 60) + (date.getHours() % (period / 60)) - (period / 60);\n            }\n            let i = Math.min((barCount * (period / 60)) + backCount - 1, hBars.length - 1);\n            for (; i >= backCount; i--) {\n                date = new Date(hBars[i][0 /* Time */]);\n                if (bars.length === 0 ||\n                    (date.getHours() % Math.ceil(period / 60) === 0 &&\n                        bars[0][0 /* Time */] < hBars[i][0 /* Time */])) {\n                    bars.unshift([\n                        date.getTime(),\n                        hBars[i][1 /* Open */],\n                        hBars[i][2 /* High */],\n                        hBars[i][3 /* Low */],\n                        hBars[i][4 /* Close */],\n                        hBars[i][5 /* Volume */],\n                        hBars[i][6 /* AskDepth */] || 0,\n                        hBars[i][7 /* BidDepth */] || 0,\n                        hBars[i][8 /* SellVolume */] || 0,\n                        hBars[i][9 /* BuyVolume */] || 0\n                    ]);\n                    continue;\n                }\n                if (bars[0][2 /* High */] < hBars[i][2 /* High */]) {\n                    bars[0][2 /* High */] = hBars[i][2 /* High */];\n                }\n                if (bars[0][3 /* Low */] > hBars[i][3 /* Low */]) {\n                    bars[0][3 /* Low */] = hBars[i][3 /* Low */];\n                }\n                bars[0][4 /* Close */] = hBars[i][4 /* Close */];\n                bars[0][5 /* Volume */] += hBars[i][5 /* Volume */];\n                bars[0][6 /* AskDepth */] = hBars[i][6 /* AskDepth */] || 0;\n                bars[0][7 /* BidDepth */] = hBars[i][7 /* BidDepth */] || 0;\n                bars[0][8 /* SellVolume */] += hBars[i][8 /* SellVolume */] || 0;\n                bars[0][9 /* BuyVolume */] += hBars[i][9 /* BuyVolume */] || 0;\n            }\n        }\n        const mBars = chart.bars;\n        if (start !== 0) {\n            date = new Date(mBars[0][0 /* Time */]);\n            backCount = start * period + (date.getMinutes() % period) - period;\n        }\n        let i = Math.min((barCount * period) + backCount - 1, mBars.length - 1) - (bars.length * (period / 60));\n        for (; i >= backCount; i--) {\n            if (bars.length !== 0 && bars[0][0 /* Time */] > mBars[i][0 /* Time */]) {\n                continue;\n            }\n            date = new Date(mBars[i][0 /* Time */]);\n            if (bars.length === 0 ||\n                (date.getMinutes() % period === 0 &&\n                    date.getHours() % Math.ceil(period / 60) === 0 &&\n                    bars[0][0 /* Time */] < mBars[i][0 /* Time */])) {\n                bars.unshift([\n                    date.setSeconds(0, 0),\n                    mBars[i][1 /* Open */],\n                    mBars[i][2 /* High */],\n                    mBars[i][3 /* Low */],\n                    mBars[i][4 /* Close */],\n                    mBars[i][5 /* Volume */],\n                    mBars[i][6 /* AskDepth */] || 0,\n                    mBars[i][7 /* BidDepth */] || 0,\n                    mBars[i][8 /* SellVolume */] || 0,\n                    mBars[i][9 /* BuyVolume */] || 0\n                ]);\n                continue;\n            }\n            if (bars[0][2 /* High */] < mBars[i][2 /* High */]) {\n                bars[0][2 /* High */] = mBars[i][2 /* High */];\n            }\n            if (bars[0][3 /* Low */] > mBars[i][3 /* Low */]) {\n                bars[0][3 /* Low */] = mBars[i][3 /* Low */];\n            }\n            bars[0][4 /* Close */] = mBars[i][4 /* Close */];\n            bars[0][5 /* Volume */] += mBars[i][5 /* Volume */];\n            bars[0][6 /* AskDepth */] = mBars[i][6 /* AskDepth */] || 0;\n            bars[0][7 /* BidDepth */] = mBars[i][7 /* BidDepth */] || 0;\n            bars[0][8 /* SellVolume */] += mBars[i][8 /* SellVolume */] || 0;\n            bars[0][9 /* BuyVolume */] += mBars[i][9 /* BuyVolume */] || 0;\n        }\n        return bars.slice(0, barCount);\n    }\n    _keydownHandler(ev) {\n        const active = document.activeElement && document.activeElement.tagName;\n        if (active !== \"BODY\" && active !== \"DIV\" && active !== \"BUTTON\") {\n            return;\n        }\n        if (window.getSelection().toString() !== \"\") {\n            return;\n        }\n        let activated = false;\n        switch (ev.keyCode) {\n            // Space\n            case 32:\n                activated = true;\n                this.barIndex = 0;\n                this._hasUpdated = true;\n                break;\n        }\n        if (activated) {\n            ev.stopPropagation();\n            ev.preventDefault();\n        }\n    }\n    _contextmenuHandler(ev) {\n        ev.stopPropagation();\n        ev.preventDefault();\n        const price = this.cursorPrice;\n        const limitSide = this.charts[0].latest > price ? \"buy\" : \"sell\";\n        const stopSide = limitSide === \"buy\" ? \"sell\" : \"buy\";\n        const limitSideLabel = limitSide === \"buy\" ? \"h27c\" : \"e#2c
\";\n        const stopSideLabel = stopSide === \"buy\" ? \"h27c\" : \"e#2c
\";\n        const quickOrderItems = [];\n        if (this.options.quickOrder) {\n            quickOrderItems.push({\n                labelHTML: `<span class=\"kuromaty-label ${limitSide}\">${limitSideLabel}</span> fe $f3(f...`,\n                onSelect: () => {\n                    this.options.quickOrderHandler({\n                        price: price,\n                        type: \"limit\"\n                    });\n                }\n            }, {\n                labelHTML: `<span class=\"kuromaty-label ${stopSide}\">${stopSideLabel}</span> STOP-LIMIT f3(f...`,\n                onSelect: () => {\n                    this.options.quickOrderHandler({\n                        price: price,\n                        type: \"stop-limit\"\n                    });\n                }\n            });\n        }\n        if (this._contextMenu && this._contextMenu.visible() === true) {\n            this._contextMenu.close();\n        }\n        this._contextMenu = new flagrate.ContextMenu({\n            target: this._rootContainer,\n            items: [\n                {\n                    label: `${price}`,\n                    isDisabled: true\n                },\n                \"--\",\n                {\n                    labelHTML: \"d>!f <cc3cc<\",\n                    onSelect: () => {\n                        util.copyTextToClipboard(price.toString(10));\n                    }\n                },\n                ...quickOrderItems,\n                \"--\",\n                {\n                    label: \"d>!f <cc<c+c<e(f6e;\",\n                    onSelect: () => {\n                        this.pinnedPrices = [];\n                        this._hasUpdated = true;\n                    }\n                },\n                \"--\",\n                {\n                    label: \"c-c#c3c;c+\"\n                }\n            ]\n        }).open(ev);\n    }\n    _pointerdownHandler(ev) {\n        if (ev.target !== this.overlay.canvas) {\n            return;\n        }\n        ev.preventDefault();\n        if (this._contextMenu && this._contextMenu.visible() === true) {\n            this._contextMenu.close();\n            this._contextMenu = null;\n            return;\n        }\n        let offsetX = ev.offsetX;\n        let offsetY = ev.offsetY;\n        if (!offsetX && !offsetY && ev.target) {\n            const rect = ev.target.getBoundingClientRect();\n            offsetX = ev.clientX - rect.left;\n            offsetY = ev.clientY - rect.top;\n        }\n        let buttons = ev.buttons;\n        if (buttons === undefined && ev.which) {\n            switch (ev.which) {\n                case 2:\n                    buttons = 4;\n                    break;\n                case 3:\n                    buttons = 2;\n                    break;\n                default:\n                    buttons = ev.which;\n            }\n        }\n        if (buttons === 2) {\n            return;\n        }\n        this._lastPointerdown = [offsetX, offsetY];\n        this._lastPointerButtons = buttons;\n        this._dragStartX = undefined;\n    }\n    _pointerupHandler(ev) {\n        if (ev.target !== this.overlay.canvas) {\n            return;\n        }\n        let offsetX = ev.offsetX;\n        let offsetY = ev.offsetY;\n        if (!offsetX && !offsetY) {\n            const rect = ev.target.getBoundingClientRect();\n            offsetX = ev.clientX - rect.left;\n            offsetY = ev.clientY - rect.top;\n        }\n        if (ev.pointerType !== \"touch\" &&\n            this._lastPointerdown[0] === offsetX &&\n            this._lastPointerdown[1] === offsetY) {\n            if (this._lastPointerButtons === 1) {\n                if (this.cursorPrice) {\n                    const pinnedPriceIndex = this.pinnedPrices.indexOf(this.cursorPrice);\n                    if (pinnedPriceIndex === -1) {\n                        this.pinnedPrices.push(this.cursorPrice);\n                    }\n                    else {\n                        this.pinnedPrices.splice(pinnedPriceIndex, 1);\n                    }\n                }\n            }\n        }\n        this._lastPointerdown = [0, 0];\n        this._lastPointerButtons = 0;\n        this._hasUpdated = true;\n        ev.preventDefault();\n    }\n    _pointermoveHandler(ev) {\n        if (ev.target !== this.overlay.canvas) {\n            return;\n        }\n        let offsetX = ev.offsetX;\n        let offsetY = ev.offsetY;\n        if (!offsetX && !offsetY) {\n            const rect = ev.target.getBoundingClientRect();\n            offsetX = ev.clientX - rect.left;\n            offsetY = ev.clientY - rect.top;\n        }\n        let buttons = ev.buttons;\n        if (buttons === undefined && ev.which) {\n            switch (ev.which) {\n                case 2:\n                    buttons = 4;\n                    break;\n                case 3:\n                    buttons = 2;\n                    break;\n                default:\n                    buttons = ev.which;\n            }\n        }\n        if (buttons === 1) {\n            ev.preventDefault();\n            if (!this._dragStartX) {\n                this._dragStartX = offsetX;\n                this._dragStartI = this.barIndex;\n            }\n            const deltaX = this._dragStartX - offsetX;\n            this.barIndex = this._dragStartI - Math.round(deltaX / (this.options.barWidth + this.options.barMargin));\n            if (this.barIndex < 0) {\n                this.barIndex = 0;\n            }\n            else if (this.barIndex >= this.charts[0].bars.length) {\n                this.barIndex = this.charts[0].bars.length - 1;\n            }\n        }\n        else {\n            this._dragStartX = undefined;\n        }\n        this.cursorX = offsetX;\n        this.cursorY = offsetY;\n        this._hasUpdated = true;\n    }\n    _pointeroutHandler(ev) {\n        this.cursorX = this.cursorY = -1;\n    }\n    _wheelHandler(ev) {\n        ev.preventDefault();\n        if (ev.ctrlKey) {\n            this.zoom(ev.deltaY < 0 ? 1 : ev.deltaY > 0 ? -1 : 0);\n            return;\n        }\n        this.barIndex -= Math.round(ev.deltaX ? ev.deltaX : -(ev.deltaY / 6));\n        if (this.barIndex < 0) {\n            this.barIndex = 0;\n        }\n        this._hasUpdated = true;\n    }\n    _drawBorder(ctx, x, y, w, color, lineDash) {\n        ctx.save();\n        ctx.globalCompositeOperation = \"destination-over\";\n        ctx.beginPath();\n        ctx.lineWidth = 1;\n        ctx.strokeStyle = color;\n        ctx.setLineDash(lineDash);\n        ctx.moveTo(x, y);\n        ctx.lineTo(x + w, y);\n        ctx.stroke();\n        ctx.restore();\n    }\n    _drawVerticalRange(ctx, x, y, h, color, lineDash) {\n        x += 0.5;\n        y = Math.round(y);\n        h = Math.round(h);\n        ctx.save();\n        ctx.strokeStyle = color;\n        ctx.fillStyle = color;\n        ctx.beginPath();\n        ctx.lineWidth = 1;\n        ctx.setLineDash(lineDash);\n        ctx.moveTo(x, y + 1);\n        ctx.lineTo(x, y + h - 2);\n        ctx.stroke();\n        ctx.beginPath();\n        ctx.moveTo(x, y);\n        ctx.lineTo(x + 3, y + 4);\n        ctx.lineTo(x - 3, y + 4);\n        ctx.moveTo(x, y + h);\n        ctx.lineTo(x + 3, y + h - 4);\n        ctx.lineTo(x - 3, y + h - 4);\n        ctx.fill();\n        ctx.restore();\n    }\n    _drawPriceTag(ctx, x, y, w, price, color, textColor, lineDash, tagColor, alpha) {\n        this._drawBorder(ctx, x, y + 0.5, w - 5, color, lineDash);\n        w += x;\n        ctx.save();\n        ctx.globalAlpha = alpha || 1;\n        ctx.fillStyle = tagColor || color;\n        ctx.beginPath();\n        ctx.moveTo(w - 5, y);\n        ctx.lineTo(w + 1, y - 6);\n        ctx.lineTo(w + 42, y - 6);\n        ctx.lineTo(w + 43, y - 5);\n        ctx.lineTo(w + 43, y + 6);\n        ctx.lineTo(w + 42, y + 7);\n        ctx.lineTo(w + 1, y + 7);\n        ctx.lineTo(w - 5, y + 1);\n        ctx.fill();\n        ctx.textAlign = \"left\";\n        ctx.fillStyle = textColor;\n        ctx.font = \"11px sans-serif\";\n        ctx.fillText(new Decimal(price).toFixed(this.options.decimalPower), w + 2, y + 5, 39);\n        ctx.restore();\n    }\n    _drawPriceTag2(ctx, x, y, w, price, color, lineDash) {\n        this._drawBorder(ctx, x, y + 0.5, w - 5, color, lineDash);\n        w += x;\n        ctx.save();\n        ctx.fillStyle = this.color.bg;\n        ctx.fillRect(w + 1, y - 5, 40, 10);\n        ctx.textAlign = \"left\";\n        ctx.fillStyle = color;\n        ctx.font = \"11px sans-serif\";\n        ctx.fillText(new Decimal(price).toFixed(this.options.decimalPower), w + 2, y + 5, 39);\n        ctx.restore();\n    }\n    _drawDepthIndicator(ctx, x, y, value, color) {\n        this._drawBorder(ctx, x, y + 0.5, -10, color, [2, 2]);\n        ctx.save();\n        ctx.textAlign = \"right\";\n        ctx.fillStyle = this.color.textWeak;\n        ctx.strokeStyle = this.color.bg;\n        ctx.lineWidth = 2.5;\n        ctx.font = \"10px sans-serif\";\n        ctx.strokeText(value, x - 13, y + 3.5);\n        ctx.fillText(value, x - 13, y + 3.5);\n        ctx.restore();\n    }\n    _drawPositionMarker(ctx, x, y, w, position, ltp) {\n        const color = position.side === \"L\" ? this.color.long : this.color.short;\n        const margin = Math.floor(position.marginAgainst(ltp));\n        this._drawPriceTag(ctx, x, y, w, position.price.toNumber(), color, \"#ffffff\", [1, 2]);\n        ctx.save();\n        ctx.globalAlpha = 0.8;\n        ctx.fillStyle = this.color.bg;\n        ctx.fillRect(x + 4, y - 2, 80, -13);\n        ctx.globalAlpha = 1;\n        ctx.textAlign = \"left\";\n        ctx.fillStyle = color;\n        ctx.fillText(`${position.size} ${position.side}, ${util.toStringWithSign(margin)}`, x + 6, y - 5, 76);\n        ctx.restore();\n    }\n    _drawOrderMarker(ctx, x, y, w, order, ltp) {\n        let color = this.color.text;\n        switch (order.side) {\n            case \"L\":\n                color = this.color.long;\n                break;\n            case \"S\":\n                color = this.color.short;\n                break;\n        }\n        this._drawPriceTag(ctx, x, y, w, order.price.toNumber(), color, \"#ffffff\", [1, 5], null, 0.45);\n        ctx.save();\n        ctx.globalAlpha = 0.8;\n        ctx.fillStyle = this.color.bg;\n        ctx.fillRect(x + 4, y - 2, 80, -13);\n        ctx.globalAlpha = 1;\n        ctx.textAlign = \"left\";\n        ctx.fillStyle = color;\n        ctx.fillText(`${order.size} ${order.side} ${order.type}`, x + 6, y - 5, 76);\n        ctx.restore();\n    }\n    _drawSMA(ctx, x, chart, count, value, color) {\n        const barW = this.options.barMargin + this.options.barWidth;\n        x = x + barW;\n        ctx.save();\n        ctx.strokeStyle = color;\n        ctx.lineWidth = 1;\n        ctx.lineCap = \"round\";\n        ctx.lineJoin = \"round\";\n        ctx.setLineDash([]);\n        ctx.beginPath();\n        let i = 0, j, bar, p = 0, y = 0;\n        for (; i < count; i++) {\n            if (!chart._bars[i] || !chart._bars[i + value]) {\n                break;\n            }\n            x -= barW;\n            p = 0;\n            for (j = 0; j < value; j++) {\n                p += chart._bars[i + j][4 /* Close */];\n            }\n            p /= value;\n            y = Math.round((chart.highest - p) * chart.ratio) + 0.5;\n            if (i === 0) {\n                ctx.moveTo(x, y);\n            }\n            ctx.lineTo(x, y);\n        }\n        ctx.stroke();\n        ctx.restore();\n    }\n}\nif (window.Kuromaty === undefined) {\n    window.Kuromaty = Kuromaty;\n}\nexport default Kuromaty;\n\n//# sourceMappingURL=kuromaty.js.map\n","/*!\n    Copyright 2017 Kuromatch\n*/\nimport flagrate from \"flagrate/lib/es6/flagrate\";\nexport function zeroPadding(number, length) {\n    return (Array(length).join(\"0\") + number).slice(-length);\n}\nexport function generatePriceGrouping(decimal, groupSize) {\n    if (decimal === 1) {\n        return (price) => Math.round(price / groupSize) * groupSize;\n    }\n    return (price) => Math.round(price * (decimal / groupSize)) / (decimal / groupSize);\n}\nexport function toStringWithSign(number) {\n    return (number > 0 ? \"+\" : \"\") + number.toString(10);\n}\nexport function copyTextToClipboard(text) {\n    const span = flagrate.createElement(\"span\")\n        .insertText(text)\n        .insertTo(document.body);\n    const range = document.createRange();\n    range.selectNode(span);\n    const selection = window.getSelection();\n    selection.removeAllRanges();\n    selection.addRange(range);\n    document.execCommand(\"copy\");\n    span.remove();\n}\nexport function deepCopy(obj) {\n    let newObj;\n    if (Array.isArray(obj)) {\n        newObj = obj.length > 0 ? obj.slice(0) : [];\n        newObj.forEach((e, i) => {\n            if ((typeof e === \"object\" && e !== {}) ||\n                (Array.isArray(e) && e.length > 0)) {\n                newObj[i] = deepCopy(e);\n            }\n        });\n    }\n    else if (typeof obj === \"object\") {\n        newObj = Object.assign({}, obj);\n        Object.keys(newObj).forEach((key) => {\n            if ((typeof newObj[key] === \"object\" && newObj[key] !== {}) ||\n                (Array.isArray(newObj[key]) && newObj[key].length > 0)) {\n                newObj[key] = deepCopy(newObj[key]);\n            }\n        });\n    }\n    else {\n        newObj = obj;\n    }\n    return newObj;\n}\n\n//# sourceMappingURL=util.js.map\n","/*! decimal.js-light v2.3.0 https://github.com/MikeMcl/decimal.js-light/LICENCE */\r\n;(function (globalScope) {\r\n  'use strict';\r\n\r\n\r\n  /*\r\n   *  decimal.js-light v2.3.0\r\n   *  An arbitrary-precision Decimal type for JavaScript.\r\n   *  https://github.com/MikeMcl/decimal.js-light\r\n   *  Copyright (c) 2017 Michael Mclaughlin <M8ch88l@gmail.com>\r\n   *  MIT Expat Licence\r\n   */\r\n\r\n\r\n  // -----------------------------------  EDITABLE DEFAULTS  ------------------------------------ //\r\n\r\n\r\n    // The limit on the value of `precision`, and on the value of the first argument to\r\n    // `toDecimalPlaces`, `toExponential`, `toFixed`, `toPrecision` and `toSignificantDigits`.\r\n  var MAX_DIGITS = 1e9,                        // 0 to 1e9\r\n\r\n\r\n    // The initial configuration properties of the Decimal constructor.\r\n    Decimal = {\r\n\r\n      // These values must be integers within the stated ranges (inclusive).\r\n      // Most of these values can be changed during run-time using `Decimal.config`.\r\n\r\n      // The maximum number of significant digits of the result of a calculation or base conversion.\r\n      // E.g. `Decimal.config({ precision: 20 });`\r\n      precision: 20,                         // 1 to MAX_DIGITS\r\n\r\n      // The rounding mode used by default by `toInteger`, `toDecimalPlaces`, `toExponential`,\r\n      // `toFixed`, `toPrecision` and `toSignificantDigits`.\r\n      //\r\n      // ROUND_UP         0 Away from zero.\r\n      // ROUND_DOWN       1 Towards zero.\r\n      // ROUND_CEIL       2 Towards +Infinity.\r\n      // ROUND_FLOOR      3 Towards -Infinity.\r\n      // ROUND_HALF_UP    4 Towards nearest neighbour. If equidistant, up.\r\n      // ROUND_HALF_DOWN  5 Towards nearest neighbour. If equidistant, down.\r\n      // ROUND_HALF_EVEN  6 Towards nearest neighbour. If equidistant, towards even neighbour.\r\n      // ROUND_HALF_CEIL  7 Towards nearest neighbour. If equidistant, towards +Infinity.\r\n      // ROUND_HALF_FLOOR 8 Towards nearest neighbour. If equidistant, towards -Infinity.\r\n      //\r\n      // E.g.\r\n      // `Decimal.rounding = 4;`\r\n      // `Decimal.rounding = Decimal.ROUND_HALF_UP;`\r\n      rounding: 4,                           // 0 to 8\r\n\r\n      // The exponent value at and beneath which `toString` returns exponential notation.\r\n      // JavaScript numbers: -7\r\n      toExpNeg: -7,                          // 0 to -MAX_E\r\n\r\n      // The exponent value at and above which `toString` returns exponential notation.\r\n      // JavaScript numbers: 21\r\n      toExpPos:  21,                         // 0 to MAX_E\r\n\r\n      // The natural logarithm of 10.\r\n      // 115 digits\r\n      LN10: '2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286'\r\n    },\r\n\r\n\r\n  // ----------------------------------- END OF EDITABLE DEFAULTS ------------------------------- //\r\n\r\n\r\n    external = true,\r\n\r\n    decimalError = '[DecimalError] ',\r\n    invalidArgument = decimalError + 'Invalid argument: ',\r\n    exponentOutOfRange = decimalError + 'Exponent out of range: ',\r\n\r\n    mathfloor = Math.floor,\r\n    mathpow = Math.pow,\r\n\r\n    isDecimal = /^(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i,\r\n\r\n    ONE,\r\n    BASE = 1e7,\r\n    LOG_BASE = 7,\r\n    MAX_SAFE_INTEGER = 9007199254740991,\r\n    MAX_E = mathfloor(MAX_SAFE_INTEGER / LOG_BASE),    // 1286742750677284\r\n\r\n    // Decimal.prototype object\r\n    P = {};\r\n\r\n\r\n  // Decimal prototype methods\r\n\r\n\r\n  /*\r\n   *  absoluteValue                       abs\r\n   *  comparedTo                          cmp\r\n   *  decimalPlaces                       dp\r\n   *  dividedBy                           div\r\n   *  dividedToIntegerBy                  idiv\r\n   *  equals                              eq\r\n   *  exponent\r\n   *  greaterThan                         gt\r\n   *  greaterThanOrEqualTo                gte\r\n   *  isInteger                           isint\r\n   *  isNegative                          isneg\r\n   *  isPositive                          ispos\r\n   *  isZero\r\n   *  lessThan                            lt\r\n   *  lessThanOrEqualTo                   lte\r\n   *  logarithm                           log\r\n   *  minus                               sub\r\n   *  modulo                              mod\r\n   *  naturalExponential                  exp\r\n   *  naturalLogarithm                    ln\r\n   *  negated                             neg\r\n   *  plus                                add\r\n   *  precision                           sd\r\n   *  squareRoot                          sqrt\r\n   *  times                               mul\r\n   *  toDecimalPlaces                     todp\r\n   *  toExponential\r\n   *  toFixed\r\n   *  toInteger                           toint\r\n   *  toNumber\r\n   *  toPower                             pow\r\n   *  toPrecision\r\n   *  toSignificantDigits                 tosd\r\n   *  toString\r\n   *  valueOf                             val\r\n   */\r\n\r\n\r\n  /*\r\n   * Return a new Decimal whose value is the absolute value of this Decimal.\r\n   *\r\n   */\r\n  P.absoluteValue = P.abs = function () {\r\n    var x = new this.constructor(this);\r\n    if (x.s) x.s = 1;\r\n    return x;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return\r\n   *   1    if the value of this Decimal is greater than the value of `y`,\r\n   *  -1    if the value of this Decimal is less than the value of `y`,\r\n   *   0    if they have the same value\r\n   *\r\n   */\r\n  P.comparedTo = P.cmp = function (y) {\r\n    var i, j, xdL, ydL,\r\n      x = this;\r\n\r\n    y = new x.constructor(y);\r\n\r\n    // Signs differ?\r\n    if (x.s !== y.s) return x.s || -y.s;\r\n\r\n    // Compare exponents.\r\n    if (x.e !== y.e) return x.e > y.e ^ x.s < 0 ? 1 : -1;\r\n\r\n    xdL = x.d.length;\r\n    ydL = y.d.length;\r\n\r\n    // Compare digit by digit.\r\n    for (i = 0, j = xdL < ydL ? xdL : ydL; i < j; ++i) {\r\n      if (x.d[i] !== y.d[i]) return x.d[i] > y.d[i] ^ x.s < 0 ? 1 : -1;\r\n    }\r\n\r\n    // Compare lengths.\r\n    return xdL === ydL ? 0 : xdL > ydL ^ x.s < 0 ? 1 : -1;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return the number of decimal places of the value of this Decimal.\r\n   *\r\n   */\r\n  P.decimalPlaces = P.dp = function () {\r\n    var x = this,\r\n      w = x.d.length - 1,\r\n      dp = (w - x.e) * LOG_BASE;\r\n\r\n    // Subtract the number of trailing zeros of the last word.\r\n    w = x.d[w];\r\n    if (w) for (; w % 10 == 0; w /= 10) dp--;\r\n\r\n    return dp < 0 ? 0 : dp;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Decimal whose value is the value of this Decimal divided by `y`, truncated to\r\n   * `precision` significant digits.\r\n   *\r\n   */\r\n  P.dividedBy = P.div = function (y) {\r\n    return divide(this, new this.constructor(y));\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Decimal whose value is the integer part of dividing the value of this Decimal\r\n   * by the value of `y`, truncated to `precision` significant digits.\r\n   *\r\n   */\r\n  P.dividedToIntegerBy = P.idiv = function (y) {\r\n    var x = this,\r\n      Ctor = x.constructor;\r\n    return round(divide(x, new Ctor(y), 0, 1), Ctor.precision);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this Decimal is equal to the value of `y`, otherwise return false.\r\n   *\r\n   */\r\n  P.equals = P.eq = function (y) {\r\n    return !this.cmp(y);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return the (base 10) exponent value of this Decimal (this.e is the base 10000000 exponent).\r\n   *\r\n   */\r\n  P.exponent = function () {\r\n    return getBase10Exponent(this);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this Decimal is greater than the value of `y`, otherwise return\r\n   * false.\r\n   *\r\n   */\r\n  P.greaterThan = P.gt = function (y) {\r\n    return this.cmp(y) > 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this Decimal is greater than or equal to the value of `y`,\r\n   * otherwise return false.\r\n   *\r\n   */\r\n  P.greaterThanOrEqualTo = P.gte = function (y) {\r\n    return this.cmp(y) >= 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this Decimal is an integer, otherwise return false.\r\n   *\r\n   */\r\n  P.isInteger = P.isint = function () {\r\n    return this.e > this.d.length - 2;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this Decimal is negative, otherwise return false.\r\n   *\r\n   */\r\n  P.isNegative = P.isneg = function () {\r\n    return this.s < 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this Decimal is positive, otherwise return false.\r\n   *\r\n   */\r\n  P.isPositive = P.ispos = function () {\r\n    return this.s > 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this Decimal is 0, otherwise return false.\r\n   *\r\n   */\r\n  P.isZero = function () {\r\n    return this.s === 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this Decimal is less than `y`, otherwise return false.\r\n   *\r\n   */\r\n  P.lessThan = P.lt = function (y) {\r\n    return this.cmp(y) < 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this Decimal is less than or equal to `y`, otherwise return false.\r\n   *\r\n   */\r\n  P.lessThanOrEqualTo = P.lte = function (y) {\r\n    return this.cmp(y) < 1;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return the logarithm of the value of this Decimal to the specified base, truncated to\r\n   * `precision` significant digits.\r\n   *\r\n   * If no base is specified, return log[10](x).\r\n   *\r\n   * log[base](x) = ln(x) / ln(base)\r\n   *\r\n   * The maximum error of the result is 1 ulp (unit in the last place).\r\n   *\r\n   * [base] {number|string|Decimal} The base of the logarithm.\r\n   *\r\n   */\r\n  P.logarithm = P.log = function (base) {\r\n    var r,\r\n      x = this,\r\n      Ctor = x.constructor,\r\n      pr = Ctor.precision,\r\n      wpr = pr + 5;\r\n\r\n    // Default base is 10.\r\n    if (base === void 0) {\r\n      base = new Ctor(10);\r\n    } else {\r\n      base = new Ctor(base);\r\n\r\n      // log[-b](x) = NaN\r\n      // log[0](x)  = NaN\r\n      // log[1](x)  = NaN\r\n      if (base.s < 1 || base.eq(ONE)) throw Error(decimalError + 'NaN');\r\n    }\r\n\r\n    // log[b](-x) = NaN\r\n    // log[b](0) = -Infinity\r\n    if (x.s < 1) throw Error(decimalError + (x.s ? 'NaN' : '-Infinity'));\r\n\r\n    // log[b](1) = 0\r\n    if (x.eq(ONE)) return new Ctor(0);\r\n\r\n    external = false;\r\n    r = divide(ln(x, wpr), ln(base, wpr), wpr);\r\n    external = true;\r\n\r\n    return round(r, pr);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Decimal whose value is the value of this Decimal minus `y`, truncated to\r\n   * `precision` significant digits.\r\n   *\r\n   */\r\n  P.minus = P.sub = function (y) {\r\n    var x = this;\r\n    y = new x.constructor(y);\r\n    return x.s == y.s ? subtract(x, y) : add(x, (y.s = -y.s, y));\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Decimal whose value is the value of this Decimal modulo `y`, truncated to\r\n   * `precision` significant digits.\r\n   *\r\n   */\r\n  P.modulo = P.mod = function (y) {\r\n    var q,\r\n      x = this,\r\n      Ctor = x.constructor,\r\n      pr = Ctor.precision;\r\n\r\n    y = new Ctor(y);\r\n\r\n    // x % 0 = NaN\r\n    if (!y.s) throw Error(decimalError + 'NaN');\r\n\r\n    // Return x if x is 0.\r\n    if (!x.s) return round(new Ctor(x), pr);\r\n\r\n    // Prevent rounding of intermediate calculations.\r\n    external = false;\r\n    q = divide(x, y, 0, 1).times(y);\r\n    external = true;\r\n\r\n    return x.minus(q);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Decimal whose value is the natural exponential of the value of this Decimal,\r\n   * i.e. the base e raised to the power the value of this Decimal, truncated to `precision`\r\n   * significant digits.\r\n   *\r\n   */\r\n  P.naturalExponential = P.exp = function () {\r\n    return exp(this);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Decimal whose value is the natural logarithm of the value of this Decimal,\r\n   * truncated to `precision` significant digits.\r\n   *\r\n   */\r\n  P.naturalLogarithm = P.ln = function () {\r\n    return ln(this);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Decimal whose value is the value of this Decimal negated, i.e. as if multiplied by\r\n   * -1.\r\n   *\r\n   */\r\n  P.negated = P.neg = function () {\r\n    var x = new this.constructor(this);\r\n    x.s = -x.s || 0;\r\n    return x;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Decimal whose value is the value of this Decimal plus `y`, truncated to\r\n   * `precision` significant digits.\r\n   *\r\n   */\r\n  P.plus = P.add = function (y) {\r\n    var x = this;\r\n    y = new x.constructor(y);\r\n    return x.s == y.s ? add(x, y) : subtract(x, (y.s = -y.s, y));\r\n  };\r\n\r\n\r\n  /*\r\n   * Return the number of significant digits of the value of this Decimal.\r\n   *\r\n   * [z] {boolean|number} Whether to count integer-part trailing zeros: true, false, 1 or 0.\r\n   *\r\n   */\r\n  P.precision = P.sd = function (z) {\r\n    var e, sd, w,\r\n      x = this;\r\n\r\n    if (z !== void 0 && z !== !!z && z !== 1 && z !== 0) throw Error(invalidArgument + z);\r\n\r\n    e = getBase10Exponent(x) + 1;\r\n    w = x.d.length - 1;\r\n    sd = w * LOG_BASE + 1;\r\n    w = x.d[w];\r\n\r\n    // If non-zero...\r\n    if (w) {\r\n\r\n      // Subtract the number of trailing zeros of the last word.\r\n      for (; w % 10 == 0; w /= 10) sd--;\r\n\r\n      // Add the number of digits of the first word.\r\n      for (w = x.d[0]; w >= 10; w /= 10) sd++;\r\n    }\r\n\r\n    return z && e > sd ? e : sd;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Decimal whose value is the square root of this Decimal, truncated to `precision`\r\n   * significant digits.\r\n   *\r\n   */\r\n  P.squareRoot = P.sqrt = function () {\r\n    var e, n, pr, r, s, t, wpr,\r\n      x = this,\r\n      Ctor = x.constructor;\r\n\r\n    // Negative or zero?\r\n    if (x.s < 1) {\r\n      if (!x.s) return new Ctor(0);\r\n\r\n      // sqrt(-x) = NaN\r\n      throw Error(decimalError + 'NaN');\r\n    }\r\n\r\n    e = getBase10Exponent(x);\r\n    external = false;\r\n\r\n    // Initial estimate.\r\n    s = Math.sqrt(+x);\r\n\r\n    // Math.sqrt underflow/overflow?\r\n    // Pass x to Math.sqrt as integer, then adjust the exponent of the result.\r\n    if (s == 0 || s == 1 / 0) {\r\n      n = digitsToString(x.d);\r\n      if ((n.length + e) % 2 == 0) n += '0';\r\n      s = Math.sqrt(n);\r\n      e = mathfloor((e + 1) / 2) - (e < 0 || e % 2);\r\n\r\n      if (s == 1 / 0) {\r\n        n = '1e' + e;\r\n      } else {\r\n        n = s.toExponential();\r\n        n = n.slice(0, n.indexOf('e') + 1) + e;\r\n      }\r\n\r\n      r = new Ctor(n);\r\n    } else {\r\n      r = new Ctor(s.toString());\r\n    }\r\n\r\n    pr = Ctor.precision;\r\n    s = wpr = pr + 3;\r\n\r\n    // Newton-Raphson iteration.\r\n    for (;;) {\r\n      t = r;\r\n      r = t.plus(divide(x, t, wpr + 2)).times(0.5);\r\n\r\n      if (digitsToString(t.d).slice(0, wpr) === (n = digitsToString(r.d)).slice(0, wpr)) {\r\n        n = n.slice(wpr - 3, wpr + 1);\r\n\r\n        // The 4th rounding digit may be in error by -1 so if the 4 rounding digits are 9999 or\r\n        // 4999, i.e. approaching a rounding boundary, continue the iteration.\r\n        if (s == wpr && n == '4999') {\r\n\r\n          // On the first iteration only, check to see if rounding up gives the exact result as the\r\n          // nines may infinitely repeat.\r\n          round(t, pr + 1, 0);\r\n\r\n          if (t.times(t).eq(x)) {\r\n            r = t;\r\n            break;\r\n          }\r\n        } else if (n != '9999') {\r\n          break;\r\n        }\r\n\r\n        wpr += 4;\r\n      }\r\n    }\r\n\r\n    external = true;\r\n\r\n    return round(r, pr);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Decimal whose value is the value of this Decimal times `y`, truncated to\r\n   * `precision` significant digits.\r\n   *\r\n   */\r\n  P.times = P.mul = function (y) {\r\n    var carry, e, i, k, r, rL, t, xdL, ydL,\r\n      x = this,\r\n      Ctor = x.constructor,\r\n      xd = x.d,\r\n      yd = (y = new Ctor(y)).d;\r\n\r\n    // Return 0 if either is 0.\r\n    if (!x.s || !y.s) return new Ctor(0);\r\n\r\n    y.s *= x.s;\r\n    e = x.e + y.e;\r\n    xdL = xd.length;\r\n    ydL = yd.length;\r\n\r\n    // Ensure xd points to the longer array.\r\n    if (xdL < ydL) {\r\n      r = xd;\r\n      xd = yd;\r\n      yd = r;\r\n      rL = xdL;\r\n      xdL = ydL;\r\n      ydL = rL;\r\n    }\r\n\r\n    // Initialise the result array with zeros.\r\n    r = [];\r\n    rL = xdL + ydL;\r\n    for (i = rL; i--;) r.push(0);\r\n\r\n    // Multiply!\r\n    for (i = ydL; --i >= 0;) {\r\n      carry = 0;\r\n      for (k = xdL + i; k > i;) {\r\n        t = r[k] + yd[i] * xd[k - i - 1] + carry;\r\n        r[k--] = t % BASE | 0;\r\n        carry = t / BASE | 0;\r\n      }\r\n\r\n      r[k] = (r[k] + carry) % BASE | 0;\r\n    }\r\n\r\n    // Remove trailing zeros.\r\n    for (; !r[--rL];) r.pop();\r\n\r\n    if (carry) ++e;\r\n    else r.shift();\r\n\r\n    y.d = r;\r\n    y.e = e;\r\n\r\n    return external ? round(y, Ctor.precision) : y;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Decimal whose value is the value of this Decimal rounded to a maximum of `dp`\r\n   * decimal places using rounding mode `rm` or `rounding` if `rm` is omitted.\r\n   *\r\n   * If `dp` is omitted, return a new Decimal whose value is the value of this Decimal.\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX_DIGITS inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   */\r\n  P.toDecimalPlaces = P.todp = function (dp, rm) {\r\n    var x = this,\r\n      Ctor = x.constructor;\r\n\r\n    x = new Ctor(x);\r\n    if (dp === void 0) return x;\r\n\r\n    checkInt32(dp, 0, MAX_DIGITS);\r\n\r\n    if (rm === void 0) rm = Ctor.rounding;\r\n    else checkInt32(rm, 0, 8);\r\n\r\n    return round(x, dp + getBase10Exponent(x) + 1, rm);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this Decimal in exponential notation rounded to\r\n   * `dp` fixed decimal places using rounding mode `rounding`.\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX_DIGITS inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   */\r\n  P.toExponential = function (dp, rm) {\r\n    var str,\r\n      x = this,\r\n      Ctor = x.constructor;\r\n\r\n    if (dp === void 0) {\r\n      str = toString(x, true);\r\n    } else {\r\n      checkInt32(dp, 0, MAX_DIGITS);\r\n\r\n      if (rm === void 0) rm = Ctor.rounding;\r\n      else checkInt32(rm, 0, 8);\r\n\r\n      x = round(new Ctor(x), dp + 1, rm);\r\n      str = toString(x, true, dp + 1);\r\n    }\r\n\r\n    return str;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this Decimal in normal (fixed-point) notation to\r\n   * `dp` fixed decimal places and rounded using rounding mode `rm` or `rounding` if `rm` is\r\n   * omitted.\r\n   *\r\n   * As with JavaScript numbers, (-0).toFixed(0) is '0', but e.g. (-0.00001).toFixed(0) is '-0'.\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX_DIGITS inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * (-0).toFixed(0) is '0', but (-0.1).toFixed(0) is '-0'.\r\n   * (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.\r\n   * (-0).toFixed(3) is '0.000'.\r\n   * (-0.5).toFixed(0) is '-0'.\r\n   *\r\n   */\r\n  P.toFixed = function (dp, rm) {\r\n    var str, y,\r\n      x = this,\r\n      Ctor = x.constructor;\r\n\r\n    if (dp === void 0) return toString(x);\r\n\r\n    checkInt32(dp, 0, MAX_DIGITS);\r\n\r\n    if (rm === void 0) rm = Ctor.rounding;\r\n    else checkInt32(rm, 0, 8);\r\n\r\n    y = round(new Ctor(x), dp + getBase10Exponent(x) + 1, rm);\r\n    str = toString(y.abs(), false, dp + getBase10Exponent(y) + 1);\r\n\r\n    // To determine whether to add the minus sign look at the value before it was rounded,\r\n    // i.e. look at `x` rather than `y`.\r\n    return x.isneg() && !x.isZero() ? '-' + str : str;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Decimal whose value is the value of this Decimal rounded to a whole number using\r\n   * rounding mode `rounding`.\r\n   *\r\n   */\r\n  P.toInteger = P.toint = function () {\r\n    var x = this,\r\n      Ctor = x.constructor;\r\n    return round(new Ctor(x), getBase10Exponent(x) + 1, Ctor.rounding);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return the value of this Decimal converted to a number primitive.\r\n   *\r\n   */\r\n  P.toNumber = function () {\r\n    return +this;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Decimal whose value is the value of this Decimal raised to the power `y`,\r\n   * truncated to `precision` significant digits.\r\n   *\r\n   * For non-integer or very large exponents pow(x, y) is calculated using\r\n   *\r\n   *   x^y = exp(y*ln(x))\r\n   *\r\n   * The maximum error is 1 ulp (unit in last place).\r\n   *\r\n   * y {number|string|Decimal} The power to which to raise this Decimal.\r\n   *\r\n   */\r\n  P.toPower = P.pow = function (y) {\r\n    var e, k, pr, r, sign, yIsInt,\r\n      x = this,\r\n      Ctor = x.constructor,\r\n      guard = 12,\r\n      yn = +(y = new Ctor(y));\r\n\r\n    // pow(x, 0) = 1\r\n    if (!y.s) return new Ctor(ONE);\r\n\r\n    x = new Ctor(x);\r\n\r\n    // pow(0, y > 0) = 0\r\n    // pow(0, y < 0) = Infinity\r\n    if (!x.s) {\r\n      if (y.s < 1) throw Error(decimalError + 'Infinity');\r\n      return x;\r\n    }\r\n\r\n    // pow(1, y) = 1\r\n    if (x.eq(ONE)) return x;\r\n\r\n    pr = Ctor.precision;\r\n\r\n    // pow(x, 1) = x\r\n    if (y.eq(ONE)) return round(x, pr);\r\n\r\n    e = y.e;\r\n    k = y.d.length - 1;\r\n    yIsInt = e >= k;\r\n    sign = x.s;\r\n\r\n    if (!yIsInt) {\r\n\r\n      // pow(x < 0, y non-integer) = NaN\r\n      if (sign < 0) throw Error(decimalError + 'NaN');\r\n\r\n    // If y is a small integer use the 'exponentiation by squaring' algorithm.\r\n    } else if ((k = yn < 0 ? -yn : yn) <= MAX_SAFE_INTEGER) {\r\n      r = new Ctor(ONE);\r\n\r\n      // Max k of 9007199254740991 takes 53 loop iterations.\r\n      // Maximum digits array length; leaves [28, 34] guard digits.\r\n      e = Math.ceil(pr / LOG_BASE + 4);\r\n\r\n      external = false;\r\n\r\n      for (;;) {\r\n        if (k % 2) {\r\n          r = r.times(x);\r\n          truncate(r.d, e);\r\n        }\r\n\r\n        k = mathfloor(k / 2);\r\n        if (k === 0) break;\r\n\r\n        x = x.times(x);\r\n        truncate(x.d, e);\r\n      }\r\n\r\n      external = true;\r\n\r\n      return y.s < 0 ? new Ctor(ONE).div(r) : round(r, pr);\r\n    }\r\n\r\n    // Result is negative if x is negative and the last digit of integer y is odd.\r\n    sign = sign < 0 && y.d[Math.max(e, k)] & 1 ? -1 : 1;\r\n\r\n    x.s = 1;\r\n    external = false;\r\n    r = y.times(ln(x, pr + guard));\r\n    external = true;\r\n    r = exp(r);\r\n    r.s = sign;\r\n\r\n    return r;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this Decimal rounded to `sd` significant digits\r\n   * using rounding mode `rounding`.\r\n   *\r\n   * Return exponential notation if `sd` is less than the number of digits necessary to represent\r\n   * the integer part of the value in normal notation.\r\n   *\r\n   * [sd] {number} Significant digits. Integer, 1 to MAX_DIGITS inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   */\r\n  P.toPrecision = function (sd, rm) {\r\n    var e, str,\r\n      x = this,\r\n      Ctor = x.constructor;\r\n\r\n    if (sd === void 0) {\r\n      e = getBase10Exponent(x);\r\n      str = toString(x, e <= Ctor.toExpNeg || e >= Ctor.toExpPos);\r\n    } else {\r\n      checkInt32(sd, 1, MAX_DIGITS);\r\n\r\n      if (rm === void 0) rm = Ctor.rounding;\r\n      else checkInt32(rm, 0, 8);\r\n\r\n      x = round(new Ctor(x), sd, rm);\r\n      e = getBase10Exponent(x);\r\n      str = toString(x, sd <= e || e <= Ctor.toExpNeg, sd);\r\n    }\r\n\r\n    return str;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Decimal whose value is the value of this Decimal rounded to a maximum of `sd`\r\n   * significant digits using rounding mode `rm`, or to `precision` and `rounding` respectively if\r\n   * omitted.\r\n   *\r\n   * [sd] {number} Significant digits. Integer, 1 to MAX_DIGITS inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   */\r\n  P.toSignificantDigits = P.tosd = function (sd, rm) {\r\n    var x = this,\r\n      Ctor = x.constructor;\r\n\r\n    if (sd === void 0) {\r\n      sd = Ctor.precision;\r\n      rm = Ctor.rounding;\r\n    } else {\r\n      checkInt32(sd, 1, MAX_DIGITS);\r\n\r\n      if (rm === void 0) rm = Ctor.rounding;\r\n      else checkInt32(rm, 0, 8);\r\n    }\r\n\r\n    return round(new Ctor(x), sd, rm);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this Decimal.\r\n   *\r\n   * Return exponential notation if this Decimal has a positive exponent equal to or greater than\r\n   * `toExpPos`, or a negative exponent equal to or less than `toExpNeg`.\r\n   *\r\n   */\r\n  P.toString = P.valueOf = P.val = P.toJSON = function () {\r\n    var x = this,\r\n      e = getBase10Exponent(x),\r\n      Ctor = x.constructor;\r\n\r\n    return toString(x, e <= Ctor.toExpNeg || e >= Ctor.toExpPos);\r\n  };\r\n\r\n\r\n  // Helper functions for Decimal.prototype (P) and/or Decimal methods, and their callers.\r\n\r\n\r\n  /*\r\n   *  add                 P.minus, P.plus\r\n   *  checkInt32          P.todp, P.toExponential, P.toFixed, P.toPrecision, P.tosd\r\n   *  digitsToString      P.log, P.sqrt, P.pow, toString, exp, ln\r\n   *  divide              P.div, P.idiv, P.log, P.mod, P.sqrt, exp, ln\r\n   *  exp                 P.exp, P.pow\r\n   *  getBase10Exponent   P.exponent, P.sd, P.toint, P.sqrt, P.todp, P.toFixed, P.toPrecision,\r\n   *                      P.toString, divide, round, toString, exp, ln\r\n   *  getLn10             P.log, ln\r\n   *  getZeroString       digitsToString, toString\r\n   *  ln                  P.log, P.ln, P.pow, exp\r\n   *  parseDecimal        Decimal\r\n   *  round               P.abs, P.idiv, P.log, P.minus, P.mod, P.neg, P.plus, P.toint, P.sqrt,\r\n   *                      P.times, P.todp, P.toExponential, P.toFixed, P.pow, P.toPrecision, P.tosd,\r\n   *                      divide, getLn10, exp, ln\r\n   *  subtract            P.minus, P.plus\r\n   *  toString            P.toExponential, P.toFixed, P.toPrecision, P.toString, P.valueOf\r\n   *  truncate            P.pow\r\n   *\r\n   *  Throws:             P.log, P.mod, P.sd, P.sqrt, P.pow,  checkInt32, divide, round,\r\n   *                      getLn10, exp, ln, parseDecimal, Decimal, config\r\n   */\r\n\r\n\r\n  function add(x, y) {\r\n    var carry, d, e, i, k, len, xd, yd,\r\n      Ctor = x.constructor,\r\n      pr = Ctor.precision;\r\n\r\n    // If either is zero...\r\n    if (!x.s || !y.s) {\r\n\r\n      // Return x if y is zero.\r\n      // Return y if y is non-zero.\r\n      if (!y.s) y = new Ctor(x);\r\n      return external ? round(y, pr) : y;\r\n    }\r\n\r\n    xd = x.d;\r\n    yd = y.d;\r\n\r\n    // x and y are finite, non-zero numbers with the same sign.\r\n\r\n    k = x.e;\r\n    e = y.e;\r\n    xd = xd.slice();\r\n    i = k - e;\r\n\r\n    // If base 1e7 exponents differ...\r\n    if (i) {\r\n      if (i < 0) {\r\n        d = xd;\r\n        i = -i;\r\n        len = yd.length;\r\n      } else {\r\n        d = yd;\r\n        e = k;\r\n        len = xd.length;\r\n      }\r\n\r\n      // Limit number of zeros prepended to max(ceil(pr / LOG_BASE), len) + 1.\r\n      k = Math.ceil(pr / LOG_BASE);\r\n      len = k > len ? k + 1 : len + 1;\r\n\r\n      if (i > len) {\r\n        i = len;\r\n        d.length = 1;\r\n      }\r\n\r\n      // Prepend zeros to equalise exponents. Note: Faster to use reverse then do unshifts.\r\n      d.reverse();\r\n      for (; i--;) d.push(0);\r\n      d.reverse();\r\n    }\r\n\r\n    len = xd.length;\r\n    i = yd.length;\r\n\r\n    // If yd is longer than xd, swap xd and yd so xd points to the longer array.\r\n    if (len - i < 0) {\r\n      i = len;\r\n      d = yd;\r\n      yd = xd;\r\n      xd = d;\r\n    }\r\n\r\n    // Only start adding at yd.length - 1 as the further digits of xd can be left as they are.\r\n    for (carry = 0; i;) {\r\n      carry = (xd[--i] = xd[i] + yd[i] + carry) / BASE | 0;\r\n      xd[i] %= BASE;\r\n    }\r\n\r\n    if (carry) {\r\n      xd.unshift(carry);\r\n      ++e;\r\n    }\r\n\r\n    // Remove trailing zeros.\r\n    // No need to check for zero, as +x + +y != 0 && -x + -y != 0\r\n    for (len = xd.length; xd[--len] == 0;) xd.pop();\r\n\r\n    y.d = xd;\r\n    y.e = e;\r\n\r\n    return external ? round(y, pr) : y;\r\n  }\r\n\r\n\r\n  function checkInt32(i, min, max) {\r\n    if (i !== ~~i || i < min || i > max) {\r\n      throw Error(invalidArgument + i);\r\n    }\r\n  }\r\n\r\n\r\n  function digitsToString(d) {\r\n    var i, k, ws,\r\n      indexOfLastWord = d.length - 1,\r\n      str = '',\r\n      w = d[0];\r\n\r\n    if (indexOfLastWord > 0) {\r\n      str += w;\r\n      for (i = 1; i < indexOfLastWord; i++) {\r\n        ws = d[i] + '';\r\n        k = LOG_BASE - ws.length;\r\n        if (k) str += getZeroString(k);\r\n        str += ws;\r\n      }\r\n\r\n      w = d[i];\r\n      ws = w + '';\r\n      k = LOG_BASE - ws.length;\r\n      if (k) str += getZeroString(k);\r\n    } else if (w === 0) {\r\n      return '0';\r\n    }\r\n\r\n    // Remove trailing zeros of last w.\r\n    for (; w % 10 === 0;) w /= 10;\r\n\r\n    return str + w;\r\n  }\r\n\r\n\r\n  var divide = (function () {\r\n\r\n    // Assumes non-zero x and k, and hence non-zero result.\r\n    function multiplyInteger(x, k) {\r\n      var temp,\r\n        carry = 0,\r\n        i = x.length;\r\n\r\n      for (x = x.slice(); i--;) {\r\n        temp = x[i] * k + carry;\r\n        x[i] = temp % BASE | 0;\r\n        carry = temp / BASE | 0;\r\n      }\r\n\r\n      if (carry) x.unshift(carry);\r\n\r\n      return x;\r\n    }\r\n\r\n    function compare(a, b, aL, bL) {\r\n      var i, r;\r\n\r\n      if (aL != bL) {\r\n        r = aL > bL ? 1 : -1;\r\n      } else {\r\n        for (i = r = 0; i < aL; i++) {\r\n          if (a[i] != b[i]) {\r\n            r = a[i] > b[i] ? 1 : -1;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      return r;\r\n    }\r\n\r\n    function subtract(a, b, aL) {\r\n      var i = 0;\r\n\r\n      // Subtract b from a.\r\n      for (; aL--;) {\r\n        a[aL] -= i;\r\n        i = a[aL] < b[aL] ? 1 : 0;\r\n        a[aL] = i * BASE + a[aL] - b[aL];\r\n      }\r\n\r\n      // Remove leading zeros.\r\n      for (; !a[0] && a.length > 1;) a.shift();\r\n    }\r\n\r\n    return function (x, y, pr, dp) {\r\n      var cmp, e, i, k, prod, prodL, q, qd, rem, remL, rem0, sd, t, xi, xL, yd0, yL, yz,\r\n        Ctor = x.constructor,\r\n        sign = x.s == y.s ? 1 : -1,\r\n        xd = x.d,\r\n        yd = y.d;\r\n\r\n      // Either 0?\r\n      if (!x.s) return new Ctor(x);\r\n      if (!y.s) throw Error(decimalError + 'Division by zero');\r\n\r\n      e = x.e - y.e;\r\n      yL = yd.length;\r\n      xL = xd.length;\r\n      q = new Ctor(sign);\r\n      qd = q.d = [];\r\n\r\n      // Result exponent may be one less than e.\r\n      for (i = 0; yd[i] == (xd[i] || 0); ) ++i;\r\n      if (yd[i] > (xd[i] || 0)) --e;\r\n\r\n      if (pr == null) {\r\n        sd = pr = Ctor.precision;\r\n      } else if (dp) {\r\n        sd = pr + (getBase10Exponent(x) - getBase10Exponent(y)) + 1;\r\n      } else {\r\n        sd = pr;\r\n      }\r\n\r\n      if (sd < 0) return new Ctor(0);\r\n\r\n      // Convert precision in number of base 10 digits to base 1e7 digits.\r\n      sd = sd / LOG_BASE + 2 | 0;\r\n      i = 0;\r\n\r\n      // divisor < 1e7\r\n      if (yL == 1) {\r\n        k = 0;\r\n        yd = yd[0];\r\n        sd++;\r\n\r\n        // k is the carry.\r\n        for (; (i < xL || k) && sd--; i++) {\r\n          t = k * BASE + (xd[i] || 0);\r\n          qd[i] = t / yd | 0;\r\n          k = t % yd | 0;\r\n        }\r\n\r\n      // divisor >= 1e7\r\n      } else {\r\n\r\n        // Normalise xd and yd so highest order digit of yd is >= BASE/2\r\n        k = BASE / (yd[0] + 1) | 0;\r\n\r\n        if (k > 1) {\r\n          yd = multiplyInteger(yd, k);\r\n          xd = multiplyInteger(xd, k);\r\n          yL = yd.length;\r\n          xL = xd.length;\r\n        }\r\n\r\n        xi = yL;\r\n        rem = xd.slice(0, yL);\r\n        remL = rem.length;\r\n\r\n        // Add zeros to make remainder as long as divisor.\r\n        for (; remL < yL;) rem[remL++] = 0;\r\n\r\n        yz = yd.slice();\r\n        yz.unshift(0);\r\n        yd0 = yd[0];\r\n\r\n        if (yd[1] >= BASE / 2) ++yd0;\r\n\r\n        do {\r\n          k = 0;\r\n\r\n          // Compare divisor and remainder.\r\n          cmp = compare(yd, rem, yL, remL);\r\n\r\n          // If divisor < remainder.\r\n          if (cmp < 0) {\r\n\r\n            // Calculate trial digit, k.\r\n            rem0 = rem[0];\r\n            if (yL != remL) rem0 = rem0 * BASE + (rem[1] || 0);\r\n\r\n            // k will be how many times the divisor goes into the current remainder.\r\n            k = rem0 / yd0 | 0;\r\n\r\n            //  Algorithm:\r\n            //  1. product = divisor * trial digit (k)\r\n            //  2. if product > remainder: product -= divisor, k--\r\n            //  3. remainder -= product\r\n            //  4. if product was < remainder at 2:\r\n            //    5. compare new remainder and divisor\r\n            //    6. If remainder > divisor: remainder -= divisor, k++\r\n\r\n            if (k > 1) {\r\n              if (k >= BASE) k = BASE - 1;\r\n\r\n              // product = divisor * trial digit.\r\n              prod = multiplyInteger(yd, k);\r\n              prodL = prod.length;\r\n              remL = rem.length;\r\n\r\n              // Compare product and remainder.\r\n              cmp = compare(prod, rem, prodL, remL);\r\n\r\n              // product > remainder.\r\n              if (cmp == 1) {\r\n                k--;\r\n\r\n                // Subtract divisor from product.\r\n                subtract(prod, yL < prodL ? yz : yd, prodL);\r\n              }\r\n            } else {\r\n\r\n              // cmp is -1.\r\n              // If k is 0, there is no need to compare yd and rem again below, so change cmp to 1\r\n              // to avoid it. If k is 1 there is a need to compare yd and rem again below.\r\n              if (k == 0) cmp = k = 1;\r\n              prod = yd.slice();\r\n            }\r\n\r\n            prodL = prod.length;\r\n            if (prodL < remL) prod.unshift(0);\r\n\r\n            // Subtract product from remainder.\r\n            subtract(rem, prod, remL);\r\n\r\n            // If product was < previous remainder.\r\n            if (cmp == -1) {\r\n              remL = rem.length;\r\n\r\n              // Compare divisor and new remainder.\r\n              cmp = compare(yd, rem, yL, remL);\r\n\r\n              // If divisor < new remainder, subtract divisor from remainder.\r\n              if (cmp < 1) {\r\n                k++;\r\n\r\n                // Subtract divisor from remainder.\r\n                subtract(rem, yL < remL ? yz : yd, remL);\r\n              }\r\n            }\r\n\r\n            remL = rem.length;\r\n          } else if (cmp === 0) {\r\n            k++;\r\n            rem = [0];\r\n          }    // if cmp === 1, k will be 0\r\n\r\n          // Add the next digit, k, to the result array.\r\n          qd[i++] = k;\r\n\r\n          // Update the remainder.\r\n          if (cmp && rem[0]) {\r\n            rem[remL++] = xd[xi] || 0;\r\n          } else {\r\n            rem = [xd[xi]];\r\n            remL = 1;\r\n          }\r\n\r\n        } while ((xi++ < xL || rem[0] !== void 0) && sd--);\r\n      }\r\n\r\n      // Leading zero?\r\n      if (!qd[0]) qd.shift();\r\n\r\n      q.e = e;\r\n\r\n      return round(q, dp ? pr + getBase10Exponent(q) + 1 : pr);\r\n    };\r\n  })();\r\n\r\n\r\n  /*\r\n   * Return a new Decimal whose value is the natural exponential of `x` truncated to `sd`\r\n   * significant digits.\r\n   *\r\n   * Taylor/Maclaurin series.\r\n   *\r\n   * exp(x) = x^0/0! + x^1/1! + x^2/2! + x^3/3! + ...\r\n   *\r\n   * Argument reduction:\r\n   *   Repeat x = x / 32, k += 5, until |x| < 0.1\r\n   *   exp(x) = exp(x / 2^k)^(2^k)\r\n   *\r\n   * Previously, the argument was initially reduced by\r\n   * exp(x) = exp(r) * 10^k  where r = x - k * ln10, k = floor(x / ln10)\r\n   * to first put r in the range [0, ln10], before dividing by 32 until |x| < 0.1, but this was\r\n   * found to be slower than just dividing repeatedly by 32 as above.\r\n   *\r\n   * (Math object integer min/max: Math.exp(709) = 8.2e+307, Math.exp(-745) = 5e-324)\r\n   *\r\n   *  exp(x) is non-terminating for any finite, non-zero x.\r\n   *\r\n   */\r\n  function exp(x, sd) {\r\n    var denominator, guard, pow, sum, t, wpr,\r\n      i = 0,\r\n      k = 0,\r\n      Ctor = x.constructor,\r\n      pr = Ctor.precision;\r\n\r\n    if (getBase10Exponent(x) > 16) throw Error(exponentOutOfRange + getBase10Exponent(x));\r\n\r\n    // exp(0) = 1\r\n    if (!x.s) return new Ctor(ONE);\r\n\r\n    if (sd == null) {\r\n      external = false;\r\n      wpr = pr;\r\n    } else {\r\n      wpr = sd;\r\n    }\r\n\r\n    t = new Ctor(0.03125);\r\n\r\n    while (x.abs().gte(0.1)) {\r\n      x = x.times(t);    // x = x / 2^5\r\n      k += 5;\r\n    }\r\n\r\n    // Estimate the precision increase necessary to ensure the first 4 rounding digits are correct.\r\n    guard = Math.log(mathpow(2, k)) / Math.LN10 * 2 + 5 | 0;\r\n    wpr += guard;\r\n    denominator = pow = sum = new Ctor(ONE);\r\n    Ctor.precision = wpr;\r\n\r\n    for (;;) {\r\n      pow = round(pow.times(x), wpr);\r\n      denominator = denominator.times(++i);\r\n      t = sum.plus(divide(pow, denominator, wpr));\r\n\r\n      if (digitsToString(t.d).slice(0, wpr) === digitsToString(sum.d).slice(0, wpr)) {\r\n        while (k--) sum = round(sum.times(sum), wpr);\r\n        Ctor.precision = pr;\r\n        return sd == null ? (external = true, round(sum, pr)) : sum;\r\n      }\r\n\r\n      sum = t;\r\n    }\r\n  }\r\n\r\n\r\n  // Calculate the base 10 exponent from the base 1e7 exponent.\r\n  function getBase10Exponent(x) {\r\n    var e = x.e * LOG_BASE,\r\n      w = x.d[0];\r\n\r\n    // Add the number of digits of the first word of the digits array.\r\n    for (; w >= 10; w /= 10) e++;\r\n    return e;\r\n  }\r\n\r\n\r\n  function getLn10(Ctor, sd, pr) {\r\n\r\n    if (sd > Ctor.LN10.sd()) {\r\n\r\n\r\n      // Reset global state in case the exception is caught.\r\n      external = true;\r\n      if (pr) Ctor.precision = pr;\r\n      throw Error(decimalError + 'LN10 precision limit exceeded');\r\n    }\r\n\r\n    return round(new Ctor(Ctor.LN10), sd);\r\n  }\r\n\r\n\r\n  function getZeroString(k) {\r\n    var zs = '';\r\n    for (; k--;) zs += '0';\r\n    return zs;\r\n  }\r\n\r\n\r\n  /*\r\n   * Return a new Decimal whose value is the natural logarithm of `x` truncated to `sd` significant\r\n   * digits.\r\n   *\r\n   *  ln(n) is non-terminating (n != 1)\r\n   *\r\n   */\r\n  function ln(y, sd) {\r\n    var c, c0, denominator, e, numerator, sum, t, wpr, x2,\r\n      n = 1,\r\n      guard = 10,\r\n      x = y,\r\n      xd = x.d,\r\n      Ctor = x.constructor,\r\n      pr = Ctor.precision;\r\n\r\n    // ln(-x) = NaN\r\n    // ln(0) = -Infinity\r\n    if (x.s < 1) throw Error(decimalError + (x.s ? 'NaN' : '-Infinity'));\r\n\r\n    // ln(1) = 0\r\n    if (x.eq(ONE)) return new Ctor(0);\r\n\r\n    if (sd == null) {\r\n      external = false;\r\n      wpr = pr;\r\n    } else {\r\n      wpr = sd;\r\n    }\r\n\r\n    if (x.eq(10)) {\r\n      if (sd == null) external = true;\r\n      return getLn10(Ctor, wpr);\r\n    }\r\n\r\n    wpr += guard;\r\n    Ctor.precision = wpr;\r\n    c = digitsToString(xd);\r\n    c0 = c.charAt(0);\r\n    e = getBase10Exponent(x);\r\n\r\n    if (Math.abs(e) < 1.5e15) {\r\n\r\n      // Argument reduction.\r\n      // The series converges faster the closer the argument is to 1, so using\r\n      // ln(a^b) = b * ln(a),   ln(a) = ln(a^b) / b\r\n      // multiply the argument by itself until the leading digits of the significand are 7, 8, 9,\r\n      // 10, 11, 12 or 13, recording the number of multiplications so the sum of the series can\r\n      // later be divided by this number, then separate out the power of 10 using\r\n      // ln(a*10^b) = ln(a) + b*ln(10).\r\n\r\n      // max n is 21 (gives 0.9, 1.0 or 1.1) (9e15 / 21 = 4.2e14).\r\n      //while (c0 < 9 && c0 != 1 || c0 == 1 && c.charAt(1) > 1) {\r\n      // max n is 6 (gives 0.7 - 1.3)\r\n      while (c0 < 7 && c0 != 1 || c0 == 1 && c.charAt(1) > 3) {\r\n        x = x.times(y);\r\n        c = digitsToString(x.d);\r\n        c0 = c.charAt(0);\r\n        n++;\r\n      }\r\n\r\n      e = getBase10Exponent(x);\r\n\r\n      if (c0 > 1) {\r\n        x = new Ctor('0.' + c);\r\n        e++;\r\n      } else {\r\n        x = new Ctor(c0 + '.' + c.slice(1));\r\n      }\r\n    } else {\r\n\r\n      // The argument reduction method above may result in overflow if the argument y is a massive\r\n      // number with exponent >= 1500000000000000 (9e15 / 6 = 1.5e15), so instead recall this\r\n      // function using ln(x*10^e) = ln(x) + e*ln(10).\r\n      t = getLn10(Ctor, wpr + 2, pr).times(e + '');\r\n      x = ln(new Ctor(c0 + '.' + c.slice(1)), wpr - guard).plus(t);\r\n\r\n      Ctor.precision = pr;\r\n      return sd == null ? (external = true, round(x, pr)) : x;\r\n    }\r\n\r\n    // x is reduced to a value near 1.\r\n\r\n    // Taylor series.\r\n    // ln(y) = ln((1 + x)/(1 - x)) = 2(x + x^3/3 + x^5/5 + x^7/7 + ...)\r\n    // where x = (y - 1)/(y + 1)    (|x| < 1)\r\n    sum = numerator = x = divide(x.minus(ONE), x.plus(ONE), wpr);\r\n    x2 = round(x.times(x), wpr);\r\n    denominator = 3;\r\n\r\n    for (;;) {\r\n      numerator = round(numerator.times(x2), wpr);\r\n      t = sum.plus(divide(numerator, new Ctor(denominator), wpr));\r\n\r\n      if (digitsToString(t.d).slice(0, wpr) === digitsToString(sum.d).slice(0, wpr)) {\r\n        sum = sum.times(2);\r\n\r\n        // Reverse the argument reduction.\r\n        if (e !== 0) sum = sum.plus(getLn10(Ctor, wpr + 2, pr).times(e + ''));\r\n        sum = divide(sum, new Ctor(n), wpr);\r\n\r\n        Ctor.precision = pr;\r\n        return sd == null ? (external = true, round(sum, pr)) : sum;\r\n      }\r\n\r\n      sum = t;\r\n      denominator += 2;\r\n    }\r\n  }\r\n\r\n\r\n  /*\r\n   * Parse the value of a new Decimal `x` from string `str`.\r\n   */\r\n  function parseDecimal(x, str) {\r\n    var e, i, len;\r\n\r\n    // Decimal point?\r\n    if ((e = str.indexOf('.')) > -1) str = str.replace('.', '');\r\n\r\n    // Exponential form?\r\n    if ((i = str.search(/e/i)) > 0) {\r\n\r\n      // Determine exponent.\r\n      if (e < 0) e = i;\r\n      e += +str.slice(i + 1);\r\n      str = str.substring(0, i);\r\n    } else if (e < 0) {\r\n\r\n      // Integer.\r\n      e = str.length;\r\n    }\r\n\r\n    // Determine leading zeros.\r\n    for (i = 0; str.charCodeAt(i) === 48;) ++i;\r\n\r\n    // Determine trailing zeros.\r\n    for (len = str.length; str.charCodeAt(len - 1) === 48;) --len;\r\n    str = str.slice(i, len);\r\n\r\n    if (str) {\r\n      len -= i;\r\n      e = e - i - 1;\r\n      x.e = mathfloor(e / LOG_BASE);\r\n      x.d = [];\r\n\r\n      // Transform base\r\n\r\n      // e is the base 10 exponent.\r\n      // i is where to slice str to get the first word of the digits array.\r\n      i = (e + 1) % LOG_BASE;\r\n      if (e < 0) i += LOG_BASE;\r\n\r\n      if (i < len) {\r\n        if (i) x.d.push(+str.slice(0, i));\r\n        for (len -= LOG_BASE; i < len;) x.d.push(+str.slice(i, i += LOG_BASE));\r\n        str = str.slice(i);\r\n        i = LOG_BASE - str.length;\r\n      } else {\r\n        i -= len;\r\n      }\r\n\r\n      for (; i--;) str += '0';\r\n      x.d.push(+str);\r\n\r\n      if (external && (x.e > MAX_E || x.e < -MAX_E)) throw Error(exponentOutOfRange + e);\r\n    } else {\r\n\r\n      // Zero.\r\n      x.s = 0;\r\n      x.e = 0;\r\n      x.d = [0];\r\n    }\r\n\r\n    return x;\r\n  }\r\n\r\n\r\n  /*\r\n   * Round `x` to `sd` significant digits, using rounding mode `rm` if present (truncate otherwise).\r\n   */\r\n   function round(x, sd, rm) {\r\n    var i, j, k, n, rd, doRound, w, xdi,\r\n      xd = x.d;\r\n\r\n    // rd: the rounding digit, i.e. the digit after the digit that may be rounded up.\r\n    // w: the word of xd which contains the rounding digit, a base 1e7 number.\r\n    // xdi: the index of w within xd.\r\n    // n: the number of digits of w.\r\n    // i: what would be the index of rd within w if all the numbers were 7 digits long (i.e. if\r\n    // they had leading zeros)\r\n    // j: if > 0, the actual index of rd within w (if < 0, rd is a leading zero).\r\n\r\n    // Get the length of the first word of the digits array xd.\r\n    for (n = 1, k = xd[0]; k >= 10; k /= 10) n++;\r\n    i = sd - n;\r\n\r\n    // Is the rounding digit in the first word of xd?\r\n    if (i < 0) {\r\n      i += LOG_BASE;\r\n      j = sd;\r\n      w = xd[xdi = 0];\r\n    } else {\r\n      xdi = Math.ceil((i + 1) / LOG_BASE);\r\n      k = xd.length;\r\n      if (xdi >= k) return x;\r\n      w = k = xd[xdi];\r\n\r\n      // Get the number of digits of w.\r\n      for (n = 1; k >= 10; k /= 10) n++;\r\n\r\n      // Get the index of rd within w.\r\n      i %= LOG_BASE;\r\n\r\n      // Get the index of rd within w, adjusted for leading zeros.\r\n      // The number of leading zeros of w is given by LOG_BASE - n.\r\n      j = i - LOG_BASE + n;\r\n    }\r\n\r\n    if (rm !== void 0) {\r\n      k = mathpow(10, n - j - 1);\r\n\r\n      // Get the rounding digit at index j of w.\r\n      rd = w / k % 10 | 0;\r\n\r\n      // Are there any non-zero digits after the rounding digit?\r\n      doRound = sd < 0 || xd[xdi + 1] !== void 0 || w % k;\r\n\r\n      // The expression `w % mathpow(10, n - j - 1)` returns all the digits of w to the right of the\r\n      // digit at (left-to-right) index j, e.g. if w is 908714 and j is 2, the expression will give\r\n      // 714.\r\n\r\n      doRound = rm < 4\r\n        ? (rd || doRound) && (rm == 0 || rm == (x.s < 0 ? 3 : 2))\r\n        : rd > 5 || rd == 5 && (rm == 4 || doRound || rm == 6 &&\r\n\r\n          // Check whether the digit to the left of the rounding digit is odd.\r\n          ((i > 0 ? j > 0 ? w / mathpow(10, n - j) : 0 : xd[xdi - 1]) % 10) & 1 ||\r\n            rm == (x.s < 0 ? 8 : 7));\r\n    }\r\n\r\n    if (sd < 1 || !xd[0]) {\r\n      if (doRound) {\r\n        k = getBase10Exponent(x);\r\n        xd.length = 1;\r\n\r\n        // Convert sd to decimal places.\r\n        sd = sd - k - 1;\r\n\r\n        // 1, 0.1, 0.01, 0.001, 0.0001 etc.\r\n        xd[0] = mathpow(10, (LOG_BASE - sd % LOG_BASE) % LOG_BASE);\r\n        x.e = mathfloor(-sd / LOG_BASE) || 0;\r\n      } else {\r\n        xd.length = 1;\r\n\r\n        // Zero.\r\n        xd[0] = x.e = x.s = 0;\r\n      }\r\n\r\n      return x;\r\n    }\r\n\r\n    // Remove excess digits.\r\n    if (i == 0) {\r\n      xd.length = xdi;\r\n      k = 1;\r\n      xdi--;\r\n    } else {\r\n      xd.length = xdi + 1;\r\n      k = mathpow(10, LOG_BASE - i);\r\n\r\n      // E.g. 56700 becomes 56000 if 7 is the rounding digit.\r\n      // j > 0 means i > number of leading zeros of w.\r\n      xd[xdi] = j > 0 ? (w / mathpow(10, n - j) % mathpow(10, j) | 0) * k : 0;\r\n    }\r\n\r\n    if (doRound) {\r\n      for (;;) {\r\n\r\n        // Is the digit to be rounded up in the first word of xd?\r\n        if (xdi == 0) {\r\n          if ((xd[0] += k) == BASE) {\r\n            xd[0] = 1;\r\n            ++x.e;\r\n          }\r\n\r\n          break;\r\n        } else {\r\n          xd[xdi] += k;\r\n          if (xd[xdi] != BASE) break;\r\n          xd[xdi--] = 0;\r\n          k = 1;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Remove trailing zeros.\r\n    for (i = xd.length; xd[--i] === 0;) xd.pop();\r\n\r\n    if (external && (x.e > MAX_E || x.e < -MAX_E)) {\r\n      throw Error(exponentOutOfRange + getBase10Exponent(x));\r\n    }\r\n\r\n    return x;\r\n  }\r\n\r\n\r\n  function subtract(x, y) {\r\n    var d, e, i, j, k, len, xd, xe, xLTy, yd,\r\n      Ctor = x.constructor,\r\n      pr = Ctor.precision;\r\n\r\n    // Return y negated if x is zero.\r\n    // Return x if y is zero and x is non-zero.\r\n    if (!x.s || !y.s) {\r\n      if (y.s) y.s = -y.s;\r\n      else y = new Ctor(x);\r\n      return external ? round(y, pr) : y;\r\n    }\r\n\r\n    xd = x.d;\r\n    yd = y.d;\r\n\r\n    // x and y are non-zero numbers with the same sign.\r\n\r\n    e = y.e;\r\n    xe = x.e;\r\n    xd = xd.slice();\r\n    k = xe - e;\r\n\r\n    // If exponents differ...\r\n    if (k) {\r\n      xLTy = k < 0;\r\n\r\n      if (xLTy) {\r\n        d = xd;\r\n        k = -k;\r\n        len = yd.length;\r\n      } else {\r\n        d = yd;\r\n        e = xe;\r\n        len = xd.length;\r\n      }\r\n\r\n      // Numbers with massively different exponents would result in a very high number of zeros\r\n      // needing to be prepended, but this can be avoided while still ensuring correct rounding by\r\n      // limiting the number of zeros to `Math.ceil(pr / LOG_BASE) + 2`.\r\n      i = Math.max(Math.ceil(pr / LOG_BASE), len) + 2;\r\n\r\n      if (k > i) {\r\n        k = i;\r\n        d.length = 1;\r\n      }\r\n\r\n      // Prepend zeros to equalise exponents.\r\n      d.reverse();\r\n      for (i = k; i--;) d.push(0);\r\n      d.reverse();\r\n\r\n    // Base 1e7 exponents equal.\r\n    } else {\r\n\r\n      // Check digits to determine which is the bigger number.\r\n\r\n      i = xd.length;\r\n      len = yd.length;\r\n      xLTy = i < len;\r\n      if (xLTy) len = i;\r\n\r\n      for (i = 0; i < len; i++) {\r\n        if (xd[i] != yd[i]) {\r\n          xLTy = xd[i] < yd[i];\r\n          break;\r\n        }\r\n      }\r\n\r\n      k = 0;\r\n    }\r\n\r\n    if (xLTy) {\r\n      d = xd;\r\n      xd = yd;\r\n      yd = d;\r\n      y.s = -y.s;\r\n    }\r\n\r\n    len = xd.length;\r\n\r\n    // Append zeros to xd if shorter.\r\n    // Don't add zeros to yd if shorter as subtraction only needs to start at yd length.\r\n    for (i = yd.length - len; i > 0; --i) xd[len++] = 0;\r\n\r\n    // Subtract yd from xd.\r\n    for (i = yd.length; i > k;) {\r\n      if (xd[--i] < yd[i]) {\r\n        for (j = i; j && xd[--j] === 0;) xd[j] = BASE - 1;\r\n        --xd[j];\r\n        xd[i] += BASE;\r\n      }\r\n\r\n      xd[i] -= yd[i];\r\n    }\r\n\r\n    // Remove trailing zeros.\r\n    for (; xd[--len] === 0;) xd.pop();\r\n\r\n    // Remove leading zeros and adjust exponent accordingly.\r\n    for (; xd[0] === 0; xd.shift()) --e;\r\n\r\n    // Zero?\r\n    if (!xd[0]) return new Ctor(0);\r\n\r\n    y.d = xd;\r\n    y.e = e;\r\n\r\n    //return external && xd.length >= pr / LOG_BASE ? round(y, pr) : y;\r\n    return external ? round(y, pr) : y;\r\n  }\r\n\r\n\r\n  function toString(x, isExp, sd) {\r\n    var k,\r\n      e = getBase10Exponent(x),\r\n      str = digitsToString(x.d),\r\n      len = str.length;\r\n\r\n    if (isExp) {\r\n      if (sd && (k = sd - len) > 0) {\r\n        str = str.charAt(0) + '.' + str.slice(1) + getZeroString(k);\r\n      } else if (len > 1) {\r\n        str = str.charAt(0) + '.' + str.slice(1);\r\n      }\r\n\r\n      str = str + (e < 0 ? 'e' : 'e+') + e;\r\n    } else if (e < 0) {\r\n      str = '0.' + getZeroString(-e - 1) + str;\r\n      if (sd && (k = sd - len) > 0) str += getZeroString(k);\r\n    } else if (e >= len) {\r\n      str += getZeroString(e + 1 - len);\r\n      if (sd && (k = sd - e - 1) > 0) str = str + '.' + getZeroString(k);\r\n    } else {\r\n      if ((k = e + 1) < len) str = str.slice(0, k) + '.' + str.slice(k);\r\n      if (sd && (k = sd - len) > 0) {\r\n        if (e + 1 === len) str += '.';\r\n        str += getZeroString(k);\r\n      }\r\n    }\r\n\r\n    return x.s < 0 ? '-' + str : str;\r\n  }\r\n\r\n\r\n  // Does not strip trailing zeros.\r\n  function truncate(arr, len) {\r\n    if (arr.length > len) {\r\n      arr.length = len;\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  // Decimal methods\r\n\r\n\r\n  /*\r\n   *  clone\r\n   *  config/set\r\n   */\r\n\r\n\r\n  /*\r\n   * Create and return a Decimal constructor with the same configuration properties as this Decimal\r\n   * constructor.\r\n   *\r\n   */\r\n  function clone(obj) {\r\n    var i, p, ps;\r\n\r\n    /*\r\n     * The Decimal constructor and exported function.\r\n     * Return a new Decimal instance.\r\n     *\r\n     * value {number|string|Decimal} A numeric value.\r\n     *\r\n     */\r\n    function Decimal(value) {\r\n      var x = this;\r\n\r\n      // Decimal called without new.\r\n      if (!(x instanceof Decimal)) return new Decimal(value);\r\n\r\n      // Retain a reference to this Decimal constructor, and shadow Decimal.prototype.constructor\r\n      // which points to Object.\r\n      x.constructor = Decimal;\r\n\r\n      // Duplicate.\r\n      if (value instanceof Decimal) {\r\n        x.s = value.s;\r\n        x.e = value.e;\r\n        x.d = (value = value.d) ? value.slice() : value;\r\n        return;\r\n      }\r\n\r\n      if (typeof value === 'number') {\r\n\r\n        // Reject Infinity/NaN.\r\n        if (value * 0 !== 0) {\r\n          throw Error(invalidArgument + value);\r\n        }\r\n\r\n        if (value > 0) {\r\n          x.s = 1;\r\n        } else if (value < 0) {\r\n          value = -value;\r\n          x.s = -1;\r\n        } else {\r\n          x.s = 0;\r\n          x.e = 0;\r\n          x.d = [0];\r\n          return;\r\n        }\r\n\r\n        // Fast path for small integers.\r\n        if (value === ~~value && value < 1e7) {\r\n          x.e = 0;\r\n          x.d = [value];\r\n          return;\r\n        }\r\n\r\n        return parseDecimal(x, value.toString());\r\n      } else if (typeof value !== 'string') {\r\n        throw Error(invalidArgument + value);\r\n      }\r\n\r\n      // Minus sign?\r\n      if (value.charCodeAt(0) === 45) {\r\n        value = value.slice(1);\r\n        x.s = -1;\r\n      } else {\r\n        x.s = 1;\r\n      }\r\n\r\n      if (isDecimal.test(value)) parseDecimal(x, value);\r\n      else throw Error(invalidArgument + value);\r\n    }\r\n\r\n    Decimal.prototype = P;\r\n\r\n    Decimal.ROUND_UP = 0;\r\n    Decimal.ROUND_DOWN = 1;\r\n    Decimal.ROUND_CEIL = 2;\r\n    Decimal.ROUND_FLOOR = 3;\r\n    Decimal.ROUND_HALF_UP = 4;\r\n    Decimal.ROUND_HALF_DOWN = 5;\r\n    Decimal.ROUND_HALF_EVEN = 6;\r\n    Decimal.ROUND_HALF_CEIL = 7;\r\n    Decimal.ROUND_HALF_FLOOR = 8;\r\n\r\n    Decimal.clone = clone;\r\n    Decimal.config = Decimal.set = config;\r\n\r\n    if (obj === void 0) obj = {};\r\n    if (obj) {\r\n      ps = ['precision', 'rounding', 'toExpNeg', 'toExpPos', 'LN10'];\r\n      for (i = 0; i < ps.length;) if (!obj.hasOwnProperty(p = ps[i++])) obj[p] = this[p];\r\n    }\r\n\r\n    Decimal.config(obj);\r\n\r\n    return Decimal;\r\n  }\r\n\r\n\r\n  /*\r\n   * Configure global settings for a Decimal constructor.\r\n   *\r\n   * `obj` is an object with one or more of the following properties,\r\n   *\r\n   *   precision  {number}\r\n   *   rounding   {number}\r\n   *   toExpNeg   {number}\r\n   *   toExpPos   {number}\r\n   *\r\n   * E.g. Decimal.config({ precision: 20, rounding: 4 })\r\n   *\r\n   */\r\n  function config(obj) {\r\n    if (!obj || typeof obj !== 'object') {\r\n      throw Error(decimalError + 'Object expected');\r\n    }\r\n    var i, p, v,\r\n      ps = [\r\n        'precision', 1, MAX_DIGITS,\r\n        'rounding', 0, 8,\r\n        'toExpNeg', -1 / 0, 0,\r\n        'toExpPos', 0, 1 / 0\r\n      ];\r\n\r\n    for (i = 0; i < ps.length; i += 3) {\r\n      if ((v = obj[p = ps[i]]) !== void 0) {\r\n        if (mathfloor(v) === v && v >= ps[i + 1] && v <= ps[i + 2]) this[p] = v;\r\n        else throw Error(invalidArgument + p + ': ' + v);\r\n      }\r\n    }\r\n\r\n    if ((v = obj[p = 'LN10']) !== void 0) {\r\n        if (v == Math.LN10) this[p] = new this(v);\r\n        else throw Error(invalidArgument + p + ': ' + v);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n\r\n  // Create and configure initial Decimal constructor.\r\n  Decimal = clone(Decimal);\r\n\r\n  Decimal['default'] = Decimal.Decimal = Decimal;\r\n\r\n  // Internal constant.\r\n  ONE = new Decimal(1);\r\n\r\n\r\n  // Export.\r\n\r\n\r\n  // AMD.\r\n  if (typeof define == 'function' && define.amd) {\r\n    define(function () {\r\n      return Decimal;\r\n    });\r\n\r\n  // Node and other environments that support module.exports.\r\n  } else if (typeof module != 'undefined' && module.exports) {\r\n    module.exports = Decimal;\r\n\r\n    // Browser.\r\n  } else {\r\n    if (!globalScope) {\r\n      globalScope = typeof self != 'undefined' && self && self.self == self\r\n        ? self : Function('return this')();\r\n    }\r\n\r\n    globalScope.Decimal = Decimal;\r\n  }\r\n})(this);\r\n","/*!\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport * as util from \"./flagrate/util\";\nimport * as element from \"./flagrate/element\";\nimport * as button from \"./flagrate/button\";\nimport * as buttons from \"./flagrate/buttons\";\nimport * as menu from \"./flagrate/menu\";\nimport * as pulldown from \"./flagrate/pulldown\";\nimport * as textInput from \"./flagrate/text-input\";\nimport * as tokenizer from \"./flagrate/tokenizer\";\nimport * as textArea from \"./flagrate/text-area\";\nimport * as comboBox from \"./flagrate/combo-box\";\nimport * as select from \"./flagrate/select\";\nimport * as contextMenu from \"./flagrate/context-menu\";\nimport * as toolbar from \"./flagrate/toolbar\";\nimport * as searchBox from \"./flagrate/search-box\";\nimport * as checkbox from \"./flagrate/checkbox\";\nimport * as checkboxes from \"./flagrate/checkboxes\";\nimport * as radio from \"./flagrate/radio\";\nimport * as radios from \"./flagrate/radios\";\nimport * as sw from \"./flagrate/switch\";\nimport * as progress from \"./flagrate/progress\";\nimport * as slider from \"./flagrate/slider\";\nimport * as tab from \"./flagrate/tab\";\nimport * as popover from \"./flagrate/popover\";\nimport * as tutorial from \"./flagrate/tutorial\";\nimport * as notify from \"./flagrate/notify\";\nimport * as modal from \"./flagrate/modal\";\nimport * as grid from \"./flagrate/grid\";\nimport * as form from \"./flagrate/form\";\nexport var Flagrate;\n(function (Flagrate) {\n    Flagrate.identity = util.identity;\n    Flagrate.extendObject = util.extendObject;\n    Flagrate.emptyFunction = util.emptyFunction;\n    Flagrate.jsonPointer = util.jsonPointer;\n    Flagrate.Element = element.Element;\n    Flagrate.createElement = element.createElement;\n    Flagrate.Button = button.Button;\n    Flagrate.createButton = button.createButton;\n    Flagrate.Buttons = buttons.Buttons;\n    Flagrate.createButtons = buttons.createButtons;\n    Flagrate.Menu = menu.Menu;\n    Flagrate.createMenu = menu.createMenu;\n    Flagrate.Pulldown = pulldown.Pulldown;\n    Flagrate.createPulldown = pulldown.createPulldown;\n    Flagrate.TextInput = textInput.TextInput;\n    Flagrate.createTextInput = textInput.createTextInput;\n    Flagrate.Tokenizer = tokenizer.Tokenizer;\n    Flagrate.createTokenizer = tokenizer.createTokenizer;\n    Flagrate.TextArea = textArea.TextArea;\n    Flagrate.createTextArea = textArea.createTextArea;\n    Flagrate.ComboBox = comboBox.ComboBox;\n    Flagrate.createComboBox = comboBox.createComboBox;\n    Flagrate.Select = select.Select;\n    Flagrate.createSelect = select.createSelect;\n    Flagrate.ContextMenu = contextMenu.ContextMenu;\n    Flagrate.createContextMenu = contextMenu.createContextMenu;\n    Flagrate.Toolbar = toolbar.Toolbar;\n    Flagrate.createToolbar = toolbar.createToolbar;\n    Flagrate.SearchBox = searchBox.SearchBox;\n    Flagrate.createSearchBox = searchBox.createSearchBox;\n    Flagrate.Checkbox = checkbox.Checkbox;\n    Flagrate.createCheckbox = checkbox.createCheckbox;\n    Flagrate.Checkboxes = checkboxes.Checkboxes;\n    Flagrate.createCheckboxes = checkboxes.createCheckboxes;\n    Flagrate.Radio = radio.Radio;\n    Flagrate.createRadio = radio.createRadio;\n    Flagrate.Radios = radios.Radios;\n    Flagrate.createRadios = radios.createRadios;\n    Flagrate.Switch = sw.Switch;\n    Flagrate.createSwitch = sw.createSwitch;\n    Flagrate.Progress = progress.Progress;\n    Flagrate.createProgress = progress.createProgress;\n    Flagrate.Slider = slider.Slider;\n    Flagrate.createSlider = slider.createSlider;\n    Flagrate.Tab = tab.Tab;\n    Flagrate.createTab = tab.createTab;\n    Flagrate.Popover = popover.Popover;\n    Flagrate.createPopover = popover.createPopover;\n    Flagrate.Tutorial = tutorial.Tutorial;\n    Flagrate.createTutorial = tutorial.createTutorial;\n    Flagrate.Notify = notify.Notify;\n    Flagrate.createNotify = notify.createNotify;\n    Flagrate.Modal = modal.Modal;\n    Flagrate.createModal = modal.createModal;\n    Flagrate.Grid = grid.Grid;\n    Flagrate.createGrid = grid.createGrid;\n    Flagrate.Form = form.Form;\n    Flagrate.createForm = form.createForm;\n})(Flagrate || (Flagrate = {}));\nif (window.flagrate === undefined) {\n    window.flagrate = Flagrate;\n}\nexport default Flagrate;\n\n//# sourceMappingURL=flagrate.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { extendObject, emptyFunction } from \"./util\";\nimport { Element } from \"./element\";\n/*?\n    flagrate.createButton(option)\n    new flagrate.Button(option)\n    - option (Object) - options.\n\r\n    Button.\n\r\n    #### option\n\r\n    * `id`                       (String): `id` attribute of `button` element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `color`                    (String): (using flagrate.Button#setColor)\n    * `label`                    (String; default `\"\"`):\n    * `icon`                     (String):\n    * `isFocused`                (Boolean; default `false`):\n    * `isDisabled`               (Boolean; default `false`):\n    * `isRemovableByUser`        (Boolean; default `false`):\n    * `onSelect`                 (Function):\n    * `onRemove`                 (Function):\n**/\nfunction FButton(option = {}) {\n    option.isRemovableByUser = option.isRemovableByUser || false;\n    this.onSelect = option.onSelect || emptyFunction;\n    this.onRemove = option.onRemove || emptyFunction;\n    const attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    if (option.isFocused) {\n        attr[\"autofocus\"] = true;\n    }\n    if (!attr[\"type\"]) {\n        attr[\"type\"] = \"button\";\n    }\n    // create a button element\n    const button = new Element(\"button\", attr);\n    extendObject(button, this);\n    button.labelElement = new Element(\"span\").insertTo(button);\n    if (option.label) {\n        button.labelElement.insertText(option.label);\n    }\n    else if (option.labelHTML) {\n        button.labelElement.insert(option.labelHTML);\n    }\n    button.addClassName(\"flagrate flagrate-button\");\n    if (option.className) {\n        button.addClassName(option.className);\n    }\n    button.addEventListener(\"click\", button._onSelectHandler.bind(button), true);\n    if (option.isRemovableByUser) {\n        button.addClassName(\"flagrate-button-removable\");\n        button._removeButton = new Element(\"button\", {\n            type: \"button\",\n            class: \"flagrate-button-remove\"\n        }).insertTo(button);\n        button._removeButton.addEventListener(\"click\", button._onRemoveHandler.bind(button), true);\n    }\n    if (option.style) {\n        button.setStyle(option.style);\n    }\n    if (option.color) {\n        button.setColor(option.color);\n    }\n    if (option.icon) {\n        button.setIcon(option.icon);\n    }\n    if (option.isDisabled) {\n        button.disable();\n    }\n    return button;\n}\nexport const Button = FButton;\nexport function createButton(option) {\n    return new Button(option);\n}\nButton.prototype = {\n    select() {\n        return this._onSelectHandler(null);\n    },\n    disable() {\n        this.addClassName(\"flagrate-disabled\");\n        this.writeAttribute(\"disabled\", true);\n        return this;\n    },\n    enable() {\n        this.removeClassName(\"flagrate-disabled\");\n        this.writeAttribute(\"disabled\", false);\n        return this;\n    },\n    isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    setLabel(text) {\n        this.labelElement.updateText(text);\n        return this;\n    },\n    setLabelHTML(html) {\n        this.labelElement.update(html);\n        return this;\n    },\n    setColor(color) {\n        const button = this;\n        if (color.charAt(0) === \"@\") {\n            button.style.backgroundColor = \"\";\n            button.style.color = \"\";\n            button.addClassName(\"flagrate-button-color-\" + color.slice(1));\n        }\n        else {\n            button.style.backgroundColor = color;\n            if (/^#[0-9a-f]{6}$/i.test(color) === true) {\n                const c = parseInt(color.slice(1), 16);\n                if ((((c >> 16) + (c >> 8 & 0xff) + (c & 0xff)) / 3) > 150) {\n                    button.style.color = \"black\";\n                }\n                else {\n                    button.style.color = \"white\";\n                }\n            }\n            else {\n                button.style.color = \"\";\n            }\n        }\n        button._color = color;\n        return button;\n    },\n    getColor() {\n        return this._color || \"\";\n    },\n    setIcon(identifier) {\n        const button = this;\n        button._iconIdentifier = identifier;\n        if (identifier) {\n            return button.addClassName(\"flagrate-icon\").setStyle({\n                backgroundImage: `url(${identifier})`\n            });\n        }\n        else {\n            return button.removeClassName(\"flagrate-icon\").setStyle({\n                backgroundImage: \"none\"\n            });\n        }\n    },\n    getIcon() {\n        return this._iconIdentifier || \"\";\n    },\n    _onSelectHandler(e) {\n        const button = this;\n        if (button.isEnabled() === false) {\n            return;\n        }\n        // for Firefox <- until when..?\n        if (button._removeButton && e && e.layerX) {\n            const bw = button.getWidth();\n            const bh = button.getHeight();\n            const bp = button._removeButton.getStyle(\"margin-right\") === null ? 0 : parseInt(button._removeButton.getStyle(\"margin-right\").replace(\"px\", \"\"), 10);\n            const rw = button._removeButton.getWidth();\n            const rh = button._removeButton.getHeight();\n            const lx = e.layerX;\n            const ly = e.layerY;\n            const isHitRemoveButton = (lx > bw - bp - rw &&\n                lx < bw - bp &&\n                ly > bh - ((bh - rh) / 2) - rh &&\n                ly < bh - ((bh - rh) / 2));\n            if (isHitRemoveButton) {\n                button._onRemoveHandler(e);\n                return button;\n            }\n        }\n        const _e = e;\n        _e.targetButton = button;\n        button.onSelect(_e, button);\n        button.fire(\"select\", { targetButton: button });\n    },\n    _onRemoveHandler(e) {\n        const button = this;\n        if (button.isEnabled() === true) {\n            button.remove();\n            const _e = e;\n            _e.targetButton = button;\n            button.onRemove(_e, button);\n            button.fire(\"remove\", { targetButton: button });\n        }\n    }\n};\n\n//# sourceMappingURL=button.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { extendObject, emptyFunction } from \"./util\";\nimport { Element } from \"./element\";\nimport * as button from \"./button\";\n/*?\n    flagrate.createButtons(option)\n    new flagrate.Buttons(option)\n    - option (Object) - options.\n\r\n    Button group.\n\r\n    #### option\n\r\n    * `id`                       (String): `id` attribute of container element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `items`                    (Array): of item\n    * `onSelect`                 (Function):\n\r\n    #### item\n\r\n    * `key`                      (String):\n    * `label`                    (String; default `\"\"`):\n    * `icon`                     (String):\n    * `color`                    (String):\n    * `isDisabled`               (Boolean; default `false`):\n    * `onSelect`                 (Function):\n**/\nfunction FButtons(option = {}) {\n    option.items = option.items || [];\n    this.onSelect = option.onSelect || emptyFunction;\n    const attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    // create a container\n    const container = new Element(\"div\", attr);\n    extendObject(container, this);\n    container.addClassName(\"flagrate flagrate-buttons\");\n    if (option.className) {\n        container.addClassName(option.className);\n    }\n    if (option.style) {\n        container.setStyle(option.style);\n    }\n    for (let i = 0, l = option.items.length; i < l; i++) {\n        container.push(option.items[i]);\n    }\n    container.addEventListener(\"click\", (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n    });\n    return container;\n}\nexport const Buttons = FButtons;\nexport function createButtons(option) {\n    return new Buttons(option);\n}\nButtons.prototype = {\n    push(option) {\n        const _onSelect = option.onSelect;\n        option.onSelect = (e, button) => {\n            if (_onSelect) {\n                _onSelect.call(button, e, button);\n            }\n            this.onSelect(e, this);\n        };\n        const btn = new button.Button(option).insertTo(this);\n        if (option.key) {\n            btn.dataset[\"_key\"] = option.key;\n        }\n        return this;\n    },\n    getButtonByKey(key) {\n        const elements = this.childNodes;\n        for (let i = 0, l = elements.length; i < l; i++) {\n            if (elements[i].dataset[\"_key\"] === key) {\n                return elements[i];\n            }\n        }\n        return null;\n    },\n    getButtons() {\n        return this.childNodes || [];\n    }\n};\n\n//# sourceMappingURL=buttons.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { extendObject } from \"./util\";\nimport { Element } from \"./element\";\nlet idCounter = 0;\n/*?\n    flagrate.createCheckbox(option)\n    new flagrate.Checkbox(option)\n    - option (Object) - options.\n**/\nfunction FCheckbox(opt = {}) {\n    const id = \"flagrate-checkbox-\" + (++idCounter).toString(10);\n    const attr = opt.attribute || {};\n    attr[\"id\"] = opt.id || null;\n    attr[\"class\"] = opt.className || null;\n    //create\n    const checkbox = new Element(\"label\", attr);\n    checkbox.writeAttribute(\"for\", id);\n    extendObject(checkbox, this);\n    if (opt.label) {\n        checkbox.insertText(opt.label);\n    }\n    else if (opt.labelHTML) {\n        checkbox.insert(opt.labelHTML);\n    }\n    checkbox.addClassName(\"flagrate flagrate-checkbox\");\n    if (opt.icon) {\n        checkbox.addClassName(\"flagrate-icon\");\n        checkbox.setStyle({\n            backgroundImage: `url(${opt.icon})`\n        });\n    }\n    checkbox.onChange = opt.onChange || null;\n    checkbox.onCheck = opt.onCheck || null;\n    checkbox.onUncheck = opt.onUncheck || null;\n    checkbox._input = new Element(\"input\", { id: id, type: \"checkbox\" });\n    checkbox.insert({ top: new Element() });\n    checkbox.insert({ top: checkbox._input });\n    checkbox._input.addEventListener(\"change\", e => {\n        e.stopPropagation();\n        const _e = e;\n        _e.targetCheckbox = checkbox;\n        if (checkbox.isChecked() === true) {\n            if (checkbox.onCheck) {\n                checkbox.onCheck(_e, checkbox);\n            }\n            checkbox.fire(\"check\", { targetCheckbox: checkbox });\n        }\n        else {\n            if (checkbox.onUncheck) {\n                checkbox.onUncheck(_e, checkbox);\n            }\n            checkbox.fire(\"uncheck\", { targetCheckbox: checkbox });\n        }\n        if (checkbox.onChange) {\n            checkbox.onChange(_e, checkbox);\n        }\n        checkbox.fire(\"change\", { targetCheckbox: checkbox });\n    });\n    if (opt.isChecked === true) {\n        checkbox.check();\n    }\n    if (opt.isFocused === true) {\n        checkbox.focus();\n    }\n    if (opt.isDisabled === true) {\n        checkbox.disable();\n    }\n    return checkbox;\n}\nexport const Checkbox = FCheckbox;\nexport function createCheckbox(option) {\n    return new Checkbox(option);\n}\nCheckbox.prototype = {\n    disable() {\n        this.addClassName(\"flagrate-disabled\");\n        this._input.writeAttribute(\"disabled\", true);\n        return this;\n    },\n    enable() {\n        this.removeClassName(\"flagrate-disabled\");\n        this._input.writeAttribute(\"disabled\", false);\n        return this;\n    },\n    isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    isChecked() {\n        return !!this._input.checked;\n    },\n    check() {\n        this._input.checked = true;\n        return this;\n    },\n    uncheck() {\n        this._input.checked = false;\n        return this;\n    }\n};\n\n//# sourceMappingURL=checkbox.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { extendObject } from \"./util\";\nimport { Element } from \"./element\";\nimport { Checkbox } from \"./checkbox\";\n/*?\n    flagrate.createCheckboxes(option)\n    new flagrate.Checkboxes(option)\n    - option (Object) - options.\n**/\nfunction FCheckboxes(opt = {}) {\n    const attr = opt.attribute || {};\n    if (opt.id) {\n        attr[\"id\"] = opt.id;\n    }\n    //create\n    const checkboxes = new Element(\"div\", attr);\n    extendObject(checkboxes, this);\n    checkboxes.addClassName(\"flagrate flagrate-checkboxes\");\n    if (opt.className) {\n        checkboxes.addClassName(opt.className);\n    }\n    if (opt.style) {\n        checkboxes.setStyle(opt.style);\n    }\n    checkboxes.onChange = opt.onChange;\n    checkboxes._items = [];\n    (opt.items || []).forEach(item => {\n        const _item = {};\n        if (typeof item === \"object\") {\n            extendObject(_item, item);\n        }\n        else {\n            _item.label = typeof item === \"string\" ? item : item.toString();\n            _item.value = item;\n        }\n        _item._checkbox = new Checkbox(_item).insertTo(checkboxes);\n        _item._checkbox.addEventListener(\"change\", e => {\n            if (checkboxes.onChange) {\n                checkboxes.onChange(e, checkboxes);\n            }\n        });\n        checkboxes._items.push(_item);\n    });\n    if (opt.isDisabled) {\n        checkboxes.disable();\n    }\n    if (opt.values) {\n        checkboxes.setValues(opt.values);\n    }\n    return checkboxes;\n}\nexport const Checkboxes = FCheckboxes;\nexport function createCheckboxes(option) {\n    return new Checkboxes(option);\n}\nCheckboxes.prototype = {\n    select(index) {\n        if (this._items[index]) {\n            this._items[index]._checkbox.check();\n        }\n        return this;\n    },\n    deselect(index) {\n        if (this._items[index]) {\n            this._items[index]._checkbox.uncheck();\n        }\n        return this;\n    },\n    getValues() {\n        const values = [];\n        for (let i = 0, l = this._items.length; i < l; i++) {\n            if (this._items[i]._checkbox.isChecked() === true) {\n                values.push(this._items[i].value);\n            }\n        }\n        return values;\n    },\n    addValue(value) {\n        for (let i = 0, l = this._items.length; i < l; i++) {\n            if (this._items[i].value === value) {\n                this.select(i);\n                break;\n            }\n        }\n        return this;\n    },\n    removeValue(value) {\n        for (let i = 0, l = this._items.length; i < l; i++) {\n            if (this._items[i].value === value) {\n                this.deselect(i);\n                break;\n            }\n        }\n        return this;\n    },\n    setValues(values) {\n        for (let i = 0, l = this._items.length; i < l; i++) {\n            if (values.indexOf(this._items[i].value) === -1) {\n                this.deselect(i);\n            }\n            else {\n                this.select(i);\n            }\n        }\n        return this;\n    },\n    selectAll() {\n        for (let i = 0, l = this._items.length; i < l; i++) {\n            this.select(i);\n        }\n        return this;\n    },\n    deselectAll() {\n        return this.setValues([]);\n    },\n    enable() {\n        for (let i = 0, l = this._items.length; i < l; i++) {\n            this._items[i]._checkbox.enable();\n        }\n        this.removeClassName(\"flagrate-disabled\");\n        return this;\n    },\n    disable() {\n        for (let i = 0, l = this._items.length; i < l; i++) {\n            this._items[i]._checkbox.disable();\n        }\n        this.addClassName(\"flagrate-disabled\");\n        return this;\n    },\n    isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    }\n};\n\n//# sourceMappingURL=checkboxes.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { extendObject } from \"./util\";\nimport { Element } from \"./element\";\nimport { Button } from \"./button\";\nimport { Menu } from \"./menu\";\nimport { TextInput } from \"./text-input\";\n/*?\n    flagrate.createComboBox(option)\n    new flagrate.ComboBox(option)\n    - option (Object) - options.\n\r\n    Select.\n\r\n    #### option\n\r\n    * `id`                       (String): `id` attribute of container element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `value`                    (String): default value.\n    * `items`                    (Array): of String values.\n    * `placeholder`              (String):\n    * `icon`                     (String):\n    * `regexp`                   (RegExp):\n    * `isDisabled`               (Boolean; default `false`):\n**/\nfunction FComboBox(option = {}) {\n    this.items = option.items || [];\n    this.regexp = option.regexp || null;\n    const attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    //create\n    const container = new Element(\"div\", attr);\n    container._textinput = new TextInput({\n        value: option.value,\n        placeholder: option.placeholder,\n        icon: option.icon\n    }).insertTo(container);\n    function createOnSelectHandler(value) {\n        return () => {\n            container.setValue(value);\n            container._textinput.focus();\n            container.fire(\"change\");\n        };\n    }\n    container._button = new Button({\n        onSelect: () => {\n            if (container._menu) {\n                container._menu.remove();\n                delete container._menu;\n                return;\n            }\n            const items = [];\n            for (let i = 0, l = container.items.length; i < l; i++) {\n                items.push({\n                    label: container.items[i],\n                    onSelect: createOnSelectHandler(container.items[i])\n                });\n            }\n            const menu = container._menu = new Menu({\n                className: \"flagrate-combobox-menu\",\n                items: items,\n                onSelect: () => {\n                    menu.remove();\n                    delete container._menu;\n                }\n            }).insertTo(container);\n            // To prevent overflow.\n            let menuHeight = menu.getHeight();\n            let menuMargin = parseInt(menu.getStyle(\"margin-top\").replace(\"px\", \"\"), 10);\n            let cummOffsetTop = container.cumulativeOffset().top;\n            let upsideSpace = -window.pageYOffset + cummOffsetTop;\n            let downsideSpace = window.pageYOffset + window.innerHeight - cummOffsetTop - container.getHeight();\n            if (menuHeight + menuMargin > downsideSpace) {\n                if (upsideSpace > downsideSpace) {\n                    if (upsideSpace < menuHeight + menuMargin) {\n                        menuHeight = (upsideSpace - menuMargin - menuMargin);\n                        menu.style.maxHeight = `${menuHeight}px`;\n                    }\n                    menu.addClassName(\"flagrate-combobox-menu-upper\");\n                }\n                else {\n                    menuHeight = (downsideSpace - menuMargin - menuMargin);\n                    menu.style.maxHeight = `${menuHeight}px`;\n                }\n            }\n            function removeMenu(e) {\n                document.body.removeEventListener(\"click\", removeMenu);\n                container.parentNode.removeEventListener(\"click\", removeMenu);\n                container.off(\"click\", removeMenu);\n                menu.style.opacity = \"0\";\n                setTimeout(() => menu.remove(), 500);\n                delete container._menu;\n            }\n            setTimeout(() => {\n                document.body.addEventListener(\"click\", removeMenu);\n                container.parentNode.addEventListener(\"click\", removeMenu);\n                container.on(\"click\", removeMenu);\n            }, 0);\n        }\n    }).insertTo(container);\n    extendObject(container, this);\n    container.addClassName(\"flagrate flagrate-combobox\");\n    if (option.className) {\n        container.addClassName(option.className);\n    }\n    if (option.style) {\n        container.setStyle(option.style);\n    }\n    if (option.isDisabled) {\n        container.disable();\n    }\n    return container;\n}\nexport const ComboBox = FComboBox;\nexport function createComboBox(option) {\n    return new ComboBox(option);\n}\nComboBox.prototype = {\n    disable() {\n        this.addClassName(\"flagrate-disabled\");\n        this._textinput.disable();\n        this._button.disable();\n        return this;\n    },\n    enable() {\n        this.removeClassName(\"flagrate-disabled\");\n        this._textinput.enable();\n        this._button.enable();\n        return this;\n    },\n    isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    getValue() {\n        return this._textinput.value;\n    },\n    setValue(value) {\n        this._textinput.value = value;\n        return this;\n    },\n    setIcon(identifier) {\n        this._textinput.setIcon(identifier);\n        return this;\n    },\n    getIcon() {\n        return this._textinput.getIcon();\n    },\n    isValid() {\n        return this.regexp.test(this.getValue());\n    }\n};\n\n//# sourceMappingURL=combo-box.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { Menu } from \"./menu\";\n/*?\n    flagrate.createContextMenu(option)\n    new flagrate.ContextMenu(option)\n    - option (Object) - options.\n\r\n    ContextMenu.\n\r\n    #### option\n\r\n    * `target`                   (Element):\n    * `items`                    (Array): of item (see: flagrate.Menu)\n**/\nexport class ContextMenu {\n    constructor(option = {}) {\n        this._openHandler = this.open.bind(this);\n        this._closeHandler = this.close.bind(this);\n        this.items = option.items || [];\n        this._isShowing = false;\n        this.setTarget(option.target || document.body);\n    }\n    setTarget(target) {\n        if (this._target) {\n            this._target.removeEventListener(\"contextmenu\", this._openHandler);\n        }\n        target.addEventListener(\"contextmenu\", this._openHandler);\n        this._target = target;\n        return this;\n    }\n    open(e) {\n        if (e && e.preventDefault) {\n            e.preventDefault();\n        }\n        if (this._isShowing === true) {\n            this.close();\n        }\n        this._isShowing = true;\n        this._menu = new Menu({\n            className: \"flagrate-context-menu\",\n            items: this.items,\n            onSelect: this._closeHandler\n        });\n        let x = 0;\n        let y = 0;\n        if (e && e.clientX && e.clientY) {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        this._menu.style.opacity = \"0\";\n        this._menu.insertTo(document.body);\n        if (x + this._menu.getWidth() > window.innerWidth) {\n            x = x - this._menu.getWidth() + 1;\n        }\n        if (y + this._menu.getHeight() > window.innerHeight) {\n            y = y - this._menu.getHeight() + 1;\n        }\n        this._menu.style.top = `${y}px`;\n        this._menu.style.left = `${x}px`;\n        this._menu.style.opacity = \"1\";\n        document.body.addEventListener(\"click\", this._closeHandler);\n        document.body.addEventListener(\"mouseup\", this._closeHandler);\n        document.body.addEventListener(\"mousewheel\", this._closeHandler);\n        return this;\n    }\n    close() {\n        document.body.removeEventListener(\"click\", this._closeHandler);\n        document.body.removeEventListener(\"mouseup\", this._closeHandler);\n        document.body.removeEventListener(\"mousewheel\", this._closeHandler);\n        this._isShowing = false;\n        const menu = this._menu;\n        setTimeout(() => {\n            if (menu && menu.remove) {\n                menu.remove();\n            }\n        }, 0);\n        delete this._menu;\n        return this;\n    }\n    /** Tells whether the visibility. */\n    visible() {\n        return this._isShowing;\n    }\n    /** remove the elements and listeners. */\n    remove() {\n        if (this._menu) {\n            this.close();\n        }\n        if (this._target) {\n            this._target.removeEventListener(\"contextmenu\", this._openHandler);\n        }\n    }\n}\nexport function createContextMenu(option) {\n    return new ContextMenu(option);\n}\n\n//# sourceMappingURL=context-menu.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { extendObject } from \"./util\";\nconst _cache = {};\nconst _insertionTranslation = {\n    before(element, node) {\n        element.parentNode.insertBefore(node, element);\n    },\n    top(element, node) {\n        element.insertBefore(node, element.firstChild);\n    },\n    bottom(element, node) {\n        element.appendChild(node);\n    },\n    after(element, node) {\n        element.parentNode.insertBefore(node, element.nextSibling);\n    }\n};\n/*?\n    flagrate.createElement([tagName = \"div\", attribute])\n    new flagrate.Element([tagName = \"div\", attribute])\n    - tagName (String) - The name of the HTML element to create.\n    - attribute (Attribute) - An optional group of attribute/value pairs to set on the element.\n\r\n    Creates an HTML element with `tagName` as the tag name, optionally with the given attributes.\n\r\n    #### Example\n\r\n        // The old way:\n        var a = document.createElement(\"a\");\n        a.setAttribute(\"class\", \"foo\");\n        a.setAttribute(\"href\", \"/foo.html\");\n        a.appendChild(document.createTextNode(\"Next page\"));\n        x.appendChild(a);\n\r\n        // The new way:\n        var a = flagrate.createElement(\"a\", { \"class\": \"foo\", href: \"/foo.html\" })\n                        .insertText(\"Next page\")\n                        .insertTo(x);\n**/\nfunction FElement(tagName = \"div\", attribute) {\n    let node;\n    if (_cache[tagName]) {\n        node = _cache[tagName].cloneNode(false);\n    }\n    else if ((attribute && attribute.hasOwnProperty(\"type\")) || tagName === \"select\") {\n        node = document.createElement(tagName);\n    }\n    else {\n        node = document.createElement(tagName);\n        _cache[tagName] = node.cloneNode(false);\n    }\n    extendObject(node, this);\n    return attribute ? node.writeAttribute(attribute) : node;\n}\nexport const Element = FElement;\nfunction _createElement(tagName, attribute) {\n    return new Element(tagName, attribute);\n}\nexport const createElement = _createElement;\nElement.prototype = {\n    isFlagrated: true\n};\n/*?\n    flagrate.Element.visible(element) -> Boolean\n    - element (Element) - instance of Element.\n\r\n    Tells whether `element` is visible\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/visible/\n**/\nElement.visible = (element) => {\n    return element.style.display !== \"none\";\n};\n/*?\n    flagrate.Element.exists(element) -> Boolean\n    - element (Element) - instance of Element.\n\r\n    Tells whether `element` is exists on document.\n**/\nElement.exists = (element) => {\n    if (element.parentNode) {\n        while ((element = element.parentNode) !== null) {\n            if (element === document) {\n                return true;\n            }\n        }\n    }\n    return false;\n};\n/*?\n    flagrate.Element.toggle(element) -> Element\n    - element (Element) - instance of Element.\n\r\n    Toggles the visibility of `element`. Returns `element`.\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/toggle/\n**/\nElement.toggle = (element) => {\n    return Element[Element.visible(element) ? \"hide\" : \"show\"](element);\n};\n/*?\n    flagrate.Element.hide(element) -> Element\n    - element (Element) - instance of Element.\n\r\n    Sets `display: none` on `element`. Returns `element`.\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/hide/\n**/\nElement.hide = (element) => {\n    element.style.display = \"none\";\n    return element;\n};\n/*?\n    flagrate.Element.show(element) -> Element\n    - element (Element) - instance of Element.\n\r\n    Removes `display: none` on `element`. Returns `element`.\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/show/\n**/\nElement.show = (element) => {\n    element.style.display = \"\";\n    return element;\n};\n/*?\n    flagrate.Element.remove(element) -> void\n    - element (Element) - instance of Element.\n\r\n    Completely removes `element` from the document and returns it.\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/remove/\n**/\nElement.remove = (element) => {\n    if (element.parentNode) {\n        element.parentNode.removeChild(element);\n    }\n    return;\n};\n/*?\n    flagrate.Element.update(element[, newContent]) -> Element\n    - element (Element) - instance of Element.\n    - newContent (String|Number|Element) - new content.\n\r\n    Replaces _the content_ of `element` with the `newContent` argument and\n    returns `element`.\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/update/\n**/\nElement.update = (element, content) => {\n    let i = element.childNodes.length;\n    while (i--) {\n        Element.remove(element.childNodes[i]);\n    }\n    if (!content) {\n        return element;\n    }\n    if (Element.isElement(content) === true) {\n        element.appendChild(content);\n        return element;\n    }\n    if (typeof content !== \"string\") {\n        content = content.toString(10);\n    }\n    element.innerHTML = content;\n    return element;\n};\n/*?\n    flagrate.Element.updateText(element[, newContent]) -> Element\n    - element (Element) - instance of Element.\n    - newContent (String|Number) - new text content.\n**/\nElement.updateText = (element, content) => {\n    let i = element.childNodes.length;\n    while (i--) {\n        Element.remove(element.childNodes[i]);\n    }\n    if (content === undefined) {\n        return element;\n    }\n    if (Element.isElement(content) === true && (content.toString !== void 0)) {\n        return Element.updateText(element, content.toString());\n    }\n    if (typeof content !== \"string\") {\n        content = content.toString(10);\n    }\n    element.appendChild(document.createTextNode(content));\n    return element;\n};\n/*?\n    flagrate.Element.insert(element, content) -> Element\n    - element (Element) - instance of Element.\n    - content (String|Number|Element|Object) - The content to insert\n\r\n    Inserts content `above`, `below`, at the `top`, and/or at the `bottom` of\n    the given element, depending on the option(s) given.\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/insert/\n**/\nElement.insert = (element, insertion) => {\n    if (typeof insertion === \"string\" || typeof insertion === \"number\" || Element.isElement(insertion) === true) {\n        insertion = { bottom: insertion };\n    }\n    let position, content, insert, div;\n    for (position in insertion) {\n        if (insertion.hasOwnProperty(position)) {\n            content = insertion[position];\n            position = position.toLowerCase();\n            insert = _insertionTranslation[position];\n            if (Element.isElement(content) === true) {\n                insert(element, content);\n                continue;\n            }\n            if (typeof content !== \"string\") {\n                content = content.toString(10);\n            }\n            div = new Element();\n            div.innerHTML = content;\n            if (position === \"top\" || position === \"after\") {\n                [...div.childNodes].reverse();\n            }\n            while (div.childNodes.length !== 0) {\n                insert(element, div.childNodes[0]);\n            }\n        }\n    }\n    return element;\n};\n/*?\n    flagrate.Element.insertText(element, content) -> Element\n    - element (Element) - instance of Element.\n    - content (String|Number|Object) - The content to insert\n\r\n    Inserts content `above`, `below`, at the `top`, and/or at the `bottom` of\n    the given element, depending on the option(s) given.\n**/\nElement.insertText = (element, insertion) => {\n    if (typeof insertion === \"string\" || typeof insertion === \"number\") {\n        insertion = { bottom: insertion };\n    }\n    let position, content, insert;\n    for (position in insertion) {\n        if (insertion.hasOwnProperty(position)) {\n            content = insertion[position];\n            position = position.toLowerCase();\n            insert = _insertionTranslation[position];\n            if (typeof content !== \"string\") {\n                content = content.toString(10);\n            }\n            insert(element, document.createTextNode(content));\n        }\n    }\n    return element;\n};\n/*?\n    flagrate.Element.insertTo(element, to[, position = \"bottom\"]) -> Element\n    - element (Element) - insert this.\n    - to (Element) - insert to this element.\n    - position (String) - `before` or `top` or `bottom` or `after`.\n**/\nElement.insertTo = (element, to, position = \"bottom\") => {\n    var insertion = {};\n    if (position) {\n        insertion[position] = element;\n    }\n    else {\n        insertion[\"bottom\"] = element;\n    }\n    Element.insert(to, insertion);\n    return element;\n};\n/*?\n    flagrate.Element.readAttribute(element, attributeName) -> String | null\n    - element (Element) - instance of Element.\n    - attributeName (String) - attribute name.\n\r\n    Returns the value of `element`'s `attribute` or `null` if `attribute` has\n    not been specified.\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/readAttribute/\n**/\nElement.readAttribute = (element, name) => {\n    // ref: https://github.com/sstephenson/prototype/blob/1fb9728/src/dom/dom.js#L1856\n    return element.getAttribute(name);\n};\n/*?\n    flagrate.Element.writeAttribute(element, attribute[, value = true]) -> Element\n    - element (Element) - instance of Element.\n    - attribute (String|Object) - attribute name or name/value pairs object.\n    - value (Boolean|String) - value of attribute.\n\r\n    Adds, specifies or removes attributes passed as either a hash or a name/value pair.\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/writeAttribute/\n**/\nElement.writeAttribute = (element, name, value) => {\n    let attr;\n    if (typeof name === \"object\") {\n        attr = name;\n    }\n    else {\n        attr = {};\n        attr[name] = (value === undefined) ? true : value;\n    }\n    let k;\n    for (k in attr) {\n        if (attr.hasOwnProperty(k) === true) {\n            value = attr[k];\n            if (value === false || value === null) {\n                element.removeAttribute(k);\n            }\n            else if (value === true) {\n                element.setAttribute(k, k);\n            }\n            else if (value !== undefined) {\n                element.setAttribute(k, value);\n            }\n        }\n    }\n    return element;\n};\n/*?\n    flagrate.Element.getDimensions(element) -> Object\n    - element (Element) - instance of Element.\n\r\n    Finds the computed width and height of `element` and returns them as\n    key/value pairs of an object.\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/getDimensions/\n**/\nElement.getDimensions = (element) => {\n    const display = Element.getStyle(element, \"display\");\n    if (display && display !== \"none\") {\n        return {\n            width: element.offsetWidth,\n            height: element.offsetHeight\n        };\n    }\n    const before = {\n        visibility: element.style.visibility,\n        position: element.style.position,\n        display: element.style.display\n    };\n    const after = {\n        visibility: \"hidden\",\n        display: \"block\"\n    };\n    // Switching `fixed` to `absolute` causes issues in Safari.\n    if (before.position !== \"fixed\") {\n        after.position = \"absolute\";\n    }\n    Element.setStyle(element, after);\n    const dimensions = {\n        width: element.offsetWidth,\n        height: element.offsetHeight\n    };\n    Element.setStyle(element, before);\n    return dimensions;\n};\n/*?\n    flagrate.Element.getHeight(element) -> Number\n    - element (Element) - instance of Element.\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/getHeight/\n**/\nElement.getHeight = (element) => {\n    return Element.getDimensions(element).height;\n};\n/*?\n    flagrate.Element.getWidth(element) -> Number\n    - element (Element) - instance of Element.\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/getWidth/\n**/\nElement.getWidth = (element) => {\n    return Element.getDimensions(element).width;\n};\n/*?\n    flagrate.Element.cumulativeOffset(element) -> Object\n    - element (Element) - instance of Element.\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/cumulativeOffset/\n**/\nElement.cumulativeOffset = (element) => {\n    let t = 0, l = 0;\n    if (element.parentNode) {\n        do {\n            t += element.offsetTop || 0;\n            l += element.offsetLeft || 0;\n            element = element.offsetParent;\n        } while (element);\n    }\n    return {\n        top: t,\n        left: l\n    };\n};\n/*?\n    flagrate.Element.cumulativeScrollOffset(element) -> Object\n    - element (Element) - instance of Element.\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/cumulativeScrollOffset/\n**/\nElement.cumulativeScrollOffset = (element) => {\n    let t = 0, l = 0;\n    do {\n        t += element.scrollTop || 0;\n        l += element.scrollLeft || 0;\n        // for Chrome\n        if (element.parentNode === document.body && document.documentElement.scrollTop !== 0) {\n            element = document.documentElement;\n        }\n        else {\n            element = element.parentNode;\n        }\n    } while (element);\n    return {\n        top: t,\n        left: l\n    };\n};\n/*?\n    Flagrate.Element.hasClassName(element, className) -> Boolean\n    - element (Element) - instance of Element.\n    - className (String) -\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/hasClassName/\n**/\nElement.hasClassName = (element, className) => {\n    return (element.className.length > 0 && (element.className === className || new RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\").test(element.className)));\n};\n/*?\n    flagrate.Element.addClassName(element, className) -> Element\n    - element (Element) - instance of Element.\n    - className (String) - The class name to add.\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/addClassName/\n**/\nElement.addClassName = (element, className) => {\n    if (!Element.hasClassName(element, className)) {\n        element.className += (element.className ? \" \" : \"\") + className;\n    }\n    return element;\n};\n/*?\n    flagrate.Element.removeClassName(element, className) -> Element\n    - element (Element) - instance of Element.\n    - className (String) -\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/removeClassName/\n**/\nElement.removeClassName = (element, className) => {\n    element.className = element.className.replace(new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\"), \" \").trim();\n    return element;\n};\n/*?\n    flagrate.Element.toggleClassName(element, className) -> Element\n    - element (Element) - instance of Element.\n    - className (String) -\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/toggleClassName/\n**/\nElement.toggleClassName = (element, className) => {\n    return Element[Element.hasClassName(element, className) ? \"removeClassName\" : \"addClassName\"](element, className);\n};\n/*?\n    flagrate.Element.getStyle(element, propertyName) -> String | Number | null\n    - element (Element) - instance of Element.\n    - propertyName (String) - The property name of style to be retrieved.\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/getStyle/\n**/\nElement.getStyle = (element, style) => {\n    style = style === \"float\" ? \"cssFloat\" : style.replace(/-+([a-z])?/g, (m, s) => {\n        return s ? s.toUpperCase() : \"\";\n    });\n    let value = element.style[style];\n    if (!value || value === \"auto\") {\n        const css = document.defaultView.getComputedStyle(element, null);\n        value = css && (css[style] !== void 0) && css[style] !== \"\" ? css[style] : null;\n    }\n    if (style === \"opacity\") {\n        return value ? parseFloat(value) : 1.0;\n    }\n    return value === \"auto\" ? null : value;\n};\n/*?\n    flagrate.Element.setStyle(element, style) -> Element\n    - element (Element) - instance of Element.\n    - style (Object) -\n\r\n    This method is similar to http://api.prototypejs.org/dom/Element/setStyle/\n**/\nElement.setStyle = (element, style) => {\n    let p;\n    for (p in style) {\n        if (style.hasOwnProperty(p)) {\n            element.style[(p === \"float\" || p === \"cssFloat\") ? \"cssFloat\" : p] = style[p];\n        }\n    }\n    return element;\n};\n/*?\n    flagrate.Element.on(element, eventName, listener[, useCapture = false]) -> Element\n    - element (Element) - instance of Element.\n    - eventName (String) - name of event.\n    - listener (Function) - The function to call when the event occurs.\n    - useCapture (Boolean) -\n\r\n    Registers an event handler on a DOM element.\n**/\nElement.on = (element, name, listener, useCapture) => {\n    if (element._flagrateEvent === undefined) {\n        element._flagrateEvent = {};\n    }\n    if (element._flagrateEvent[name] === undefined) {\n        element._flagrateEvent[name] = [];\n    }\n    element._flagrateEvent[name].push({\n        listener: listener,\n        useCapture: useCapture\n    });\n    element.addEventListener(name, listener, useCapture || false);\n    return element;\n};\n/*?\n    flagrate.Element.off(element, eventName[, listener, useCapture = false]) -> Element\n    - element (Element) - instance of Element.\n    - eventName (String) - name of event.\n    - listener (Function) - The function to call when the event occurs.\n    - useCapture (Boolean) -\n\r\n    Unregisters an event handler on a DOM element.\n**/\nElement.off = (element, name, listener, useCapture) => {\n    if (listener) {\n        element.removeEventListener(name, listener, useCapture || false);\n        return;\n    }\n    if (element._flagrateEvent === undefined) {\n        element._flagrateEvent = {};\n    }\n    if (element._flagrateEvent[name] === undefined) {\n        element._flagrateEvent[name] = [];\n    }\n    element._flagrateEvent[name].forEach(fevent => {\n        element.removeEventListener(name, fevent.listener, fevent.useCapture || false);\n    });\n    return element;\n};\n/*?\n    flagrate.Element.fire(element, eventName[, property]) -> Element\n    - element (Element) - instance of Element.\n    - eventName (String) - name of event.\n    - property (Object) -\n\r\n    Fires a custom event.\n**/\nElement.fire = (element, name, property) => {\n    const event = document.createEvent(\"HTMLEvents\");\n    event.initEvent(name, true, true);\n    if (property) {\n        extendObject(event, property);\n    }\n    element.dispatchEvent(event);\n    return element;\n};\n/*?\n    flagrate.Element.emit(element, eventName[, property]) -> Element\n    Alias of: flagrate.Element.fire\n**/\nElement.emit = Element.fire;\n//\n// create instance methods\n//\nfor (const name in Element) {\n    if (!(name in Element.prototype)) {\n        Element.prototype[name] = wrapper(name);\n    }\n}\nfunction wrapper(name) {\n    return function () {\n        return Element[name](this, ...arguments);\n    };\n}\n//\n// extra class methods\n//\n/*?\n    flagrate.Element.extend(element) -> flagrate.Element\n    - element (Element) - instance of Element.\n\r\n    Extends the given `element` instance.\n\r\n    **Caution**: This method will add Flagrate.Element instance methods to given element instance.\n**/\nElement.extend = (element) => {\n    if (element.isFlagrated) {\n        return element;\n    }\n    extendObject(element, Element.prototype);\n    return element;\n};\n/*?\n    flagrate.Element.isElement(element) -> Boolean\n    - element (Element) - instance of Element.\n**/\nif (typeof HTMLElement === \"object\") {\n    Element.isElement = (object) => {\n        return object instanceof HTMLElement;\n    };\n}\nelse {\n    Element.isElement = (object) => {\n        return !!(object && object.nodeType === 1 && typeof object.nodeName === \"string\");\n    };\n}\n\n//# sourceMappingURL=element.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { jsonPointer } from \"./util\";\nimport { Element } from \"./element\";\nimport { TextInput } from \"./text-input\";\nimport { TextArea } from \"./text-area\";\nimport { ComboBox } from \"./combo-box\";\nimport { Checkbox } from \"./checkbox\";\nimport { Checkboxes } from \"./checkboxes\";\nimport { Switch } from \"./switch\";\nimport { Radios } from \"./radios\";\nimport { Select } from \"./select\";\n/*?\n    flagrate.createForm(option)\n    new flagrate.Form(option)\n    - option (Object) - configuration.\n\r\n    Create and initialize the Form.\n\r\n    #### option\n\r\n    * `fields`                   (Array; default `[]`): of **[field](#field)** object.\n    * `id`                       (String): `id` attribute of container.\n    * `className`                (String): `class` attribute of container.\n    * `attribute`                (Object): additional attribute of container.\n    * `style`                    (Object): style of container. (using flagrate.Element.setStyle)\n    * `nolabel`                  (Boolean; default `false`): hide labels.\n    * `vertical`                 (Boolean; default `false`): vertical label style.\n\r\n    #### field\n\r\n    * `key`                      (String):\n    * `pointer`                  (String|null):\n    * `label`                    (String; default `\"\"`):\n    * `icon`                     (String):\n    * `text`                     (String):\n    * `html`                     (String):\n    * `element`                  (Element):\n    * `input`                    (Object): see **[input](#input)**\n    * `depends`                  (Array): of **[depend](#depend)**\n    * `id`                       (String): `id` attribute of container.\n    * `className`                (String): `class` attribute of container.\n    * `attribute`                (Object): additional attribute of container.\n    * `style`                    (Object): style of container. (using flagrate.Element.setStyle)\n\r\n    #### input\n\r\n    * `type`                     (String|Object; **required**): **[inputtype](#inputType)** String or Object\n    * `val`                      (any): default value(s) of this input.\n    * `isRequired`               (Boolean; default `false`):\n    * `min`                      (Number): (simple validator)\n    * `max`                      (Number): (simple validator)\n    * `minLength`                (Number): (simple validator)\n    * `maxLength`                (Number): (simple validator)\n    * `validators`               (Array): of **[inputValidator](#inputvalidator)** String or Object or Function.\n    * `toString`                 (Boolean; default `false`): if NOT String, use [#toString()](https://developer.mozilla.org/ja/docs/toString) before resulting.\n    * `trim`                     (Boolean; default `false`): if String, use [String#trim()](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/trim) before resulting.\n    * `toNumber`                 (Boolean; default `false`): if NOT Number, tries to convert to Number.\n    * `transform`                (Function): alternate result transform/converting function. (only sync)\n    * `id`                       (String): `id` attribute of input element.\n\r\n    #### depend\n\r\n    * `key`                      (String): unique key for identifying fields. if looking result, must change to use the pointer.\n    * `pointer`                  (String):\n    * `val`                      (any):\n    * `op`                       (String): `===`, `!==`, `>=`, `<=`, `>`, `<`, `in`\n    * `tester`                   (Function): alternate testing function. this disables normal testing. (only sync)\n\r\n    #### inputType\n\r\n    if specified a String, will use flagrate.Form.inputType[(specified)].\n\r\n    #### inputValidator\n\r\n    if specified a String, will use flagrate.Form.inputValidator[(specified)].\n\r\n        // Example: custom validator\n        validators: [\n            // using regex:\n            {\n                regexp: /^[a-z0-9]+(-[a-z0-9]+)*(\\.([a-z0-9]+(-[a-z0-9]+)*))*$/i,\n                error: \"Please enter a valid hostname string.\"\n            },\n            // using async function:\n            function (input, done) {\n                someAsyncFunction(input, function (err, result) {\n                    if (err) {\n                        done(\"error\", \"This hostname is already in use. (\" + err + \")\");\n                    } else {\n                        done(\"success\");\n                    }\n                });\n            },\n            // using sync function:\n            function (input, done) {\n                var err = someSyncFunction(input);\n                if (err) {\n                    done(\"error\", \"This hostname is prohibited. (\" + err + \")\");\n                } else {\n                    done(\"success\");\n                }\n            }\n        ]\n\r\n    see flagrate.Form.inputValidator to read more documents.\n**/\nexport class Form {\n    constructor(_opt = {}) {\n        this._opt = _opt;\n        this._fields = [];\n        this._nolabel = false;\n        this._vertical = false;\n        this.element = new Element(\"form\", { \"class\": \"flagrate flagrate-form\" });\n        this._id = \"flagrate-form-\" + (++Form.idCounter).toString(10);\n        if (_opt.nolabel === true) {\n            this._nolabel = true;\n        }\n        if (_opt.vertical === true) {\n            this._vertical = true;\n        }\n        this._create();\n        if (_opt.fields && _opt.fields.length !== 0) {\n            this.push(_opt.fields);\n        }\n    }\n    insertTo(element, pos) {\n        return this.element.insertTo(element, pos) && this;\n    }\n    on(eventType, listener, useCapture) {\n        return this.element.on(eventType, listener, useCapture) && this;\n    }\n    off(eventType, listener, useCapture) {\n        return this.element.off(eventType, listener, useCapture) && this;\n    }\n    /** Returns a result Object. */\n    getResult() {\n        const result = {};\n        for (let i = 0, l = this._fields.length; i < l; i++) {\n            let field = this._fields[i];\n            if ((!field.key && typeof field.pointer !== \"string\") || field._dependsIsOk !== true) {\n                continue;\n            }\n            if (field.pointer === null) {\n                // null pointer\n                continue;\n            }\n            if (typeof field.pointer === \"string\") {\n                jsonPointer.set(result, field.pointer, field.getVal());\n            }\n            else if (field.key) {\n                result[field.key] = field.getVal();\n            }\n        }\n        return result;\n    }\n    /*?\n        #### Example\n\r\n            form.validate(function(success) {\n                if (success) {\n                    console.log(\"form is valid.\");\n                } else {\n                    console.log(\"form is invalid.\");\n                }\n            });\n    **/\n    validate(callback) {\n        const fields = [];\n        for (let i = 0, l = this._fields.length; i < l; i++) {\n            let field = this._fields[i];\n            if (field._dependsIsOk === true && field.input && field.input.type) {\n                fields.push(field);\n            }\n        }\n        let hasError = false;\n        function fin() {\n            if (callback) {\n                callback(!hasError);\n            }\n        }\n        function done(result) {\n            if (result === false) {\n                hasError = true;\n            }\n            run();\n        }\n        function run() {\n            if (fields.length === 0) {\n                return fin();\n            }\n            fields.shift().validate(done);\n        }\n        run();\n        return this;\n    }\n    enable() {\n        for (let i = 0, l = this._fields.length; i < l; i++) {\n            const field = this._fields[i];\n            if (field.input && field.input.type) {\n                field.input.type.enable.call(field.input);\n            }\n        }\n        return this;\n    }\n    disable() {\n        for (let i = 0, l = this._fields.length; i < l; i++) {\n            const field = this._fields[i];\n            if (field.input && field.input.type) {\n                field.input.type.disable.call(field.input);\n            }\n        }\n        return this;\n    }\n    getField(key) {\n        for (let i = 0, l = this._fields.length; i < l; i++) {\n            const field = this._fields[i];\n            if (field.key && field.key === key) {\n                return field;\n            }\n        }\n        return null;\n    }\n    push(f) {\n        if (f instanceof Array) {\n            for (let i = 0, l = f.length; i < l; i++) {\n                this._createField(f[i]);\n                this._fields.push(f[i]);\n            }\n        }\n        else {\n            this._createField(f);\n            this._fields.push(f);\n        }\n        for (let i = 0, l = this._fields.length; i < l; i++) {\n            this._collectFieldRefs(this._fields[i]);\n            this._checkFieldDepends(this._fields[i]);\n        }\n        this._requestRender();\n        return this._fields.length;\n    }\n    splice(index, c, f) {\n        c = typeof c === \"undefined\" ? this._fields.length - index : c;\n        const removes = this._fields.splice(index, c);\n        for (let i = 0, l = removes.length; i < l; i++) {\n            if (removes[i].container) {\n                removes[i].container.remove();\n                delete removes[i].container;\n            }\n        }\n        if (f) {\n            if (f instanceof Array === false) {\n                f = [f];\n            }\n            for (let i = 0, l = f.length; i < l; i++) {\n                this._createField(f[i]);\n                this._fields.splice(index + i, 0, f[i]);\n            }\n        }\n        for (let i = 0, l = this._fields.length; i < l; i++) {\n            this._collectFieldRefs(this._fields[i]);\n            this._checkFieldDepends(this._fields[i]);\n        }\n        this._requestRender();\n        return removes;\n    }\n    removeField(f) {\n        const removes = [];\n        let bulk = true;\n        if (f instanceof Array === false) {\n            bulk = false;\n            f = [f];\n        }\n        for (let i = 0, l = f.length; i < l; i++) {\n            const index = (typeof f[i] === \"number\") ? f[i] : this.indexOf(f[i]);\n            if (index !== -1) {\n                removes.push(this.splice(index, 1));\n            }\n        }\n        return bulk ? removes : removes[0];\n    }\n    indexOf(f) {\n        if (typeof f === \"string\") {\n            let index = -1;\n            for (let i = 0, l = this._fields.length; i < l; i++) {\n                if (this._fields[i].key === f) {\n                    index = i;\n                    break;\n                }\n            }\n            return index;\n        }\n        else {\n            return this._fields.indexOf(f);\n        }\n    }\n    _create() {\n        if (this._opt.id) {\n            this.element.writeAttribute(\"id\", this._opt.id);\n        }\n        if (this._opt.className) {\n            this.element.addClassName(this._opt.className);\n        }\n        if (this._opt.attribute) {\n            this.element.writeAttribute(this._opt.attribute);\n        }\n        if (this._opt.style) {\n            this.element.setStyle(this._opt.style);\n        }\n        if (this._opt.nolabel === true) {\n            this.element.addClassName(\"flagrate-form-nolabel\");\n        }\n        if (this._opt.vertical === true) {\n            this.element.addClassName(\"flagrate-form-vertical\");\n        }\n        this.element.addEventListener(\"submit\", e => e.preventDefault());\n        return this;\n    }\n    _requestRender() {\n        if (this._renderTimer) {\n            clearTimeout(this._renderTimer);\n        }\n        this._renderTimer = setTimeout(this._render.bind(this), 0);\n        return this;\n    }\n    _render() {\n        const active = document.activeElement;\n        for (let i = 0, l = this._fields.length; i < l; i++) {\n            const field = this._fields[i];\n            if (field._dependsIsOk === true) {\n                field.container.insertTo(this.element);\n            }\n            else {\n                if (field.visible() === true) {\n                    field.container.remove();\n                }\n            }\n        }\n        if (active) {\n            if (/Trident/.test(window.navigator.userAgent) === true) {\n                setTimeout(() => {\n                    if (active.focus) {\n                        active.focus();\n                    }\n                    const isMustReselected = ((active.tagName === \"INPUT\" && (active.type === \"text\" ||\n                        active.type === \"password\" ||\n                        active.type === \"number\")) ||\n                        active.tagName === \"TEXTAREA\");\n                    if (isMustReselected) {\n                        if (typeof active.selectionStart === \"number\") {\n                            active.selectionStart = active.selectionEnd = active.value.length;\n                        }\n                        else if (active[\"createTextRange\"] !== undefined) {\n                            const range = active[\"createTextRange\"]();\n                            range.collapse(false);\n                            range.select();\n                        }\n                    }\n                }, 0);\n            }\n            else {\n                if (active.focus) {\n                    active.focus();\n                }\n            }\n        }\n        return this;\n    }\n    _collectFieldRefs(field) {\n        field._refs = [];\n        // DEPRECATED\n        if (typeof field[\"point\"] !== \"undefined\") {\n            field.pointer = field[\"point\"];\n            delete field[\"point\"];\n        }\n        if (!field.key && typeof field.pointer !== \"string\") {\n            return this;\n        }\n        let i, l, j, m, k, n, fi, s;\n        for (i = 0, l = this._fields.length; i < l; i++) {\n            fi = this._fields[i];\n            if (field === fi || !fi.depends || fi.depends.length === 0) {\n                continue;\n            }\n            for (j = 0, m = fi.depends.length; j < m; j++) {\n                if (fi.depends[j] instanceof Array) {\n                    s = false;\n                    for (k = 0, n = fi.depends[j].length; k < n; k++) {\n                        if (fi.depends[j][k].key === field.key) {\n                            s = true;\n                            break;\n                        }\n                        if (typeof fi.depends[j][k].point === \"string\") {\n                            fi.depends[j][k].pointer = fi.depends[j][k].point;\n                            delete fi.depends[j][k].point;\n                        }\n                        if (typeof fi.depends[j][k].pointer === \"string\") {\n                            if (fi.depends[j][k].pointer === field.pointer) {\n                                s = true;\n                                break;\n                            }\n                            if (fi.depends[j][k].pointer === \"/\" + field.key) {\n                                s = true;\n                                break;\n                            }\n                        }\n                    }\n                    if (s) {\n                        field._refs.push(fi);\n                    }\n                    break;\n                }\n                else {\n                    if (fi.depends[j].key === field.key) {\n                        field._refs.push(fi);\n                        break;\n                    }\n                    if (typeof fi.depends[j].point === \"string\") {\n                        fi.depends[j].pointer = fi.depends[j].point;\n                        delete fi.depends[j].point;\n                    }\n                    if (typeof fi.depends[j].pointer === \"string\") {\n                        if (fi.depends[j].pointer === field.pointer) {\n                            field._refs.push(fi);\n                            break;\n                        }\n                        if (fi.depends[j].pointer === \"/\" + field.key) {\n                            field._refs.push(fi);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return this;\n    }\n    _compareDepend(d) {\n        let v;\n        if (d.key) {\n            const f = this.getField(d.key);\n            if (f !== null) {\n                if (!d.op && !d.tester && d.val === undefined) {\n                    return true;\n                }\n                if (f._dependsIsOk === true) {\n                    v = f.getVal();\n                }\n            }\n        }\n        else if (typeof d.pointer === \"string\") {\n            try {\n                v = jsonPointer.get(this.getResult(), d.pointer);\n            }\n            catch (e) {\n                // undefined\n            }\n        }\n        else {\n            return true;\n        }\n        if (typeof d.tester === \"function\") {\n            return !!d.tester(v, d);\n        }\n        if (d.op) {\n            if (d.op === \"===\" && d.val === v) {\n                return true;\n            }\n            if (d.op === \"!==\" && d.val !== v) {\n                return true;\n            }\n            if (d.op === \">=\" && d.val >= v) {\n                return true;\n            }\n            if (d.op === \"<=\" && d.val <= v) {\n                return true;\n            }\n            if (d.op === \">\" && d.val > v) {\n                return true;\n            }\n            if (d.op === \"<\" && d.val < v) {\n                return true;\n            }\n            if (d.op === \"in\" && typeof v[d.val] !== \"undefined\") {\n                return true;\n            }\n        }\n        else {\n            if (d.val === v) {\n                return true;\n            }\n        }\n        return false;\n    }\n    _checkFieldDepends(field) {\n        const depends = field.depends;\n        if (!depends || depends.length === 0) {\n            field._dependsIsOk = true;\n            return true;\n        }\n        let result = true;\n        let i, l, j, m, d, f, s;\n        for (i = 0, l = depends.length; i < l; i++) {\n            d = depends[i];\n            if (d instanceof Array) {\n                s = false;\n                for (j = 0, m = d.length; j < m; j++) {\n                    if (this._compareDepend(d[j]) === true) {\n                        s = true;\n                        break;\n                    }\n                }\n                if (s === false) {\n                    result = false;\n                    break;\n                }\n            }\n            else {\n                if (this._compareDepend(d) === false) {\n                    result = false;\n                    break;\n                }\n            }\n        }\n        field._dependsIsOk = result;\n        return result;\n    }\n    _createField(field) {\n        field._dependsIsOk = (!field.depends || field.depends.length === 0);\n        // field container\n        field.container = new Element(\"div\");\n        // attributes to field container\n        if (field.id) {\n            field.container.writeAttribute(\"id\", field.id);\n        }\n        if (field.className) {\n            field.container.writeAttribute(\"class\", field.className);\n        }\n        if (field.attribute) {\n            field.container.writeAttribute(field.attribute);\n        }\n        if (field.style) {\n            field.container.setStyle(field.style);\n        }\n        // create label\n        if (this._nolabel === false) {\n            field.labelElement = new Element(\"label\").insertText(field.label || \"\");\n            new Element(\"div\", { \"class\": \"flagrate-form-field-label\" })\n                .insert(field.labelElement)\n                .insertTo(field.container);\n            // icon to label\n            if (field.icon) {\n                field.labelElement.addClassName(\"flagrate-icon\");\n                field.labelElement.setStyle({\n                    backgroundImage: `url(${field.icon})`\n                });\n            }\n        }\n        // input container\n        field._input = new Element(\"div\").insertTo(field.container);\n        // input ready?\n        if (field.input && field.input.type) {\n            if (typeof field.input.type === \"string\") {\n                field.input.type = Form.inputType[field.input.type];\n            }\n            else if (!field.input.type.create) {\n                delete field.input;\n            }\n        }\n        // init input\n        if (field.input && field.input.type) {\n            const input = field.input;\n            if (!input.id) {\n                input.id = \"flagrate-form-input-\" + (++Form.idCounter);\n            }\n            if (this._nolabel === false) {\n                field.labelElement.writeAttribute(\"for\", input.id);\n            }\n            input.element = input.type.create.call(input);\n            new Element(\"div\", { \"class\": \"flagrate-form-field-input\" })\n                .insert(input.element)\n                .insertTo(field._input);\n            input.element.writeAttribute(\"id\", input.id);\n            // value, values is just alias.\n            if (input[\"value\"]) {\n                input.val = input[\"value\"];\n            }\n            else if (input[\"values\"]) {\n                input.val = input[\"values\"];\n            }\n            // set the default value\n            if (input.val !== undefined) {\n                input.type.setVal.call(input, input.val);\n            }\n            if (input.style) {\n                input.element.setStyle(input.style);\n            }\n            if (input.attribute) {\n                input.element.writeAttribute(input.attribute);\n            }\n            // toString is alias for toStr.\n            if (typeof input[\"toString\"] === \"boolean\" && input.toStr === undefined) {\n                input.toStr = input[\"toString\"];\n            }\n            // init validator\n            if (input.validators) {\n                input.validators.forEach((v, i) => {\n                    if (typeof v === \"string\") {\n                        input.validators[i] = Form.inputValidator[v];\n                    }\n                });\n            }\n            else {\n                input.validators = [];\n            }\n            // result block\n            input._result = new Element(\"ul\", {\n                \"class\": \"flagrate-form-field-result\"\n            }).insertTo(field._input);\n            // etc\n            if (input.isRequired === true) {\n                field.container.addClassName(\"flagrate-required\");\n            }\n        }\n        // misc\n        if (field.element) {\n            new Element(\"div\", {\n                \"class\": \"flagrate-form-field-element\"\n            }).insert(field.element).insertTo(field._input);\n        }\n        if (field.html) {\n            new Element(\"div\", {\n                \"class\": \"flagrate-form-field-html\"\n            }).insert(field.html).insertTo(field._input);\n        }\n        if (field.text) {\n            new Element(\"p\", {\n                \"class\": \"flagrate-form-field-text\"\n            }).insertText(field.text).insertTo(field._input);\n        }\n        // field methods\n        field.visible = () => {\n            return (field.container.parentNode !== null && field.container.parentNode === this.element);\n        };\n        field.getVal = () => {\n            if (!field.input) {\n                return undefined;\n            }\n            let result = field.input.type.getVal.call(field.input);\n            if (field.input.toStr === true) {\n                result = result.toString();\n            }\n            if (field.input.trim === true && typeof result === \"string\") {\n                result = result.trim();\n            }\n            if (field.input.toNumber === true && typeof result !== \"number\") {\n                if (typeof result === \"string\") {\n                    result = parseFloat(result);\n                }\n                else if (result instanceof Date) {\n                    result = result.getTime();\n                }\n                else if (typeof result === \"boolean\") {\n                    result = (result === true) ? 1 : 0;\n                }\n            }\n            if (typeof field.input.transform === \"function\") {\n                result = field.input.transform.call(field.input, result);\n            }\n            return result;\n        };\n        field.setVal = val => {\n            if (!field.input) {\n                return field;\n            }\n            field.input.type.setVal.call(field.input, val);\n            field._inputOnChange();\n            return field;\n        };\n        field.validate = callback => {\n            const val = field.getVal();\n            let hasError = false;\n            let hasWarning = false;\n            field.input._result.update();\n            // simple validator\n            if (field.input.isRequired === true) {\n                if (val === undefined) {\n                    hasError = true;\n                }\n                else if (val === false || val === null) {\n                    hasError = true;\n                }\n                else if (typeof val === \"number\" && isNaN(val) === true) {\n                    hasError = true;\n                }\n                else if ((val.length !== undefined) && val.length === 0) {\n                    hasError = true;\n                }\n            }\n            if (typeof field.input.min === \"number\") {\n                if (typeof val === \"number\") {\n                    if (field.input.min > val) {\n                        hasError = true;\n                    }\n                }\n                else if (typeof val === \"string\" && val !== \"\") {\n                    if (field.input.min > parseInt(val, 10)) {\n                        hasError = true;\n                    }\n                }\n                else if (val instanceof Array) {\n                    if (field.input.min > val.length) {\n                        hasError = true;\n                    }\n                }\n            }\n            if (typeof field.input.max === \"number\") {\n                if (typeof val === \"number\") {\n                    if (field.input.max < val) {\n                        hasError = true;\n                    }\n                }\n                else if (typeof val === \"string\" && val !== \"\") {\n                    if (field.input.max < parseInt(val, 10)) {\n                        hasError = true;\n                    }\n                }\n                else if (val instanceof Array) {\n                    if (field.input.max < val.length) {\n                        hasError = true;\n                    }\n                }\n            }\n            if (field.input.minLength && field.input.minLength > (val.length || (val.toString && val.toString().length) || 0) && (typeof val === \"string\" && val !== \"\")) {\n                hasError = true;\n            }\n            if (field.input.maxLength && field.input.maxLength < (val.length || (val.toString && val.toString().length) || 0)) {\n                hasError = true;\n            }\n            // validators\n            const q = [];\n            field.input.validators.forEach(function (v) {\n                q.push(v);\n            });\n            function fin() {\n                if (field.input._result.innerHTML === \"\") {\n                    field.container.removeClassName(\"flagrate-has-result\");\n                }\n                else {\n                    field.container.addClassName(\"flagrate-has-result\");\n                }\n                if (hasError) {\n                    field.container.removeClassName(\"flagrate-has-warning\");\n                    field.container.removeClassName(\"flagrate-has-success\");\n                    field.container.addClassName(\"flagrate-has-error\");\n                }\n                else if (hasWarning) {\n                    field.container.removeClassName(\"flagrate-has-error\");\n                    field.container.removeClassName(\"flagrate-has-success\");\n                    field.container.addClassName(\"flagrate-has-warning\");\n                }\n                else {\n                    field.container.removeClassName(\"flagrate-has-error\");\n                    field.container.removeClassName(\"flagrate-has-warning\");\n                    field.container.addClassName(\"flagrate-has-success\");\n                }\n                field._hasError = hasError;\n                field._hasWarning = hasWarning;\n                if (callback) {\n                    callback(!hasError);\n                }\n            }\n            function done(result, message) {\n                switch (result) {\n                    case true:\n                    case \"success\":\n                        break;\n                    case null:\n                    case \"warning\":\n                        hasWarning = true;\n                        break;\n                    case false:\n                    case \"error\":\n                        hasError = true;\n                        break;\n                }\n                if (message) {\n                    new Element(\"li\").insertText(message).insertTo(field.input._result);\n                }\n                run();\n            }\n            function run() {\n                if (q.length === 0 || hasError === true) {\n                    return fin();\n                }\n                let v = q.shift();\n                if (typeof v === \"function\") {\n                    v.call(field.input, val, done);\n                }\n                else if (typeof val === \"string\" && val !== \"\") {\n                    if (v.regexp.test(val)) {\n                        done(true, v.success);\n                    }\n                    else {\n                        done(false, v.error);\n                    }\n                }\n                else {\n                    done(true);\n                }\n            }\n            run();\n        };\n        field._checkRefs = () => {\n            let rerend = false;\n            for (let i = 0, l = field._refs.length, refField; i < l; i++) {\n                refField = field._refs[i];\n                if (refField._dependsIsOk !== this._checkFieldDepends(refField)) {\n                    refField._checkRefs();\n                    rerend = true;\n                }\n            }\n            if (rerend === true) {\n                this._requestRender();\n            }\n        };\n        field._inputOnChange = () => {\n            // validation\n            field.validate();\n            // dependency\n            field._checkRefs();\n        };\n        // listen change event\n        if (field.input && field.input.type) {\n            const changeEvents = field.input.type.changeEvents || [\"change\"];\n            changeEvents.forEach(eventName => {\n                field.input.element.addEventListener(eventName, field._inputOnChange);\n            });\n        }\n        return this;\n    }\n}\nForm.idCounter = 0;\n/*?\n    flagrate.Form.inputValidator -> Object\n\r\n    #### Built-in validators\n\r\n    * numeric\n    * alphanumeric\n\r\n    #### Basic validator\n\r\n        // success and error messages are optional\n        { regexp: /RegExp/, success: \"String\", error: \"String\" }\n        // warning state is not available in this way, see Advanced.\n\r\n    #### Advanced validator\n\r\n        // Sync or Async validation\n        function (input, done) { done(result, message); }// message is optional\n\r\n        // Examples\n        function (input, done) { done(true); }// success\n        function (input, done) { done(null); }// warning\n        function (input, done) { done(false); }// error\n        function (input, done) { done(\"success\"); }// success\n        function (input, done) { done(\"warning\"); }// warning\n        function (input, done) { done(\"error\"); }// error\n        function (input, done) { done(true, \"...\"); }// success with message\n        function (input, done) { done(null, \"...\"); }// warning with message\n        function (input, done) { done(false, \"...\"); }// error with message\n\r\n    #### Example: adding error message to built-in validators\n\r\n        flagrate.Form.inputValidator.numeric.error = \"Please enter a numbers.\";\n        flagrate.Form.inputValidator.alphanumeric.error = \"Please enter a alphanumeric.\";\n\r\n    #### Example: add the custom validator to Flagrate (to create plugin)\n\r\n        flagrate.Form.inputValidator.hostname = {\n            regexp: /^[a-z0-9]+(-[a-z0-9]+)*(\\.([a-z0-9]+(-[a-z0-9]+)*))*$/i,\n            error: \"Please enter a valid hostname string.\"\n        };\n**/\nForm.inputValidator = {\n    numeric: {\n        regexp: /^[0-9]+$/\n    },\n    alphanumeric: {\n        regexp: /^[a-z0-9]+$/i\n    }\n};\n/*?\n    flagrate.Form.inputType -> Object\n\r\n    #### Built-in input types\n\r\n    * [text](#text-string-) -> `String`\n    * [password](#password-string-) -> `String`\n    * [textarea](#textarea-string-) -> `String`\n    * [number](#number-number-) -> `Number`\n    * [combobox](#combobox-string-) -> `String`\n    * [checkbox](#checkbox-boolean-) -> `Boolean`\n    * [checkboxes](#checkboxes-array-) -> `Array`\n    * [switch](#switch-boolean-) -> `Boolean`\n    * [radios](#radios-any-) -> `any`\n    * [select](#select-any-array-) -> `any`|`Array`\n    * [file](#file-file-) -> `File`\n    * [files](#files-filelist-) -> `FileList`\n**/\nForm.inputType = {\n    /*?\n        #### text -> `String`\n        most basic single-line text input. (uses flagrate.TextInput)\n\r\n        * `placeholder` (String):\n        * `icon`        (String):\n        * `maxLength`   (Number):\n    **/\n    text: {\n        changeEvents: [\"change\", \"keyup\"],\n        create() {\n            // return to define this.element\n            return new TextInput({\n                placeholder: this.placeholder,\n                icon: this.icon,\n                attribute: {\n                    maxlength: this.maxLength\n                }\n            });\n        },\n        getVal() {\n            return this.element.getValue();\n        },\n        setVal(value) {\n            this.element.setValue(value);\n        },\n        enable() {\n            this.element.enable();\n        },\n        disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### password -> `String`\n        password input. Almost the same to [text](#text).\n    **/\n    password: {\n        changeEvents: [\"change\", \"keyup\"],\n        create() {\n            return new TextInput({\n                placeholder: this.placeholder,\n                icon: this.icon,\n                attribute: {\n                    type: \"password\",\n                    maxlength: this.maxLength\n                }\n            });\n        },\n        getVal() {\n            return this.element.getValue();\n        },\n        setVal(value) {\n            this.element.setValue(value);\n        },\n        enable() {\n            this.element.enable();\n        },\n        disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### textarea -> `String`\n        textarea input. (uses flagrate.TextArea)\n\r\n        * `placeholder` (String):\n        * `icon`        (String):\n        * `maxLength`   (Number):\n    **/\n    textarea: {\n        changeEvents: [\"change\", \"keyup\"],\n        create() {\n            return new TextArea({\n                placeholder: this.placeholder,\n                icon: this.icon,\n                attribute: {\n                    maxlength: this.maxLength\n                }\n            });\n        },\n        getVal() {\n            return this.element.getValue();\n        },\n        setVal(value) {\n            this.element.setValue(value);\n        },\n        enable() {\n            this.element.enable();\n        },\n        disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### number -> `Number`\n        number input. (uses flagrate.TextInput)\n\r\n        * `placeholder` (String):\n        * `icon`        (String):\n        * `min`         (Number):\n        * `max`         (Number):\n        * `maxLength`   (Number):\n    **/\n    number: {\n        changeEvents: [\"change\", \"keyup\"],\n        create() {\n            return new TextInput({\n                placeholder: this.placeholder,\n                icon: this.icon,\n                attribute: {\n                    type: \"number\",\n                    inputmode: \"numeric\",\n                    min: this.min,\n                    max: this.max,\n                    maxlength: this.maxLength\n                }\n            });\n        },\n        getVal() {\n            return parseFloat(this.element.getValue());\n        },\n        setVal(value) {\n            this.element.setValue(value);\n        },\n        enable() {\n            this.element.enable();\n        },\n        disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### combobox -> `String`\n        combobox input. (uses flagrate.ComboBox)\n\r\n        * `placeholder` (String):\n        * `icon`        (String):\n        * `maxLength`   (Number):\n        * `items`       (Array): of String values.\n    **/\n    combobox: {\n        changeEvents: [\"change\", \"keyup\"],\n        create() {\n            return new ComboBox({\n                placeholder: this.placeholder,\n                icon: this.icon,\n                items: this.items,\n                attribute: {\n                    maxlength: this.maxLength\n                }\n            });\n        },\n        getVal() {\n            return this.element.getValue();\n        },\n        setVal(value) {\n            this.element.setValue(value);\n        },\n        enable() {\n            this.element.enable();\n        },\n        disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### checkbox -> `Boolean`\n        Checkbox input. (uses flagrate.Checkbox)\n\r\n        * `label`       (String):\n        * `labelHTML`   (String):\n        * `icon`        (String):\n    **/\n    checkbox: {\n        create() {\n            return new Checkbox({\n                icon: this.icon,\n                label: this.label,\n                labelHTML: this.labelHTML\n            });\n        },\n        getVal() {\n            return this.element.isChecked();\n        },\n        setVal(value) {\n            if (value) {\n                this.element.check();\n            }\n            else {\n                this.element.uncheck();\n            }\n        },\n        enable() {\n            this.element.enable();\n        },\n        disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### checkboxes -> `Array`\n        Checkboxes input. (uses flagrate.Checkboxes)\n\r\n        * `items` (Array):\n    **/\n    checkboxes: {\n        create() {\n            return new Checkboxes({\n                items: this.items\n            });\n        },\n        getVal() {\n            return this.element.getValues();\n        },\n        setVal(values) {\n            this.element.setValues(values);\n        },\n        enable() {\n            this.element.enable();\n        },\n        disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### switch -> `Boolean`\n        Switch input. (uses flagrate.Switch)\n    **/\n    \"switch\": {\n        create() {\n            return new Switch();\n        },\n        getVal() {\n            return this.element.isOn();\n        },\n        setVal(value) {\n            if (value) {\n                this.element.switchOn();\n            }\n            else {\n                this.element.switchOff();\n            }\n        },\n        enable() {\n            this.element.enable();\n        },\n        disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### radios -> `any`\n        Radio buttons input. (uses flagrate.Radios)\n\r\n        * `items` (Array):\n    **/\n    radios: {\n        create() {\n            return new Radios({\n                items: this.items\n            });\n        },\n        getVal() {\n            return this.element.getValue();\n        },\n        setVal(value) {\n            this.element.setValue(value);\n        },\n        enable() {\n            this.element.enable();\n        },\n        disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### select -> `any`|`array`\n        Select input. (uses flagrate.Select)\n\r\n        * `items` (Array):\n        * `listView` (Boolean; default `false`):\n        * `multiple` (Boolean; default `false`):\n        * `max` (Number; default `-1`):\n        * `selectedIndex` (Number):\n        * `selectedIndexes` (Array): of Number\n    **/\n    select: {\n        create() {\n            return new Select({\n                items: this.items,\n                listView: this.listView,\n                multiple: this.multiple,\n                max: this.max,\n                selectedIndex: this.selectedIndex,\n                selectedIndexes: this.selectedIndexes\n            });\n        },\n        getVal() {\n            return (this.element.multiple === true) ? this.element.getValues() : this.element.getValue();\n        },\n        setVal(val) {\n            if (this.element.multiple === false) {\n                val = [val];\n            }\n            else {\n                this.element.deselectAll();\n            }\n            for (let i = 0, l = val.length, m = this.element.items.length; i < l; i++) {\n                for (let j = 0; j < m; j++) {\n                    if (val[i] === this.element.items[j].value) {\n                        this.element.select(j);\n                        break;\n                    }\n                }\n            }\n        },\n        enable() {\n            this.element.enable();\n        },\n        disable() {\n            this.element.disable();\n        }\n    },\n    /*?\n        #### file -> `File`\n        File input for [File API](http://www.w3.org/TR/file-upload/)\n\r\n        * `accept` (String): pass to `accept` attribute value.\n        * `acceptTypes` (Array): Array of MIME type string.\n    **/\n    file: {\n        create() {\n            return new Element(\"input\", {\n                type: \"file\",\n                accept: this.accept || (this.acceptTypes ? this.acceptTypes.join(\",\") : undefined)\n            });\n        },\n        getVal() {\n            return this.element.files[0];\n        },\n        setVal(file) {\n            this.element.files[0] = file;\n        },\n        enable() {\n            this.element.writeAttribute(\"disabled\", false);\n        },\n        disable() {\n            this.element.writeAttribute(\"disabled\", true);\n        }\n    },\n    /*?\n        #### files -> `FileList`\n        File input for [File API](http://www.w3.org/TR/file-upload/)\n\r\n        * `accept` (String): pass to `accept` attribute value.\n        * `acceptTypes` (Array): Array of MIME type string.\n    **/\n    files: {\n        create() {\n            return new Element(\"input\", {\n                type: \"file\",\n                accept: this.accept || (this.acceptTypes ? this.acceptTypes.join(\",\") : undefined),\n                multiple: true\n            });\n        },\n        getVal() {\n            return this.element.files;\n        },\n        setVal(files) {\n            this.element.files = files;\n        },\n        enable() {\n            this.element.writeAttribute(\"disabled\", false);\n        },\n        disable() {\n            this.element.writeAttribute(\"disabled\", true);\n        }\n    }\n};\nexport function createForm(option) {\n    return new Form(option);\n}\n\n//# sourceMappingURL=form.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { Element } from \"./element\";\nimport { Button } from \"./button\";\nimport { Checkbox } from \"./checkbox\";\nimport { Toolbar } from \"./toolbar\";\nimport { ContextMenu } from \"./context-menu\";\n/*?\n    flagrate.createGrid(option)\n    new flagrate.Grid(option)\n    - option (Object) - configuration for the grid.\n\r\n    Create and initialize the grid.\n\r\n    #### option\n\r\n    * `id`                       (String): `id` attribute of container.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `cols`                     (Array): of col object.\n    * `rows`                     (Array): of row object.\n    * `pagination`               (Boolean; default `false`):\n    * `numberOfRowsPerPage`      (Number; default `20`): pagination.\n    * `fill`                     (Boolean; default `false`):\n    * `headless`                 (Boolean; default `false`):\n    * `multiSelect`              (Boolean; default `false`):\n    * `disableCheckbox`          (Boolean; default `false`):\n    * `disableSelect`            (Boolean; default `false`):\n    * `disableSort`              (Boolean; default `false`):\n    * `disableFilter`            (Boolean; default `false`):\n    * `disableResize`            (Boolean; default `false`):\n    * `onSelect`                 (Function):\n    * `onDeselect`               (Function):\n    * `onClick`                  (Function):\n    * `onDblClick`               (Function):\n    * `onRender`                 (Function):\n    * `onRendered`               (Function):\n    * `postProcessOfRow`         (Function):\n\r\n    #### col\n\r\n    * `id`                       (String): `id` attribute of `th`\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): styling of `th` (using flagrate.Element.setStyle)\n    * `key`                      (String; required):\n    * `label`                    (String; default `\"\"`):\n    * `icon`                     (String):\n    * `align`                    (String):\n    * `width`                    (Number):\n    * `disableSort`              (Boolean; default `false`):\n    * `disableResize`            (Boolean; default `false`):\n\r\n    #### row\n\r\n    * `id`                       (String): `id` attribute of `tr`\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): styling of `tr` (using flagrate.Element.setStyle)\n    * `cell`                     (Object|String; default `{}`): of cell object. or String for text.\n    * `menuItems`                (Array): of Menu items.\n    * `isSelected`               (Boolean):\n    * `onSelect`                 (Function):\n    * `onDeselect`               (Function):\n    * `onClick`                  (Function):\n    * `onDblClick`               (Function):\n    * `postProcess`              (Function):\n\r\n    #### cell\n\r\n    * `id`                       (String): `id` attribute of `td`\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): styling of `td` (using flagrate.Element.setStyle)\n    * `text`                     (String):\n    * `html`                     (String):\n    * `element`                  (Element):\n    * `icon`                     (String):\n    * `sortAlt`                  (Number|String):\n    * `onClick`                  (Function):\n    * `onDblClick`               (Function):\n    * `postProcess`              (Function):\n**/\nexport class Grid {\n    constructor(_opt = {}) {\n        this._opt = _opt;\n        this._cols = [];\n        this._rows = [];\n        this._pagePosition = 0;\n        this._selectedRows = [];\n        this._sortedByKey = null;\n        this._sortedByAsc = null;\n        this.element = new Element(\"div\", { \"class\": \"flagrate flagrate-grid\" });\n        this._head = new Element(\"div\", { \"class\": \"flagrate-grid-head\" }).insertTo(this.element);\n        this._thead = new Element(\"thead\").insertTo(new Element(\"table\").insertTo(this._head));\n        this._tr = new Element(\"tr\").insertTo(this._thead);\n        this._body = new Element(\"div\", { \"class\": \"flagrate-grid-body\" }).insertTo(this.element);\n        this._tbody = new Element(\"tbody\").insertTo(new Element(\"table\").insertTo(this._body));\n        this._style = new Element(\"style\").insertTo(this.element);\n        this._id = \"flagrate-grid-\" + (++Grid.idCounter).toString(10);\n        if (_opt.id) {\n            this.element.writeAttribute(\"id\", _opt.id);\n        }\n        if (_opt.className) {\n            this.element.addClassName(_opt.className);\n        }\n        if (_opt.attribute) {\n            this.element.writeAttribute(_opt.attribute);\n        }\n        if (_opt.style) {\n            this.element.setStyle(_opt.style);\n        }\n        if (_opt.cols) {\n            this._cols = _opt.cols;\n        }\n        if (_opt.rows) {\n            this._rows = _opt.rows;\n        }\n        if (_opt.colMinWidth === undefined) {\n            _opt.colMinWidth = 16;\n        }\n        if (_opt.pagination === undefined) {\n            _opt.pagination = false;\n        }\n        if (!_opt.numberOfRowsPerPage) {\n            _opt.numberOfRowsPerPage = 20;\n        }\n        if (_opt.fill === undefined) {\n            _opt.fill = false;\n        }\n        if (_opt.headless === true) {\n            _opt.disableSort = true;\n            _opt.disableResize = true;\n            this.element.addClassName(\"flagrate-grid-headless\");\n        }\n        if (_opt.multiSelect === undefined) {\n            _opt.multiSelect = false;\n        }\n        if (_opt.disableCheckbox === undefined) {\n            _opt.disableCheckbox = false;\n        }\n        if (_opt.disableSelect === undefined) {\n            _opt.disableSelect = false;\n        }\n        if (_opt.disableSort === undefined) {\n            _opt.disableSort = false;\n        }\n        /* if (_opt.disableFilter === undefined) {\n            _opt.disableFilter = false;\n        } */\n        if (_opt.disableResize === undefined) {\n            _opt.disableResize = false;\n        }\n        this.onSelect = _opt.onSelect;\n        this.onDeselect = _opt.onDeselect;\n        this.onClick = _opt.onClick;\n        this.onDblClick = _opt.onDblClick;\n        this.onRender = _opt.onRender;\n        this.onRendered = _opt.onRendered;\n        this.postProcessOfRow = _opt.postProcessOfRow;\n        this._create()._requestRender();\n    }\n    get headless() {\n        return this.element.hasClassName(\"flagrate-grid-headless\");\n    }\n    set headless(enable) {\n        if (enable) {\n            this.element.addClassName(\"flagrate-grid-headless\");\n        }\n        else {\n            this.element.removeClassName(\"flagrate-grid-headless\");\n        }\n    }\n    get fill() {\n        return this.element.hasClassName(\"flagrate-grid-fill\");\n    }\n    set fill(enable) {\n        if (enable) {\n            this.element.addClassName(\"flagrate-grid-fill\");\n            this._body.onscroll = this._createBodyOnScrollHandler();\n        }\n        else {\n            this.element.removeClassName(\"flagrate-grid-fill\");\n            this.element.onscroll = this._createOnScrollHandler();\n        }\n        this._requestRender();\n    }\n    get rows() {\n        return this._rows;\n    }\n    set rows(rows) {\n        this._rows = rows;\n        this._requestRender();\n    }\n    get sortedByKey() {\n        return this._sortedByKey;\n    }\n    get sortedByAsc() {\n        return this._sortedByAsc;\n    }\n    get selectedRows() {\n        return this.getSelectedRows();\n    }\n    set selectedRows(rows) {\n        this.select(rows);\n    }\n    insertTo(element, pos) {\n        return this.element.insertTo(element, pos) && this;\n    }\n    on(eventType, listener, useCapture) {\n        return this.element.on(eventType, listener, useCapture) && this;\n    }\n    off(eventType, listener, useCapture) {\n        return this.element.off(eventType, listener, useCapture) && this;\n    }\n    select(a) {\n        let rows;\n        if (Array.isArray(a) === true) {\n            rows = a;\n        }\n        else {\n            rows = [];\n            for (let i = 0, l = arguments.length; i < l; i++) {\n                rows.push(arguments[i]);\n            }\n        }\n        if (this._opt.multiSelect === false) {\n            this.deselectAll();\n        }\n        for (let i = 0, l = rows.length; i < l; i++) {\n            let row = rows[i];\n            if (typeof row === \"number\") {\n                row = this._rows[row];\n            }\n            row.isSelected = true;\n            if (row._tr && row._tr.hasClassName(\"flagrate-grid-row-selected\") === true) {\n                continue;\n            }\n            this._selectedRows.push(row);\n            if (row._tr) {\n                row._tr.addClassName(\"flagrate-grid-row-selected\");\n            }\n            if (row._checkbox) {\n                row._checkbox.check();\n                setTimeout(() => {\n                    if (row.isSelected === true) {\n                        row._checkbox.check();\n                    }\n                }, 0);\n            }\n            if (row.onSelect) {\n                row.onSelect.call(this, window.event, row, this);\n            }\n            if (this.onSelect) {\n                this.onSelect(window.event, row, this);\n            }\n        }\n        if (this._selectedRows.length !== 0 && this._checkbox) {\n            this._checkbox.check();\n        }\n        this.element.fire(\"change\", { targetGrid: this });\n        return this;\n    }\n    deselect(a) {\n        let rows;\n        if (Array.isArray(a)) {\n            rows = a;\n        }\n        else {\n            rows = [];\n            for (let i = 0, l = arguments.length; i < l; i++) {\n                rows.push(arguments[i]);\n            }\n        }\n        for (let i = 0, l = rows.length; i < l; i++) {\n            let row = rows[i];\n            if (typeof row === \"number\") {\n                row = this._rows[row];\n            }\n            row.isSelected = false;\n            if (row._tr && row._tr.hasClassName(\"flagrate-grid-row-selected\") === false) {\n                continue;\n            }\n            this._selectedRows.splice(this._selectedRows.indexOf(row), 1);\n            if (row._tr) {\n                row._tr.removeClassName(\"flagrate-grid-row-selected\");\n            }\n            if (row._checkbox) {\n                row._checkbox.uncheck();\n                setTimeout(() => {\n                    if (row.isSelected === false) {\n                        row._checkbox.uncheck();\n                    }\n                }, 0);\n            }\n            if (row.onDeselect) {\n                row.onDeselect.call(this, window.event, row, this);\n            }\n            if (this.onDeselect) {\n                this.onDeselect(window.event, row, this);\n            }\n        }\n        if (this._selectedRows.length === 0 && this._checkbox) {\n            this._checkbox.uncheck();\n        }\n        this.element.fire(\"change\", { targetGrid: this });\n        return this;\n    }\n    /** select all rows */\n    selectAll() {\n        return this.select(this._rows);\n    }\n    /** deselect all rows */\n    deselectAll() {\n        return this.deselect(this._rows);\n    }\n    /** get selected rows */\n    getSelectedRows() {\n        return this._selectedRows;\n    }\n    /** get values of selected rows */\n    getValues() {\n        return this._selectedRows.map(row => getValue.call(row));\n    }\n    /** sort rows by key */\n    sort(key, isAsc) {\n        if (isAsc === undefined) {\n            isAsc = true;\n        }\n        this._rows.sort((a, b) => {\n            let A = 0;\n            let B = 0;\n            const cellA = a.cell[key];\n            const cellB = b.cell[key];\n            if (typeof cellA === \"object\") {\n                A = (cellA.sortAlt !== undefined) ? cellA.sortAlt : cellA.text || cellA.html || (cellA.element && cellA.element.innerHTML) || (cellA._div && cellA._div.innerHTML) || 0;\n            }\n            else {\n                A = cellA || 0;\n            }\n            if (typeof cellB === \"object\") {\n                B = (cellB.sortAlt !== undefined) ? cellB.sortAlt : cellB.text || cellB.html || (cellB.element && cellB.element.innerHTML) || (cellB._div && cellB._div.innerHTML) || 0;\n            }\n            else {\n                B = cellB || 0;\n            }\n            return A === B ? 0 : (A > B ? 1 : -1);\n        });\n        if (isAsc === false) {\n            this._rows.reverse();\n        }\n        for (let i = 0, l = this._cols.length; i < l; i++) {\n            if (this._cols[i].key === key) {\n                if (isAsc) {\n                    this._cols[i]._th.addClassName(\"flagrate-grid-col-sorted-asc\");\n                    this._cols[i]._th.removeClassName(\"flagrate-grid-col-sorted-desc\");\n                }\n                else {\n                    this._cols[i]._th.addClassName(\"flagrate-grid-col-sorted-desc\");\n                    this._cols[i]._th.removeClassName(\"flagrate-grid-col-sorted-asc\");\n                }\n                this._cols[i].isSorted = true;\n                this._cols[i].isAsc = isAsc;\n                this._sortedByKey = key;\n                this._sortedByAsc = isAsc;\n            }\n            else {\n                if (this._cols[i].isSorted) {\n                    this._cols[i]._th.removeClassName(\"flagrate-grid-col-sorted-asc\").removeClassName(\"flagrate-grid-col-sorted-desc\");\n                }\n                this._cols[i].isSorted = false;\n                this._cols[i].isAsc = null;\n            }\n        }\n        this._requestRender();\n        return this;\n    }\n    unshift(r) {\n        if (Array.isArray(r) === true) {\n            for (let i = 0, l = r.length; i < l; i++) {\n                this._rows.unshift(r[i]);\n            }\n        }\n        else {\n            this._rows.unshift(r);\n        }\n        if (this._sortedByKey === null) {\n            this._requestRender();\n        }\n        else {\n            this.sort(this._sortedByKey, this._sortedByAsc);\n        }\n        return this._rows.length;\n    }\n    push(r) {\n        if (Array.isArray(r) === true) {\n            for (let i = 0, l = r.length; i < l; i++) {\n                this._rows.push(r[i]);\n            }\n        }\n        else {\n            this._rows.push(r);\n        }\n        if (this._sortedByKey === null) {\n            this._requestRender();\n        }\n        else {\n            this.sort(this._sortedByKey, this._sortedByAsc);\n        }\n        return this._rows.length;\n    }\n    shift(c) {\n        const count = c || 1;\n        const removes = [];\n        for (let i = 0, l = this._rows.length; i < l && i < count; i++) {\n            removes.push(this._rows.shift());\n        }\n        this._requestRender();\n        return !c ? removes[0] : removes;\n    }\n    pop(c) {\n        const count = c || 1;\n        const removes = [];\n        for (let i = 0, l = this._rows.length; i < l && i < count; i++) {\n            removes.push(this._rows.pop());\n        }\n        this._requestRender();\n        return !c ? removes[0] : removes;\n    }\n    splice(index, c, r) {\n        c = typeof c === \"undefined\" ? this._rows.length - index : c;\n        const removes = this._rows.splice(index, c);\n        if (r) {\n            if (r instanceof Array === false) {\n                r = [r];\n            }\n            for (let i = 0, l = r.length; i < l; i++) {\n                this._rows.splice(index + i, 0, r[i]);\n            }\n        }\n        if (this._sortedByKey === null) {\n            this._requestRender();\n        }\n        else {\n            this.sort(this._sortedByKey, this._sortedByAsc);\n        }\n        return removes;\n    }\n    indexOf(row, fromIndex) {\n        return this._rows.indexOf(row, fromIndex);\n    }\n    removeRow(r) {\n        const removes = [];\n        let bulk = true;\n        if (r instanceof Array === false) {\n            bulk = false;\n            r = [r];\n        }\n        for (let i = 0, l = r.length; i < l; i++) {\n            const index = this.indexOf(r[i]);\n            if (index !== -1) {\n                removes.push(this.splice(index, 1));\n            }\n        }\n        return bulk ? removes : removes[0];\n    }\n    disable() {\n        this.element.addClassName(\"flagrate-disabled\");\n        return this;\n    }\n    enable() {\n        this.element.removeClassName(\"flagrate-disabled\");\n        return this;\n    }\n    isEnabled() {\n        return !this.element.hasClassName(\"flagrate-disabled\");\n    }\n    _create() {\n        if (this._opt.disableCheckbox === false && this._opt.disableSelect === false && this._opt.multiSelect === true) {\n            this._checkbox = new Checkbox({\n                onCheck: this.selectAll.bind(this),\n                onUncheck: this.deselectAll.bind(this)\n            }).insertTo(new Element(\"th\", { \"class\": \"flagrate-grid-cell-checkbox\" }).insertTo(this._tr));\n        }\n        for (let i = 0, l = this._cols.length; i < l; i++) {\n            let col = this._cols[i];\n            col._id = `${this._id}-col-${col.key}`;\n            col._th = new Element(\"th\").insertTo(this._tr);\n            if (col.id) {\n                col._th.writeAttribute(\"id\", col.id);\n            }\n            if (col.className) {\n                col._th.writeAttribute(\"class\", col.className);\n            }\n            if (col.attribute) {\n                col._th.writeAttribute(col.attribute);\n            }\n            if (col.style) {\n                col._th.setStyle(col.style);\n            }\n            col._th.addClassName(col._id);\n            const width = !!col.width ? (col.width.toString(10) + \"px\") : \"auto\";\n            this._style.insertText(`.${col._id}{width:${width}}`);\n            if (col.align) {\n                col._th.style.textAlign = col.align;\n            }\n            col._div = new Element().insertTo(col._th);\n            if (col.label) {\n                col._div.updateText(col.label);\n            }\n            if (col.icon) {\n                col._div.addClassName(\"flagrate-icon\");\n                col._div.setStyle({\n                    backgroundImage: \"url(\" + col.icon + \")\"\n                });\n            }\n            if (this._opt.disableResize === false && !col.disableResize) {\n                col._resizeHandle = new Element(\"div\", {\n                    \"class\": \"flagrate-grid-col-resize-handle\"\n                }).insertTo(this.element);\n                col._resizeHandle.onmousedown = this._createResizeHandleOnMousedownHandler(col);\n            }\n            if (this._opt.disableSort === false && !col.disableSort) {\n                col._th.addClassName(\"flagrate-grid-col-sortable\");\n                col._th.onclick = this._createColOnClickHandler(col);\n            }\n        }\n        this._lastCol = new Element(\"th\", { \"class\": this._id + \"-col-last\" }).insertTo(this._tr);\n        this._style.insertText(\".\" + this._id + \"-col-last:after{right:0}\");\n        // pagination (testing)\n        if (this._opt.pagination) {\n            this.element.addClassName(\"flagrate-grid-pagination\");\n            // pager container\n            this._pager = new Toolbar({\n                className: \"flagrate-grid-pager\",\n                items: [\n                    {\n                        key: \"rn\",\n                        element: new Element(\"span\").insertText(\"-\")\n                    },\n                    {\n                        key: \"first\",\n                        element: new Button({\n                            className: \"flagrate-grid-pager-first\",\n                            onSelect: () => {\n                                this._pagePosition = 0;\n                                this._requestRender();\n                            }\n                        })\n                    },\n                    {\n                        key: \"prev\",\n                        element: new Button({\n                            className: \"flagrate-grid-pager-prev\",\n                            onSelect: () => {\n                                --this._pagePosition;\n                                this._requestRender();\n                            }\n                        })\n                    },\n                    {\n                        key: \"num\",\n                        element: new Element(\"span\", { \"class\": \"flagrate-grid-pager-num\" }).insertText(\"-\")\n                    },\n                    {\n                        key: \"next\",\n                        element: new Button({\n                            className: \"flagrate-grid-pager-next\",\n                            onSelect: () => {\n                                ++this._pagePosition;\n                                this._requestRender();\n                            }\n                        })\n                    },\n                    {\n                        key: \"last\",\n                        element: new Button({\n                            className: \"flagrate-grid-pager-last\",\n                            onSelect: () => {\n                                this._pagePosition = Math.floor(this._rows.length / this._opt.numberOfRowsPerPage);\n                                this._requestRender();\n                            }\n                        })\n                    }\n                ]\n            }).insertTo(this.element);\n        }\n        if (this._opt.fill) {\n            this.element.addClassName(\"flagrate-grid-fill\");\n            this._body.onscroll = this._createBodyOnScrollHandler();\n        }\n        else {\n            this.element.onscroll = this._createOnScrollHandler();\n        }\n        if (this._opt.disableResize === false) {\n            this._layoutUpdater();\n        }\n        return this;\n    }\n    _layoutUpdater() {\n        if (this._layoutInterval) {\n            clearInterval(this._layoutInterval);\n        }\n        this._layoutInterval = setInterval(() => {\n            if (this.element.exists() === false) {\n                clearInterval(this._layoutInterval);\n                return;\n            }\n            this._requestUpdateLayout();\n        }, 1000);\n    }\n    _requestUpdateLayout() {\n        if (this._layoutWidth === this.element.clientWidth) {\n            return;\n        }\n        if (this._layoutTimer) {\n            clearTimeout(this._layoutTimer);\n        }\n        this._layoutTimer = setTimeout(() => {\n            this._layoutWidth = this.element.clientWidth;\n            this._updateLayoutOfCols();\n            this._updatePositionOfResizeHandles();\n        }, 0);\n    }\n    _requestRender() {\n        if (this._renderTimer) {\n            clearTimeout(this._renderTimer);\n        }\n        this._renderTimer = setTimeout(this._render.bind(this), 0);\n        return this;\n    }\n    _render() {\n        if (!!this.onRender && this.onRender(this) === false) {\n            return this;\n        }\n        const isCheckable = (this._opt.disableCheckbox === false && this._opt.disableSelect === false && this._opt.multiSelect === true);\n        let i, j, row, col, cell, pl, pages, from, to;\n        const rl = this._rows.length;\n        const cl = this._cols.length;\n        if (this._opt.pagination) {\n            pl = 0;\n            pages = Math.ceil(rl / this._opt.numberOfRowsPerPage);\n            if (pages <= this._pagePosition) {\n                this._pagePosition = pages - 1;\n            }\n            if (this._pagePosition <= 0) {\n                this._pagePosition = 0;\n            }\n            from = this._pagePosition * this._opt.numberOfRowsPerPage;\n            to = from + this._opt.numberOfRowsPerPage;\n        }\n        this._tbody.update();\n        for (i = 0; i < rl; i++) {\n            if (this._opt.pagination) {\n                if (i < from) {\n                    continue;\n                }\n                if (i >= to) {\n                    break;\n                }\n                ++pl;\n            }\n            row = this._rows[i];\n            if (row._tr) {\n                row._tr.insertTo(this._tbody);\n                continue;\n            }\n            // init row\n            row._grid = this;\n            row._tr = new Element(\"tr\").insertTo(this._tbody);\n            if (row.id) {\n                row._tr.id = row.id;\n            }\n            if (row.className) {\n                row._tr.className = row.className;\n            }\n            if (row.attribute) {\n                row._tr.writeAttribute(row.attribute);\n            }\n            if (row.style) {\n                row._tr.setStyle(row.style);\n            }\n            if (row.onClick || this.onClick || this._opt.disableSelect === false) {\n                if (this._opt.disableSelect === false) {\n                    row._tr.addClassName(\"flagrate-grid-row-selectable\");\n                }\n                if (row.onClick || this.onClick) {\n                    row._tr.addClassName(\"flagrate-grid-row-clickable\");\n                }\n                row._tr.onclick = this._createRowOnClickHandler(row);\n            }\n            if (row.onDblClick || this.onDblClick) {\n                row._tr.ondblclick = this._createRowOnDblClickHandler(row);\n            }\n            if (isCheckable && !row._checkbox) {\n                row._checkbox = new Checkbox({\n                    onChange: this._createRowOnCheckHandler(row)\n                }).insertTo(new Element(\"td\", { \"class\": \"flagrate-grid-cell-checkbox\" }).insertTo(row._tr));\n            }\n            if (row.isSelected === true) {\n                this.select(row);\n            }\n            for (j = 0; j < cl; j++) {\n                col = this._cols[j];\n                cell = (row.cell[col.key] === undefined) ? (row.cell[col.key] = {}) : row.cell[col.key];\n                if (typeof cell === \"string\" || typeof cell === \"number\") {\n                    cell = row.cell[col.key] = { text: cell };\n                }\n                if (cell._td) {\n                    cell._td.insertTo(row._tr);\n                    continue;\n                }\n                // init cell\n                cell._td = new Element(\"td\").insertTo(row._tr);\n                if (cell.id) {\n                    cell._td.id = cell.id;\n                }\n                if (cell.className) {\n                    cell._td.className = cell.className;\n                }\n                if (cell.attribute) {\n                    cell._td.writeAttribute(cell.attribute);\n                }\n                if (cell.style) {\n                    cell._td.setStyle(cell.style);\n                }\n                if (col.align) {\n                    cell._td.style.textAlign = col.align;\n                }\n                cell._td.addClassName(col._id);\n                // init cell content\n                cell._div = new Element().insertTo(cell._td);\n                if (cell.text !== undefined) {\n                    cell._div.updateText(cell.text);\n                }\n                if (cell.html) {\n                    cell._div.update(cell.html);\n                }\n                if (cell.element) {\n                    cell._div.update(cell.element);\n                }\n                if (cell.icon) {\n                    cell._div.addClassName(\"flagrate-icon\");\n                    cell._div.style.backgroundImage = `url(${cell.icon})`;\n                }\n                if (cell.onClick) {\n                    cell._td.addClassName(\"flagrate-grid-cell-clickable\");\n                    cell._td.onclick = this._createCellOnClickHandler(cell);\n                }\n                if (cell.onDblClick) {\n                    cell._td.ondblclick = this._createCellOnDblClickHandler(cell);\n                }\n                // redefine props\n                Object.defineProperties(cell, cellProps);\n                // post-processing\n                if (cell.postProcess) {\n                    cell.postProcess.call(this, cell._td, cell, this);\n                }\n            }\n            if (!row._last) {\n                row._last = new Element(\"td\", { \"class\": this._id + \"-col-last\" });\n            }\n            row._last.insertTo(row._tr);\n            // menu\n            if (row.menuItems) {\n                this._updateRowMenu(row, row.menuItems);\n            }\n            // redefine props\n            Object.defineProperties(row, rowProps);\n            // post-processing\n            if (row.postProcess) {\n                row.postProcess.call(this, row._tr, row, this);\n            }\n            if (this.postProcessOfRow) {\n                this.postProcessOfRow(row._tr, row, this);\n            }\n        } //<--for\n        if (this._opt.pagination) {\n            this._pager.getElementByKey(\"rn\").updateText((from + 1) + \" - \" + (from + pl) + \" / \" + rl);\n            this._pager.getElementByKey(\"num\").updateText((this._pagePosition + 1) + \" / \" + pages);\n        }\n        if (this._opt.disableResize === false) {\n            if (this._opt.fill) {\n                this._head.style.right = (this._body.offsetWidth - this._body.clientWidth) + \"px\";\n                this._head.scrollLeft = this._body.scrollLeft;\n            }\n            this._requestUpdateLayout();\n        }\n        if (this.onRendered) {\n            this.onRendered(this);\n        }\n        return this;\n    }\n    _updateRowMenu(row, items) {\n        if (row._menu) {\n            row._menu.remove();\n            delete row._menu;\n        }\n        if (items && items.length !== 0) {\n            row._last.addClassName(\"flagrate-grid-cell-menu\");\n            row._menu = new ContextMenu({\n                target: row._tr,\n                items: items\n            });\n            if (!row._last.onclick) {\n                row._last.onclick = row._grid._createLastRowOnClickHandler(row);\n            }\n        }\n        else {\n            row._last.removeClassName(\"flagrate-grid-cell-menu\");\n        }\n    }\n    _updatePositionOfResizeHandles() {\n        const adj = this._opt.fill ? -this._body.scrollLeft : 0;\n        let col;\n        for (let i = 0, l = this._cols.length; i < l; i++) {\n            col = this._cols[i];\n            if (col._resizeHandle) {\n                col._resizeHandle.style.left = (col._th.offsetLeft + col._th.getWidth() + adj) + \"px\";\n            }\n        }\n    }\n    _updateLayoutOfCols(surplus) {\n        let fixed = true;\n        let minimized = 0;\n        let col;\n        for (let i = 0, l = this._cols.length; i < l; i++) {\n            col = this._cols[i];\n            if (col.width) {\n                continue;\n            }\n            let width = \"auto\";\n            const minWidth = col.minWidth === undefined ? this._opt.colMinWidth : col.minWidth;\n            if (surplus) {\n                width = surplus + \"px\";\n            }\n            else if (minWidth >= col._th.getWidth()) {\n                width = minWidth + \"px\";\n                ++minimized;\n            }\n            else {\n                fixed = false;\n            }\n            this._style.updateText(this._style.innerHTML.replace(new RegExp(\"(\" + col._id + \"{width:)([^}]*)}\"), \"$1\" + width + \"}\"));\n        }\n        if (fixed) {\n            this.element.addClassName(\"flagrate-grid-fixed\");\n        }\n        else {\n            this.element.removeClassName(\"flagrate-grid-fixed\");\n        }\n        setTimeout(() => {\n            const base = this._opt.fill ? this._body : this.element;\n            this._style.updateText(this._style.innerHTML.replace(new RegExp(\"(\" + this._id + \"-col-last:after{right:)([^}]*)}\"), \"$1\" + (base.scrollWidth - base.clientWidth - base.scrollLeft) + \"px!important}\"));\n            const _surplus = this._lastCol.getWidth();\n            if (fixed && !surplus && _surplus && minimized) {\n                this._updateLayoutOfCols(Math.floor(_surplus / minimized));\n            }\n        }, 0);\n    }\n    _createOnScrollHandler() {\n        return (e) => {\n            if (this._opt.disableResize === false) {\n                this._updateLayoutOfCols();\n            }\n        };\n    }\n    _createBodyOnScrollHandler() {\n        return (e) => {\n            this._head.style.right = (this._body.offsetWidth - this._body.clientWidth) + \"px\";\n            this._head.scrollLeft = this._body.scrollLeft;\n            if (this._opt.disableResize === false) {\n                this._updateLayoutOfCols();\n                this._updatePositionOfResizeHandles();\n            }\n        };\n    }\n    _createColOnClickHandler(col) {\n        return (e) => {\n            this.sort(col.key, !col.isAsc);\n        };\n    }\n    _createRowOnClickHandler(row) {\n        return (e) => {\n            if (/firefox/i.test(navigator.userAgent) === true) {\n                window.event = e;\n            }\n            if (this.isEnabled() === false) {\n                return;\n            }\n            if (row.onClick) {\n                row.onClick.call(this, e, row, this);\n            }\n            if (this.onClick) {\n                this.onClick(e, row, this);\n            }\n            if (this._opt.disableSelect === false) {\n                if (row.isSelected === true) {\n                    this.deselect(row);\n                }\n                else {\n                    this.select(row);\n                }\n            }\n            if (row._checkbox) {\n                row._checkbox.focus();\n            }\n            return false;\n        };\n    }\n    _createRowOnDblClickHandler(row) {\n        return (e) => {\n            if (/firefox/i.test(navigator.userAgent) === true) {\n                window.event = e;\n            }\n            if (this.isEnabled() === false) {\n                return;\n            }\n            if (row.onDblClick) {\n                row.onDblClick.call(this, e, row, this);\n            }\n            if (this.onDblClick) {\n                this.onDblClick(e, row, this);\n            }\n        };\n    }\n    _createCellOnClickHandler(cell) {\n        return (e) => {\n            if (this.isEnabled() === false) {\n                return;\n            }\n            if (cell.onClick) {\n                cell.onClick.call(this, e, cell, this);\n            }\n        };\n    }\n    _createCellOnDblClickHandler(cell) {\n        return (e) => {\n            if (this.isEnabled() === false) {\n                return;\n            }\n            if (cell.onDblClick) {\n                cell.onDblClick.call(this, e, cell, this);\n            }\n        };\n    }\n    _createRowOnCheckHandler(row) {\n        return (e) => {\n            if (this.isEnabled() === false) {\n                if (e.targetCheckbox.isChecked() === true) {\n                    e.targetCheckbox.uncheck();\n                }\n                else {\n                    e.targetCheckbox.check();\n                }\n                return;\n            }\n            if (this._opt.disableSelect === false) {\n                if (row._checkbox.isChecked() === true) {\n                    this.select(row);\n                }\n                else {\n                    this.deselect(row);\n                }\n            }\n        };\n    }\n    _createLastRowOnClickHandler(row) {\n        return (e) => {\n            if (this.isEnabled() === false) {\n                return;\n            }\n            e.stopPropagation();\n            if (row._menu) {\n                row._menu.open(e);\n            }\n        };\n    }\n    _createResizeHandleOnMousedownHandler(col) {\n        return (e) => {\n            //e.stopPropagation();\n            e.preventDefault();\n            let current = e.clientX;\n            const origin = current;\n            const onMove = (e) => {\n                e.preventDefault();\n                const delta = e.clientX - current;\n                current += delta;\n                col._resizeHandle.style.left = (parseInt(col._resizeHandle.style.left.replace(\"px\", \"\"), 10) + delta) + \"px\";\n            };\n            const onUp = (e) => {\n                e.preventDefault();\n                document.removeEventListener(\"mousemove\", onMove, true);\n                document.removeEventListener(\"mouseup\", onUp, true);\n                const minWidth = col.minWidth === undefined ? this._opt.colMinWidth : col.minWidth;\n                const delta = e.clientX - origin;\n                let width = col._th.getWidth() + delta;\n                width = col.width = Math.max(width, minWidth);\n                this._style.updateText(this._style.innerHTML.replace(new RegExp(`(${col._id}{width:)([^}]*)}`), `$1${width}px}`));\n                this._updateLayoutOfCols();\n                this._updatePositionOfResizeHandles();\n            };\n            document.addEventListener(\"mousemove\", onMove, true);\n            document.addEventListener(\"mouseup\", onUp, true);\n        };\n    }\n}\nGrid.idCounter = 0;\nexport function createGrid(a) {\n    return new Grid(a);\n}\n/** get value of row */\nfunction getValue() {\n    const row = this;\n    if (row.value !== undefined) {\n        return row.value;\n    }\n    const ret = {};\n    for (const key in row.cell) {\n        if (typeof row.cell[key] === \"object\" && row.cell[key].value !== undefined) {\n            ret[key] = row.cell[key].value;\n        }\n    }\n    return ret;\n}\nconst hiddenProp = { enumerable: false };\nconst rowProps = {\n    _checkbox: hiddenProp,\n    _grid: hiddenProp,\n    _last: hiddenProp,\n    _menu: hiddenProp,\n    _tr: hiddenProp,\n    className: hiddenProp,\n    attribute: hiddenProp,\n    style: hiddenProp,\n    postProcess: hiddenProp,\n    tr: {\n        enumerable: true,\n        get: function () {\n            return this._tr;\n        }\n    },\n    id: {\n        enumerable: true,\n        get: function () {\n            return this._tr.id || undefined;\n        },\n        set: function (id) {\n            this._tr.id = id;\n        }\n    },\n    menuItems: {\n        enumerable: true,\n        get: function () {\n            if (this._menu) {\n                return this._menu.items;\n            }\n        },\n        set: function (items) {\n            this._grid._updateRowMenu(this, items);\n        }\n    }\n};\nconst cellProps = {\n    _td: hiddenProp,\n    _div: hiddenProp,\n    className: hiddenProp,\n    attribute: hiddenProp,\n    style: hiddenProp,\n    postProcess: hiddenProp,\n    td: {\n        enumerable: true,\n        get: function () {\n            return this._td;\n        }\n    },\n    div: {\n        enumerable: true,\n        get: function () {\n            return this._div;\n        }\n    },\n    id: {\n        enumerable: true,\n        get: function () {\n            return this._td.id || undefined;\n        },\n        set: function (id) {\n            this._td.id = id;\n        }\n    },\n    align: {\n        enumerable: true,\n        get: function () {\n            return this._td.style.textAlign || undefined;\n        },\n        set: function (align) {\n            this._td.style.textAlign = align;\n        }\n    },\n    text: {\n        enumerable: false,\n        get: function () {\n            return this._div.innerText;\n        },\n        set: function (text) {\n            this._div.updateText(text);\n        }\n    },\n    html: {\n        enumerable: false,\n        get: function () {\n            return this._div.innerHTML;\n        },\n        set: function (html) {\n            this._div.update(html);\n        }\n    },\n    element: {\n        enumerable: false,\n        get: function () {\n            return this._div.firstChild;\n        },\n        set: function (element) {\n            this._div.update(element);\n        }\n    },\n    icon: {\n        enumerable: true,\n        get: function () {\n            return this._div.style.backgroundImage.replace(/(.*url\\()([^)]+)(\\).*)/, \"$2\") || undefined;\n        },\n        set: function (url) {\n            const cell = this;\n            if (url) {\n                cell._div.addClassName(\"flagrate-icon\");\n                cell._div.style.backgroundImage = `url(${url})`;\n            }\n            else {\n                cell._div.removeClassName(\"flagrate-icon\");\n                cell._div.style.backgroundImage = \"\";\n            }\n        }\n    }\n};\n\n//# sourceMappingURL=grid.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { extendObject, emptyFunction } from \"./util\";\nimport { Element } from \"./element\";\nimport * as button from \"./button\";\nimport { Buttons } from \"./buttons\";\n/*?\n    flagrate.createMenu(option)\n    new flagrate.Menu(option)\n    - option (Object) - options.\n\r\n    Menu.\n\r\n    #### option\n\r\n    * `id`                       (String): `id` attribute of container element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `items`                    (Array): of item\n    * `onSelect`                 (Function):\n\r\n    #### item\n\r\n    * `key`                      (String):\n    * `label`                    (String; default `\"\"`):\n    * `icon`                     (String):\n    * `isDisabled`               (Boolean; default `false`):\n    * `onSelect`                 (Function):\n**/\nfunction FMenu(option = {}) {\n    option.items = option.items || [];\n    this.onSelect = option.onSelect || emptyFunction;\n    const attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    // create a container\n    const container = new Element(\"div\", attr);\n    extendObject(container, this);\n    container.addClassName(\"flagrate flagrate-menu\");\n    if (option.className) {\n        container.addClassName(option.className);\n    }\n    if (option.style) {\n        container.setStyle(option.style);\n    }\n    for (let i = 0, l = option.items.length; i < l; i++) {\n        container.push(option.items[i]);\n    }\n    container.addEventListener(\"click\", (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n    });\n    container.addEventListener(\"mouseup\", (e) => {\n        e.stopPropagation();\n    });\n    return container;\n}\nexport const Menu = FMenu;\nexport function createMenu(option) {\n    return new Menu(option);\n}\nMenu.prototype = {\n    push(option) {\n        if (typeof option === \"string\") {\n            new Element(\"hr\").insertTo(this);\n        }\n        else {\n            const _onSelect = option.onSelect;\n            option.onSelect = (e, button) => {\n                if (_onSelect) {\n                    _onSelect.call(button, e, button);\n                }\n                this.onSelect(e, this);\n            };\n            const btn = new button.Button(option).insertTo(this);\n            if (option.key) {\n                btn.dataset[\"_key\"] = option.key;\n            }\n        }\n        return this;\n    },\n    getButtonByKey: Buttons.prototype.getButtonByKey,\n    getButtons: Buttons.prototype.getButtons\n};\n\n//# sourceMappingURL=menu.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { Element } from \"./element\";\nimport { Button } from \"./button\";\n/*?\n    flagrate.createModal(option)\n    new flagrate.Modal(option)\n    - option (Object) - configuration for the modal.\n\r\n    Create and initialize the modal.\n\r\n    #### option\n\r\n    * `target`                   (Element; default `document.body`):\n    * `id`                       (String):\n    * `className`                (String):\n    * `title`                    (String):\n    * `subtitle`                 (String):\n    * `text`                     (String):\n    * `html`                     (String):\n    * `element`                  (Element):\n    * `href`                     (String):\n    * `buttons`                  (Array): of button object.\n    * `sizing`                   (String;  default `\"flex\"`; `\"flex\"` | `\"full\"`):\n    * `onBeforeClose`            (Function):\n    * `onClose`                  (Function):\n    * `onShow`                   (Function):\n    * `disableCloseButton`       (Boolean; default `false`):\n    * `disableCloseByMask`       (Boolean; default `false`):\n    * `disableCloseByEsc`        (Boolean; default `false`):\n\r\n    #### button\n\r\n    * `key`                      (String):\n    * `label`                    (String; required):\n    * `icon`                     (String):\n    * `color`                    (String):\n    * `onSelect`                 (Function):\n    * `isFocused`                (Boolean; default `false`):\n    * `isDisabled`               (Boolean; default `false`):\n    * `className`                (String):\n**/\nexport class Modal {\n    constructor(_opt = {}) {\n        this._opt = _opt;\n        this._buttons = [];\n        this._close = this.close.bind(this);\n        this.__onKeydownHandler = this._onKeydownHandler.bind(this);\n        if (!_opt.target) {\n            _opt.target = document.body;\n        }\n        if (!_opt.sizing) {\n            _opt.sizing = \"flex\";\n        }\n        if (_opt.disableCloseButton === undefined) {\n            _opt.disableCloseButton = false;\n        }\n        if (_opt.disableCloseByMask === undefined) {\n            _opt.disableCloseByMask = false;\n        }\n        if (_opt.disableCloseByEsc === undefined) {\n            _opt.disableCloseByEsc = false;\n        }\n        if (_opt[\"description\"]) {\n            // description has deprecated but no schedule to remove.\n            this._opt.subtitle = _opt[\"description\"];\n        }\n        if (_opt.buttons) {\n            this._buttons = _opt.buttons;\n        }\n        if (_opt.onBeforeClose) {\n            this.onBeforeClose = _opt.onBeforeClose;\n        }\n        if (_opt.onClose) {\n            this.onClose = _opt.onClose;\n        }\n        if (_opt.onShow) {\n            this.onShow = _opt.onShow;\n        }\n        if (this._buttons.length === 0) {\n            this._buttons = [\n                {\n                    label: \"OK\",\n                    color: \"@primary\",\n                    onSelect: this._close,\n                    isFocused: true\n                }\n            ];\n        }\n        this._create();\n    }\n    get buttons() {\n        return this.getButtons();\n    }\n    get id() {\n        return this._container.id;\n    }\n    set id(id) {\n        this._container.id = id;\n    }\n    get className() {\n        return this._container.className;\n    }\n    set className(className) {\n        this._container.className = className;\n    }\n    get content() {\n        return this._content;\n    }\n    set content(div) {\n        this.setContent(div);\n    }\n    get sizing() {\n        return this._opt.sizing;\n    }\n    set sizing(sizing) {\n        this.setSizing(sizing);\n    }\n    get element() {\n        return this._opt.element;\n    }\n    set element(element) {\n        this.setElement(element);\n    }\n    get html() {\n        return this._opt.html;\n    }\n    set html(html) {\n        this.setHTML(html);\n    }\n    get text() {\n        return this._opt.text;\n    }\n    set text(text) {\n        this.setText(text);\n    }\n    get title() {\n        return this._opt.title;\n    }\n    set title(title) {\n        this.setTitle(title);\n    }\n    get subtitle() {\n        return this._opt.subtitle;\n    }\n    set subtitle(subtitle) {\n        this.setSubtitle(subtitle);\n    }\n    setId(id) {\n        this._container.id = id;\n        return this;\n    }\n    setClassName(className) {\n        this._container.className = className;\n        return this;\n    }\n    setContent(div) {\n        this._opt.content = div;\n        this._middle.update(div);\n        return this;\n    }\n    setSizing(sizing) {\n        this._container.removeClassName(`flagrate-sizing-${this._opt.sizing}`);\n        this._container.addClassName(`flagrate-sizing-${sizing}`);\n        this._opt.sizing = sizing;\n        return this;\n    }\n    setElement(element) {\n        this._opt.element = element;\n        this._content.update(element);\n        return this;\n    }\n    setHTML(html) {\n        this._opt.html = html;\n        this._content.update(html);\n        return this;\n    }\n    setText(text) {\n        this._opt.text = text;\n        this._content.updateText(text);\n        return this;\n    }\n    setTitle(title) {\n        this._opt.title = title;\n        this._title.updateText(title);\n        return this;\n    }\n    setSubtitle(subtitle) {\n        this._opt.subtitle = subtitle;\n        this._subtitle.updateText(subtitle);\n        return this;\n    }\n    visible() {\n        return this._container.hasClassName(\"flagrate-modal-visible\");\n    }\n    open() {\n        if (this.visible() === true) {\n            return this;\n        }\n        // make free\n        if (document.activeElement && document.activeElement[\"blur\"]) {\n            document.activeElement.blur();\n        }\n        window.getSelection().removeAllRanges();\n        if (this._closingTimer) {\n            clearTimeout(this._closingTimer);\n        }\n        Element.insert(this._opt.target, this._container);\n        setTimeout(() => this._container.addClassName(\"flagrate-modal-visible\"), 0);\n        // Callback: onShow\n        if (this.onShow) {\n            this.onShow(this);\n        }\n        this._positioning();\n        // focus to primary button\n        if (this._buttons[0]) {\n            this._buttons[0]._button.focus();\n        }\n        window.addEventListener(\"keydown\", this.__onKeydownHandler, true);\n        return this;\n    }\n    /** DEPRECATED */\n    show() {\n        return this.open();\n    }\n    /** DEPRECATED */\n    render() {\n        return this.open();\n    }\n    close(e) {\n        if (this.visible() === false) {\n            return this;\n        }\n        this._container.removeClassName(\"flagrate-modal-visible\");\n        if (e) {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n        // Callback: onBeforeClose\n        if (this.onBeforeClose) {\n            if (this.onBeforeClose(this, e) === false) {\n                return this; //abort closing\n            }\n        }\n        clearTimeout(this._positioningTimer);\n        this._closingTimer = setTimeout(() => this._container.remove(), 1000);\n        window.removeEventListener(\"keydown\", this.__onKeydownHandler, true);\n        // Callback: onClose\n        if (this.onClose) {\n            this.onClose(this, e);\n        }\n        return this;\n    }\n    getButtonByKey(key) {\n        let result = null;\n        const buttons = this._buttons;\n        for (let i = 0; i < buttons.length; i++) {\n            if (!buttons[i].key) {\n                continue;\n            }\n            if (buttons[i].key === key) {\n                result = buttons[i]._button;\n                break;\n            }\n        }\n        return result;\n    }\n    getButtons() {\n        return this._buttons.map(button => button._button);\n    }\n    setButtons(buttons) {\n        this._buttons = buttons;\n        this._createButtons();\n        return this;\n    }\n    _create() {\n        this._createBase();\n        this._createModal();\n        this._createButtons();\n    }\n    _createBase() {\n        this._container = new Element(\"div\", {\n            id: this._opt.id,\n            \"class\": `flagrate flagrate-modal flagrate-sizing-${this._opt.sizing}`\n        });\n        if (this._opt.className) {\n            this._container.addClassName(this._opt.className);\n        }\n        if (this._opt.target !== document.body) {\n            this._container.style.position = \"absolute\";\n        }\n        this._obi = new Element().insertTo(this._container);\n        if (this._opt.disableCloseByMask === false) {\n            this._container.addEventListener(\"click\", this._close);\n        }\n    }\n    _createModal() {\n        this._modal = new Element().insertTo(this._obi);\n        this._modal.addEventListener(\"click\", e => e.stopPropagation());\n        this._closeButton = new Button({\n            label: \"\",\n            onSelect: this._close\n        });\n        if (this._opt.disableCloseButton === false) {\n            this._closeButton.insertTo(this._modal);\n        }\n        this._header = new Element(\"hgroup\").insertTo(this._modal);\n        this._title = new Element(\"h1\").insertText(this._opt.title || \"\").insertTo(this._header);\n        this._subtitle = new Element(\"small\").insertText(this._opt.subtitle || \"\").insertTo(this._header);\n        this._middle = new Element().insertTo(this._modal);\n        if (this._opt.content) {\n            this._middle.insert(this._opt.content);\n        }\n        else {\n            this._content = new Element().insertTo(this._middle);\n            if (this._opt.element) {\n                this._content.insert(this._opt.element);\n            }\n            else if (this._opt.html) {\n                this._content.insert(this._opt.html);\n            }\n            else if (this._opt.text) {\n                this._content.insertText(this._opt.text);\n            }\n        }\n        this._footer = new Element(\"footer\").insertTo(this._modal);\n    }\n    _createButtons() {\n        if (this._footer.hasChildNodes() === true) {\n            this._footer.update();\n        }\n        this._buttons.forEach(button => {\n            button._button = new Button({\n                className: button.className,\n                label: button.label,\n                icon: button.icon,\n                color: button.color,\n                isFocused: button.isFocused || false,\n                isDisabled: button.isDisabled,\n                onSelect: e => {\n                    if (button.onSelect) {\n                        button.onSelect.call(e.targetButton, e, this);\n                    }\n                    else if (button[\"onClick\"]) {\n                        console.warn(\"ModalButton#onClick is deprecated. Use ModalButton#onSelect instead.\");\n                        button[\"onClick\"](e, this); // DEPRECATED\n                    }\n                }\n            });\n            // DEPRECATED, This is for backward compatibility.\n            button._button[\"button\"] = button;\n            button[\"button\"] = button._button;\n            button[\"disable\"] = button._button.disable.bind(button._button);\n            button[\"enable\"] = button._button.enable.bind(button._button);\n            button[\"setColor\"] = button._button.setColor.bind(button._button);\n            this._footer.insert(button._button);\n        });\n    }\n    _positioning() {\n        let baseWidth = -1;\n        let baseHeight = -1;\n        let modalWidth = -1;\n        let modalHeight = -1;\n        const update = () => {\n            if (baseWidth !== this._container.getWidth() ||\n                baseHeight !== this._container.getHeight() ||\n                modalWidth !== this._modal.getWidth() ||\n                modalHeight !== this._modal.getHeight()) {\n                baseWidth = this._container.getWidth();\n                baseHeight = this._container.getHeight();\n                modalWidth = this._modal.getWidth();\n                modalHeight = this._modal.getHeight();\n                if (this._opt.sizing === \"flex\") {\n                    if (baseWidth - 20 <= modalWidth) {\n                        this._modal.style.left = \"0\";\n                        this._middle.style.width = baseWidth + \"px\";\n                        this._middle.style.overflowX = \"auto\";\n                    }\n                    else {\n                        this._modal.style.left = Math.floor((baseWidth / 2) - (modalWidth / 2)) + \"px\";\n                        this._middle.style.width = \"\";\n                        this._middle.style.overflowX = \"visible\";\n                    }\n                    if (baseHeight - 20 <= modalHeight) {\n                        this._obi.style.top = \"10px\";\n                        this._obi.style.bottom = \"10px\";\n                        this._obi.style.height = \"\";\n                        this._middle.style.height = baseHeight - this._header.getHeight() - this._footer.getHeight() - 20 + \"px\";\n                        this._middle.style.overflowY = \"auto\";\n                    }\n                    else {\n                        this._obi.style.top = (baseHeight / 2) - (modalHeight / 2) + \"px\";\n                        this._obi.style.bottom = \"\";\n                        this._obi.style.height = modalHeight + \"px\";\n                        this._middle.style.height = \"\";\n                        this._middle.style.overflowY = \"visible\";\n                    }\n                }\n                if (this._opt.sizing === \"full\") {\n                    this._modal.style.right = \"10px\";\n                    this._modal.style.left = \"10px\";\n                    this._middle.style.overflowX = \"auto\";\n                    this._obi.style.top = \"10px\";\n                    this._obi.style.bottom = \"10px\";\n                    this._obi.style.height = \"\";\n                    this._middle.style.height = baseHeight - this._header.getHeight() - this._footer.getHeight() - 20 + \"px\";\n                    this._middle.style.overflowY = \"auto\";\n                }\n            }\n            ;\n            this._positioningTimer = setTimeout(update, 30);\n        };\n        this._positioningTimer = setTimeout(update, 0);\n    }\n    _onKeydownHandler(e) {\n        const active = document.activeElement && document.activeElement.tagName;\n        if (this.visible() === false) {\n            return;\n        }\n        if (active !== \"BODY\" && active !== \"DIV\" && active !== \"BUTTON\") {\n            return;\n        }\n        if (window.getSelection().toString() !== \"\") {\n            return;\n        }\n        let activated = false;\n        // TAB:9\n        if (e.keyCode === 9 && active !== \"BUTTON\") {\n            activated = true;\n            if (this._closeButton) {\n                this._closeButton.focus();\n            }\n            else if (this._buttons[0]) {\n                this._buttons[0]._button.focus();\n            }\n        }\n        // ENTER:13\n        if (e.keyCode === 13 && this._buttons[0] && active !== \"BUTTON\") {\n            activated = true;\n            this._buttons[0]._button.click();\n        }\n        // ESC:27\n        if (e.keyCode === 27 && this._opt.disableCloseByEsc === false) {\n            activated = true;\n            this.close();\n        }\n        if (activated === true) {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n    }\n}\nexport function createModal(option) {\n    return new Modal(option);\n}\n\n//# sourceMappingURL=modal.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { Element } from \"./element\";\n/*?\n    flagrate.createNotify(option)\n    new flagrate.Notify(option)\n    - option (Object) - configuration for the notifications.\n\r\n    Initialize the notifications.\n\r\n    #### option\n\r\n    * `target`                (Element; default `document.body`):\n    * `className`             (String):\n    * `disableDesktopNotify`  (Boolean; default `false`):\n    * `disableFocusDetection` (Boolean; default `false`):\n    * `hAlign`                (String;  default `\"right\"`; `\"right\"` | `\"left\"`):\n    * `vAlign`                (String;  default `\"bottom\"`; `\"top\"` | `\"bottom\"`):\n    * `hMargin`               (Number;  default `10`):\n    * `vMargin`               (Number;  default `10`):\n    * `spacing`               (Number;  default `10`):\n    * `timeout`               (Number;  default `5`):\n    * `title`                 (String;  default `\"Notify\"`):\n**/\nexport class Notify {\n    constructor(opt = {}) {\n        this.target = document.body;\n        this.disableDesktopNotify = false;\n        this.disableFocusDetection = false;\n        this.hAlign = \"right\";\n        this.vAlign = \"bottom\";\n        this.hMargin = 10; //pixels\n        this.vMargin = 10; //pixels\n        this.spacing = 10; //pixels\n        this.timeout = 5; //seconds\n        this.title = \"Notify\";\n        this._notifies = [];\n        if (opt.target) {\n            this.target = opt.target;\n        }\n        if (opt.className) {\n            this.className = opt.className;\n        }\n        if (opt.disableDesktopNotify) {\n            this.disableDesktopNotify = opt.disableDesktopNotify;\n        }\n        if (opt.disableFocusDetection) {\n            this.disableFocusDetection = opt.disableFocusDetection;\n        }\n        if (opt.hAlign) {\n            this.hAlign = opt.hAlign;\n        }\n        if (opt.vAlign) {\n            this.vAlign = opt.vAlign;\n        }\n        if (opt.hMargin) {\n            this.hMargin = opt.hMargin;\n        }\n        if (opt.vMargin) {\n            this.vMargin = opt.vMargin;\n        }\n        if (opt.spacing) {\n            this.spacing = opt.spacing;\n        }\n        if (opt.timeout) {\n            this.timeout = opt.timeout;\n        }\n        if (opt.title) {\n            this.title = opt.title;\n        }\n        if (opt.icon) {\n            this.icon = opt.icon;\n        }\n        this._init();\n    }\n    create(_opt = {}) {\n        let opt;\n        // sugar\n        if (typeof _opt === \"string\") {\n            opt = {\n                text: _opt\n            };\n        }\n        else {\n            opt = _opt;\n        }\n        /*- Desktop notify -*/\n        if (this.disableDesktopNotify === false) {\n            const hasFocus = !!document.hasFocus ? document.hasFocus() : false;\n            if (this.disableFocusDetection === false && hasFocus === false) {\n                if (this._createDesktopNotify(opt) === true) {\n                    return this;\n                }\n            }\n        }\n        /*- Setting up -*/\n        const title = opt.title || this.title;\n        const message = opt.message || opt.body || opt.content || opt.text || null;\n        const onClick = opt.onClick;\n        const onClose = opt.onClose;\n        const timeout = (opt.timeout !== void 0) ? opt.timeout : this.timeout;\n        const icon = opt.icon || this.icon;\n        let isAlive = true;\n        let closeTimer;\n        /*- Positions -*/\n        const hPosition = this.hMargin;\n        const vPosition = this.vMargin;\n        /*- Create a new element for notify -*/\n        //\n        // <div class=\"flagrate-notify\">\n        //   <div class=\"title\">Notification</div>\n        //   <div class=\"text\">yadda yadda yadda..</div>\n        //   <div class=\"close\">&#xd7;</div>\n        // </div>\n        //\n        const notify = new Element(\"div\", { \"class\": this.className });\n        notify.addClassName(\"flagrate flagrate-notify\");\n        new Element(\"div\", { \"class\": \"title\" }).insertText(title).insertTo(notify);\n        new Element(\"div\", { \"class\": \"text\" }).insertText(message).insertTo(notify);\n        const notifyClose = new Element(\"div\", { \"class\": \"close\" }).update(\"&#xd7;\").insertTo(notify);\n        if (icon) {\n            notify.addClassName(\"flagrate-notify-icon\");\n            new Element(\"div\", { \"class\": \"icon\" }).setStyle({ \"backgroundImage\": `url(${icon})` }).insertTo(notify);\n        }\n        /*- Remove a notify element -*/\n        const closeNotify = () => {\n            if (isAlive === false) {\n                return;\n            }\n            isAlive = false;\n            notify.style.opacity = \"0\";\n            //onClose event\n            if (onClose) {\n                onClose.call(this);\n            }\n            setTimeout(() => {\n                this.target.removeChild(notify);\n                this._notifies.splice(this._notifies.indexOf(notify), 1);\n                this._positioner();\n            }, 300);\n        };\n        notifyClose.addEventListener(\"click\", e => {\n            e.stopPropagation();\n            e.preventDefault();\n            if (isAlive) {\n                closeNotify();\n            }\n        }, false);\n        notify.style.display = \"none\";\n        notify.style.position = \"fixed\";\n        notify.style[this.hAlign] = hPosition + \"px\";\n        notify.style[this.vAlign] = vPosition + \"px\";\n        /*- onClick event -*/\n        if (!onClick) {\n            notify.addEventListener(\"click\", closeNotify);\n        }\n        else {\n            notify.style.cursor = \"pointer\";\n            notify.addEventListener(\"click\", e => {\n                e.stopPropagation();\n                e.preventDefault();\n                onClick.call(this);\n                closeNotify();\n            });\n        }\n        /*- Insert to the target -*/\n        this.target.appendChild(notify);\n        /*- Show notify -*/\n        notify.style.display = \"block\";\n        setTimeout(() => {\n            notify.style.opacity = \"1\";\n        }, 10);\n        /*- Set timeout -*/\n        if (timeout !== 0) {\n            const onTimeout = () => {\n                if (isAlive) {\n                    closeNotify();\n                }\n            };\n            closeTimer = setTimeout(onTimeout, timeout * 1000);\n            //Clear timeout\n            notify.addEventListener(\"mouseover\", () => {\n                clearTimeout(closeTimer);\n                closeTimer = setTimeout(onTimeout, timeout * 1000);\n            });\n        }\n        this._notifies.push(notify);\n        this._positioner();\n        return this;\n    }\n    _init() {\n        if (this.disableDesktopNotify === false) {\n            /*- Check supported -*/\n            if (!window[\"Notification\"] || !window[\"Notification\"].permission) {\n                this.disableDesktopNotify = true;\n            }\n            else {\n                /*- Check protocol -*/\n                if (location.protocol !== \"file:\") {\n                    /*- Get Permissions -*/\n                    if (window[\"Notification\"].permission === \"default\") {\n                        this.create({\n                            text: \"Click here to Activate the Desktop Notifications...\",\n                            onClick() {\n                                window[\"Notification\"].requestPermission();\n                            }\n                        });\n                    }\n                }\n            }\n        }\n    }\n    _createDesktopNotify(opt) {\n        /*- Setting up -*/\n        const title = opt.title || this.title;\n        const message = opt.message || opt.body || opt.content || opt.text || null;\n        const onClick = opt.onClick;\n        const onClose = opt.onClose;\n        const timeout = (opt.timeout !== void 0) ? opt.timeout : this.timeout;\n        const icon = opt.icon || this.icon;\n        let isAlive = true;\n        let notify = null;\n        let closeTimer;\n        /*- Create a desktop notification -*/\n        /*- Get Permissions -*/\n        if (window[\"Notification\"].permission !== \"granted\") {\n            return false;\n        }\n        notify = new window[\"Notification\"](title, {\n            icon: icon,\n            body: message\n        });\n        /*- Set timeout -*/\n        if (timeout !== 0) {\n            closeTimer = setTimeout(() => {\n                if (isAlive) {\n                    notify.close();\n                }\n            }, timeout * 1000);\n        }\n        /*- onClick event -*/\n        notify.addEventListener(\"click\", () => {\n            if (onClick) {\n                onClick.call(this);\n            }\n            notify.close();\n        });\n        /*- onClose event -*/\n        notify.onclose = () => {\n            isAlive = false;\n            if (onClose) {\n                onClose.call(this);\n            }\n        };\n        /*- Show notify -*/\n        if (notify.show) {\n            notify.show();\n        }\n        return true;\n    }\n    _positioner() {\n        const tH = (this.target === document.body) ? (window.innerHeight || document.body.clientHeight) : this.target.offsetHeight;\n        let pX = 0;\n        let pY = 0;\n        for (let i = 0, l = this._notifies.length; i < l; i++) {\n            const notify = this._notifies[i];\n            const x = this.vMargin + pX;\n            const y = this.hMargin + pY;\n            notify.style[this.hAlign] = x.toString(10) + \"px\";\n            notify.style[this.vAlign] = y.toString(10) + \"px\";\n            pY += this.spacing + notify.offsetHeight;\n            if ((pY + notify.offsetHeight + this.vMargin + this.spacing) >= tH) {\n                pY = 0;\n                pX += this.spacing + notify.offsetWidth;\n            }\n        }\n    }\n}\nexport function createNotify(option) {\n    return new Notify(option);\n}\n\n//# sourceMappingURL=notify.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { Element } from \"./element\";\n/*?\n    flagrate.createPopover(option)\n    new flagrate.Popover(option)\n    - option (Object) - options.\n\r\n    Popover.\n\r\n    #### option\n\r\n    * `target`    (Element):\n    * `text`      (String):\n    * `html`      (String):\n    * `element`   (Element):\n    * `className` (String):\n**/\nexport class Popover {\n    constructor(opt = {}) {\n        this._isShowing = false;\n        this._openHandler = this.open.bind(this);\n        this._closeHandler = this.close.bind(this);\n        if (opt.target) {\n            if (!opt.target[\"isFlagrated\"]) {\n                opt.target = Element.extend(opt.target);\n            }\n            this._target = opt.target;\n        }\n        if (opt.text) {\n            this._text = opt.text;\n        }\n        if (opt.html) {\n            this._html = opt.html;\n        }\n        if (opt.element) {\n            this._element = opt.element;\n        }\n        if (opt.className) {\n            this._className = opt.className;\n        }\n        if (this._target) {\n            this._target.addEventListener(\"mouseover\", this._openHandler);\n        }\n    }\n    get target() {\n        return this._target;\n    }\n    set target(element) {\n        this.setTarget(element);\n    }\n    get text() {\n        return this._text;\n    }\n    set text(text) {\n        this.setText(text);\n    }\n    get html() {\n        return this._html;\n    }\n    set html(html) {\n        this.setHTML(html);\n    }\n    get element() {\n        return this._element;\n    }\n    set element(element) {\n        this.setElement(element);\n    }\n    get className() {\n        return this._className;\n    }\n    set className(className) {\n        this.setClassName(className);\n    }\n    get isShowing() {\n        return this._isShowing;\n    }\n    set isShowing(boolean) {\n        if (boolean === true) {\n            this.open();\n        }\n        else {\n            this.close();\n        }\n    }\n    open(forceTarget) {\n        if (this._isShowing === true) {\n            this.close();\n        }\n        let target = this._target || document.documentElement;\n        if (forceTarget instanceof Event) {\n            if (Element.isElement(forceTarget.target) === true) {\n                target = forceTarget.target;\n            }\n            document.body.addEventListener(\"click\", this._closeHandler);\n            document.body.addEventListener(\"mouseout\", this._closeHandler);\n            document.body.addEventListener(\"mouseup\", this._closeHandler);\n            window.addEventListener(\"scroll\", this._closeHandler);\n        }\n        else if (Element.isElement(forceTarget) === true) {\n            target = forceTarget;\n        }\n        const div = this._create();\n        this._positioningTimer = setInterval(() => {\n            if (Element.exists(target) === true) {\n                _updatePosition(target, div);\n            }\n            else {\n                this.close();\n            }\n        }, 10);\n        this._div.on(\"click\", e => e.stopPropagation());\n        this._div.on(\"mouseup\", e => e.stopPropagation());\n        this._div.on(\"mousewheel\", e => {\n            e.stopPropagation();\n            e.preventDefault();\n        });\n        _updatePosition(target, div);\n        return this;\n    }\n    close() {\n        if (this._div === undefined) {\n            return this;\n        }\n        clearInterval(this._positioningTimer);\n        document.body.removeEventListener(\"click\", this._closeHandler);\n        document.body.removeEventListener(\"mouseup\", this._closeHandler);\n        document.body.removeEventListener(\"mouseout\", this._closeHandler);\n        window.removeEventListener(\"scroll\", this._closeHandler);\n        this._isShowing = false;\n        const div = this._div;\n        div.removeClassName(\"flagrate-popover-visible\");\n        setTimeout(() => {\n            if (div && div.remove) {\n                div.remove();\n            }\n        }, 1000);\n        delete this._div;\n        return this;\n    }\n    visible() {\n        return this._isShowing && !!this._div.hasClassName(\"flagrate-popover-visible\");\n    }\n    remove() {\n        if (this._div) {\n            this.close();\n        }\n        if (this._target) {\n            this._target.removeEventListener(\"mouseover\", this._openHandler);\n        }\n    }\n    setTarget(element) {\n        if (this._target === element) {\n            return this;\n        }\n        if (!element[\"isFlagrated\"]) {\n            element = Element.extend(element);\n        }\n        this._target = element;\n        if (this._isShowing === true) {\n            this.open();\n        }\n        return this;\n    }\n    setText(text) {\n        if (this._text === text) {\n            return this;\n        }\n        this._text = text;\n        if (this._isShowing === true) {\n            this._div.updateText(text);\n        }\n        return this;\n    }\n    setHTML(html) {\n        if (this._html === html) {\n            return this;\n        }\n        this._html = html;\n        if (this._isShowing === true) {\n            this._div.update(html);\n        }\n        return this;\n    }\n    setElement(element) {\n        if (this._element === element) {\n            return this;\n        }\n        this._element = element;\n        if (this._isShowing === true) {\n            this._div.update(element);\n        }\n        return this;\n    }\n    setClassName(className) {\n        if (this._className === className) {\n            return this;\n        }\n        if (this._isShowing === true) {\n            this._div.removeClassName(this._className).addClassName(className);\n        }\n        this._className = className;\n        return this;\n    }\n    _create() {\n        this._isShowing = true;\n        const div = this._div = new Element(\"div\", {\n            \"class\": \"flagrate flagrate-popover\"\n        });\n        if (this._className) {\n            div.addClassName(this._className);\n        }\n        if (this._text) {\n            div.updateText(this._text);\n        }\n        if (this._html) {\n            div.update(this._html);\n        }\n        if (this._element) {\n            div.update(this._element);\n        }\n        div.insertTo(document.body);\n        setTimeout(() => div.addClassName(\"flagrate-popover-visible\"), 0);\n        return div;\n    }\n}\nexport function createPopover(option) {\n    return new Popover(option);\n}\nfunction _updatePosition(target, div) {\n    const tOffset = Element.cumulativeOffset(target);\n    const tScroll = Element.cumulativeScrollOffset(target);\n    const tWidth = Element.getWidth(target);\n    const tHeight = Element.getHeight(target);\n    const width = div.getWidth();\n    const height = div.getHeight();\n    let x = tOffset.left - tScroll.left + Math.round((tWidth / 2) - (width / 2));\n    let y = tOffset.top - tScroll.top + tHeight;\n    if (y + height > window.innerHeight) {\n        y = window.innerHeight - y + tHeight;\n        div.removeClassName(\"flagrate-popover-tail-top\");\n        div.addClassName(\"flagrate-popover-tail-bottom\");\n        div.style.top = \"\";\n        div.style.bottom = `${y}px`;\n    }\n    else {\n        div.removeClassName(\"flagrate-popover-tail-bottom\");\n        div.addClassName(\"flagrate-popover-tail-top\");\n        div.style.top = `${y}px`;\n        div.style.bottom = \"\";\n    }\n    div.style.left = `${x}px`;\n}\n\n//# sourceMappingURL=popover.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { extendObject } from \"./util\";\nimport { Element } from \"./element\";\n/*?\n    flagrate.createProgress(option)\n    new flagrate.Progress(option)\n    - option (Object) - options.\n**/\nfunction FProgress(opt = {}) {\n    const attr = opt.attribute || {};\n    attr[\"id\"] = opt.id || null;\n    attr[\"class\"] = opt.className || null;\n    //create\n    const progress = new Element(\"div\", attr);\n    extendObject(progress, this);\n    progress._value = opt.value || 0;\n    progress._max = opt.max || 100;\n    progress.addClassName(\"flagrate flagrate-progress\");\n    progress._bar = new Element().insertTo(progress);\n    progress._updateProgress();\n    return progress;\n}\nexport const Progress = FProgress;\nexport function createProgress(option) {\n    return new Progress(option);\n}\nProgress.prototype = {\n    getValue() {\n        return this._value;\n    },\n    setValue(number) {\n        const progress = this;\n        if (typeof number !== \"number\") {\n            return progress;\n        }\n        progress._value = Math.max(0, Math.min(progress._max, number));\n        progress.fire(\"change\", { targetProgress: progress });\n        progress._updateProgress();\n        return progress;\n    },\n    getMax() {\n        return this._max;\n    },\n    setMax(number) {\n        const progress = this;\n        if (typeof number !== \"number\") {\n            return progress;\n        }\n        progress._max = number;\n        progress.setValue(progress._value);\n        progress._updateProgress();\n        return progress;\n    },\n    _updateProgress() {\n        const progress = this;\n        const percentage = Math.max(0, Math.min(100, progress._value / progress._max * 100));\n        progress._bar.setStyle({ width: `${percentage}%` });\n        return;\n    }\n};\n\n//# sourceMappingURL=progress.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { extendObject, emptyFunction } from \"./util\";\nimport { Element } from \"./element\";\nimport { Button } from \"./button\";\nimport { Menu } from \"./menu\";\n/*?\n    flagrate.createPulldown(option)\n    new flagrate.Pulldown(option)\n    - option (Object) - options.\n\r\n    Pulldown.\n\r\n    #### option\n\r\n    * `id`                       (String): `id` attribute of `button` element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `items`                    (Array): of item (see: flagrate.Menu)\n    * `isDisabled`               (Boolean; default `false`):\n    * `onSelect`                 (Function):\n    * `onOpen`                   (Function):\n    * `onClose`                  (Function):\n**/\nfunction FPulldown(option = {}) {\n    option.label = option.label || \"\";\n    this.items = option.items || [];\n    this.onOpen = option.onOpen || emptyFunction;\n    this.onClose = option.onClose || emptyFunction;\n    const attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    //create\n    const pulldown = new Button({\n        attribute: attr,\n        label: option.label,\n        icon: option.icon,\n        onSelect: option.onSelect\n    });\n    extendObject(pulldown, this);\n    pulldown.addEventListener(\"select\", pulldown.open.bind(pulldown));\n    pulldown.addClassName(\"flagrate-pulldown\");\n    if (option.className) {\n        pulldown.addClassName(option.className);\n    }\n    new Element(\"span\", { \"class\": \"flagrate-pulldown-triangle\" }).insertTo(pulldown);\n    if (option.style) {\n        pulldown.setStyle(option.style);\n    }\n    if (option.color) {\n        pulldown.setColor(option.color);\n    }\n    if (option.isDisabled) {\n        pulldown.disable();\n    }\n    return pulldown;\n}\nexport const Pulldown = FPulldown;\nexport function createPulldown(option) {\n    return new Pulldown(option);\n}\nPulldown.prototype = {\n    open(e) {\n        const pulldown = this;\n        if (pulldown._open === true || !!pulldown._menu) {\n            pulldown.close();\n            return;\n        }\n        pulldown._open = true;\n        pulldown._menu = new Element(\"div\", { \"class\": \"flagrate-pulldown-menu\" })\n            .insert(new Menu({\n            items: pulldown.items,\n            onSelect: (e) => {\n                if (pulldown.onSelect) {\n                    pulldown.onSelect(e, pulldown);\n                }\n                pulldown.fire(\"select\", { targetPulldown: pulldown });\n            }\n        }));\n        pulldown._menu.style.top = `${pulldown.offsetTop + pulldown.getHeight()}px`;\n        pulldown._menu.style.left = `${pulldown.offsetLeft}px`;\n        pulldown.insert({ after: pulldown._menu });\n        // To prevent overflow.\n        let menuHeight = pulldown._menu.getHeight();\n        let menuMargin = parseInt(pulldown._menu.getStyle(\"margin-top\").replace(\"px\", \"\"), 10);\n        let cummOffsetTop = pulldown.cumulativeOffset().top;\n        let upsideSpace = -window.pageYOffset + cummOffsetTop;\n        let downsideSpace = window.pageYOffset + window.innerHeight - cummOffsetTop - pulldown.getHeight();\n        if (menuHeight + menuMargin > downsideSpace) {\n            if (upsideSpace > downsideSpace) {\n                if (upsideSpace < menuHeight + menuMargin) {\n                    menuHeight = (upsideSpace - menuMargin - menuMargin);\n                    pulldown._menu.style.maxHeight = `${menuHeight}px`;\n                }\n                pulldown._menu.style.top = `${(pulldown.offsetTop - menuHeight - (menuMargin * 2))}px`;\n            }\n            else {\n                menuHeight = (downsideSpace - menuMargin - menuMargin);\n                pulldown._menu.style.maxHeight = `${menuHeight}px`;\n            }\n        }\n        const close = (e) => {\n            document.body.removeEventListener(\"click\", close);\n            if (pulldown.parentNode) {\n                pulldown.parentNode.removeEventListener(\"click\", close);\n            }\n            pulldown.removeEventListener(\"select\", close);\n            pulldown.close(e);\n        };\n        setTimeout(() => {\n            document.body.addEventListener(\"click\", close);\n            if (pulldown.parentNode) {\n                pulldown.parentNode.addEventListener(\"click\", close);\n            }\n            pulldown.addEventListener(\"select\", close);\n        }, 0);\n        pulldown.onOpen.call(pulldown, e, pulldown);\n        pulldown.fire(\"open\", { targetPulldown: pulldown });\n        return this;\n    },\n    close(e) {\n        const pulldown = this;\n        if (pulldown._open === false || !pulldown._menu) {\n            return;\n        }\n        pulldown._open = false;\n        pulldown._menu.style.opacity = \"0\";\n        setTimeout(() => {\n            if (!pulldown._menu) {\n                return;\n            }\n            pulldown._menu.remove();\n            delete pulldown._menu;\n            pulldown.onClose(e, pulldown);\n            pulldown.fire(\"close\", { targetPulldown: pulldown });\n        }, 250);\n        return this;\n    }\n};\n\n//# sourceMappingURL=pulldown.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { extendObject } from \"./util\";\nimport { Element } from \"./element\";\nlet idCounter = 0;\n/*?\n    flagrate.createRadio(option)\n    new flagrate.Radio(option)\n    - option (Object) - options.\n**/\nfunction FRadio(opt = {}) {\n    const id = \"flagrate-radio-\" + (++idCounter).toString(10);\n    const attr = opt.attribute || {};\n    attr[\"id\"] = opt.id || null;\n    attr[\"class\"] = opt.className || null;\n    //create\n    const radio = new Element(\"label\", attr);\n    radio.writeAttribute(\"for\", id);\n    extendObject(radio, this);\n    if (opt.label) {\n        radio.insertText(opt.label);\n    }\n    else if (opt.labelHTML) {\n        radio.insert(opt.labelHTML);\n    }\n    radio.addClassName(\"flagrate flagrate-radio\");\n    if (opt.icon) {\n        radio.addClassName(\"flagrate-icon\");\n        radio.setStyle({\n            backgroundImage: `url(${opt.icon})`\n        });\n    }\n    radio.onChange = opt.onChange || null;\n    radio.onCheck = opt.onCheck || null;\n    radio.onUncheck = opt.onUncheck || null;\n    radio._input = new Element(\"input\", { id: id, type: \"radio\", name: opt.name });\n    radio.insert({ top: new Element() });\n    radio.insert({ top: radio._input });\n    radio._input.addEventListener(\"change\", e => {\n        e.stopPropagation();\n        const _e = e;\n        _e.targetRadio = radio;\n        if (radio.isChecked() === true) {\n            if (radio.onCheck) {\n                radio.onCheck(_e, radio);\n            }\n            radio.fire(\"check\", { targetRadio: radio });\n        }\n        else {\n            if (radio.onUncheck) {\n                radio.onUncheck(_e, radio);\n            }\n            radio.fire(\"uncheck\", { targetRadio: radio });\n        }\n        if (radio.onChange) {\n            radio.onChange(_e, radio);\n        }\n        radio.fire(\"change\", { targetRadio: radio });\n    });\n    if (opt.isChecked === true) {\n        radio.check();\n    }\n    if (opt.isFocused === true) {\n        radio.focus();\n    }\n    if (opt.isDisabled === true) {\n        radio.disable();\n    }\n    return radio;\n}\nexport const Radio = FRadio;\nexport function createRadio(option) {\n    return new Radio(option);\n}\nRadio.prototype = {\n    disable() {\n        this.addClassName(\"flagrate-disabled\");\n        this._input.writeAttribute(\"disabled\", true);\n        return this;\n    },\n    enable() {\n        this.removeClassName(\"flagrate-disabled\");\n        this._input.writeAttribute(\"disabled\", false);\n        return this;\n    },\n    isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    isChecked() {\n        return !!this._input.checked;\n    },\n    check() {\n        this._input.checked = true;\n        return this;\n    },\n    uncheck() {\n        this._input.checked = false;\n        return this;\n    }\n};\n\n//# sourceMappingURL=radio.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { extendObject } from \"./util\";\nimport { Element } from \"./element\";\nimport { Radio } from \"./radio\";\nlet idCounter = 0;\n/*?\n    flagrate.createRadios(option)\n    new flagrate.Radios(option)\n    - option (Object) - options.\n**/\nfunction FRadios(opt = {}) {\n    const id = \"flagrate-radios-\" + (++idCounter).toString(10);\n    const attr = opt.attribute || {};\n    if (opt.id) {\n        attr[\"id\"] = opt.id;\n    }\n    //create\n    const radios = new Element(\"div\", attr);\n    extendObject(radios, this);\n    radios.addClassName(\"flagrate flagrate-radios\");\n    if (opt.className) {\n        radios.addClassName(opt.className);\n    }\n    if (opt.style) {\n        radios.setStyle(opt.style);\n    }\n    radios.onChange = opt.onChange;\n    radios.selectedIndex = opt.selectedIndex || -1;\n    radios._items = [];\n    (opt.items || []).forEach((item, i) => {\n        const _item = {};\n        if (typeof item === \"object\") {\n            extendObject(_item, item);\n        }\n        else {\n            _item.label = typeof item === \"string\" ? item : item.toString();\n            _item.value = item;\n        }\n        _item.name = id;\n        _item._radio = new Radio(_item).insertTo(radios);\n        _item._radio.addEventListener(\"change\", e => {\n            if (radios.onChange) {\n                radios.onChange(e, radios);\n            }\n        });\n        _item._radio.addEventListener(\"check\", e => {\n            radios.selectedIndex = i;\n        });\n        radios._items.push(_item);\n    });\n    if (opt.isDisabled) {\n        radios.disable();\n    }\n    if (radios.selectedIndex > -1) {\n        radios._items[radios.selectedIndex]._radio.check();\n    }\n    return radios;\n}\nexport const Radios = FRadios;\nexport function createRadios(option) {\n    return new Radios(option);\n}\nRadios.prototype = {\n    select: function (index) {\n        if (this._items[index] !== void 0) {\n            this.selectedIndex = index;\n            this._items[index]._radio.check();\n        }\n        return this;\n    },\n    getValue: function () {\n        if (this.selectedIndex === -1) {\n            return void 0;\n        }\n        else {\n            return this._items[this.selectedIndex].value;\n        }\n    },\n    setValue: function (value) {\n        for (let i = 0, l = this._items.length; i < l; i++) {\n            if (this._items[i].value === value) {\n                this.select(i);\n                break;\n            }\n        }\n        return this;\n    },\n    enable() {\n        for (let i = 0, l = this._items.length; i < l; i++) {\n            this._items[i]._radio.enable();\n        }\n        this.removeClassName(\"flagrate-disabled\");\n        return this;\n    },\n    disable() {\n        for (let i = 0, l = this._items.length; i < l; i++) {\n            this._items[i]._radio.disable();\n        }\n        this.addClassName(\"flagrate-disabled\");\n        return this;\n    },\n    isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    }\n};\n\n//# sourceMappingURL=radios.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { extendObject, emptyFunction } from \"./util\";\nimport { Element } from \"./element\";\nimport { Button } from \"./button\";\nimport { TextInput } from \"./text-input\";\nimport { Menu } from \"./menu\";\n/*?\n    flagrate.createSearchBox(option)\n    new flagrate.SearchBox(option)\n    - option (Object) - options.\n\r\n    text input for search.\n\r\n    #### option\n\r\n    * `id`                       (String): `id` attribute of container element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `value`                    (String): default value.\n    * `placeholder`              (String):\n    * `icon`                     (String):\n    * `isDisabled`               (Boolean; default `false`):\n    * `suggester`                (Function):\n    * `onSearch`                 (Function): callback with input value.\n**/\nfunction FSearchBox(opt = {}) {\n    this.suggester = opt.suggester || null;\n    this.onSearch = opt.onSearch || emptyFunction;\n    const attr = opt.attribute || {};\n    attr[\"id\"] = opt.id || null;\n    attr[\"class\"] = opt.className || null;\n    //create\n    const searchBox = new Element(\"div\", attr);\n    extendObject(searchBox, this);\n    searchBox.addClassName(\"flagrate flagrate-search-box\");\n    searchBox._input = new TextInput({\n        className: \"search-input\",\n        value: opt.value,\n        placeholder: opt.placeholder,\n        icon: opt.icon\n    }).insertTo(searchBox);\n    searchBox._button = new Button({\n        className: \"search-button\",\n        onSelect: searchBox.search.bind(searchBox)\n    }).insertTo(searchBox);\n    searchBox._suggest = new Element(\"div\", {\n        \"class\": \"search-suggest\"\n    }).hide().insertTo(searchBox);\n    searchBox._input.on(\"keydown\", searchBox._onKeydownHandler.bind(searchBox));\n    searchBox._input.on(\"keyup\", searchBox._onKeyupHandler.bind(searchBox));\n    searchBox._input.on(\"focus\", searchBox._onFocusHandler.bind(searchBox));\n    searchBox._input.on(\"blur\", searchBox._onBlurHandler.bind(searchBox));\n    // for Chrome\n    searchBox._suggest.on(\"mousedown\", e => e.preventDefault());\n    if (opt.style) {\n        searchBox.setStyle(opt.style);\n    }\n    if (opt.isDisabled) {\n        searchBox.disable();\n    }\n    return searchBox;\n}\nexport const SearchBox = FSearchBox;\nexport function createSearchBox(option) {\n    return new SearchBox(option);\n}\nSearchBox.prototype = {\n    disable() {\n        this.addClassName(\"flagrate-disabled\");\n        this._input.disable();\n        this._button.disable();\n        this._suggest.hide();\n        return this;\n    },\n    enable() {\n        this.removeClassName(\"flagrate-disabled\");\n        this._input.enable();\n        this._button.enable();\n        return this;\n    },\n    isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    getValue() {\n        return this._input.getValue();\n    },\n    setValue(value) {\n        this._input.setValue(value);\n        return this;\n    },\n    search() {\n        const value = this.getValue();\n        this.onSearch(value, this);\n        this.fire(\"search\", value);\n        this._input.blur();\n        return this;\n    },\n    suggest() {\n        if (!this.suggester) {\n            return this;\n        }\n        this._suggest.hide();\n        const value = this.getValue();\n        const result = this.suggester(value, this._suggested.bind(this));\n        if (result !== void 0) {\n            this._suggested(result);\n        }\n        return this;\n    },\n    focus() {\n        this._input.focus();\n    },\n    blur() {\n        this._input.blur();\n    },\n    _suggested(suggestedItems) {\n        if (!suggestedItems) {\n            return;\n        }\n        if (suggestedItems.length === 0) {\n            this._suggest.hide();\n            return;\n        }\n        const items = [];\n        suggestedItems.forEach(item => {\n            if (typeof item === \"string\" && item.trim() !== \"\") {\n                items.push({\n                    label: item.trim(),\n                    onSelect: _createCompletionHandler(this, item.trim())\n                });\n            }\n            else if (typeof item === \"object\") {\n                items.push({\n                    label: item.label,\n                    icon: item.icon,\n                    onSelect: _createSuggestionHandler(this, item.onSelect)\n                });\n            }\n        });\n        if (items.length === 0) {\n            this._suggest.hide();\n            return;\n        }\n        const menu = this._menu = new Menu({\n            items: items,\n            onSelect: () => {\n                this._suggest.hide();\n            }\n        });\n        Element.addClassName(menu.firstChild, \"flagrate-search-suggest-selected\");\n        this._suggest.update(menu).show();\n        // To prevent overflow.\n        let menuHeight = this._suggest.getHeight();\n        let menuMargin = parseInt(this._suggest.getStyle(\"margin-top\").replace(\"px\", \"\"), 10);\n        let cummOffsetTop = this.cumulativeOffset().top;\n        let upsideSpace = -window.pageYOffset + cummOffsetTop;\n        let downsideSpace = window.pageYOffset + window.innerHeight - cummOffsetTop - this.getHeight();\n        if (menuHeight + menuMargin > downsideSpace) {\n            if (upsideSpace > downsideSpace) {\n                if (upsideSpace < menuHeight + menuMargin) {\n                    menuHeight = (upsideSpace - menuMargin - menuMargin);\n                    this._suggest.style.maxHeight = `${menuHeight}px`;\n                }\n                this._suggest.addClassName(\"flagrate-search-suggest-upper\");\n            }\n            else {\n                menuHeight = (downsideSpace - menuMargin - menuMargin);\n                this._suggest.style.maxHeight = `${menuHeight}px`;\n                this._suggest.removeClassName(\"flagrate-search-suggest-upper\");\n            }\n        }\n        else {\n            this._suggest.removeClassName(\"flagrate-search-suggest-upper\");\n        }\n        // reset scroll position\n        this._suggest.scrollTop = 0;\n    },\n    _onKeydownHandler(e) {\n        // ESC: 27\n        if (e.keyCode === 27) {\n            this._input.select();\n            this._suggest.hide();\n        }\n        else if (this._suggest.visible() === true) {\n            // ENTER: 13\n            if (e.keyCode === 13) {\n                const target = this._menu.getElementsByClassName(\"flagrate-search-suggest-selected\")[0];\n                target.click();\n                return;\n            }\n            // UP: 38, DOWN: 40\n            if (e.keyCode !== 38 && e.keyCode !== 40) {\n                return;\n            }\n            e.preventDefault();\n            const elements = this._menu.getElementsByTagName(\"button\");\n            for (let i = 0, l = elements.length; i < l; i++) {\n                if (elements[i].hasClassName(\"flagrate-search-suggest-selected\") === true) {\n                    if ((e.keyCode === 38 && i !== 0) || (e.keyCode === 40 && (i + 1) !== l)) {\n                        elements[i].removeClassName(\"flagrate-search-suggest-selected\");\n                    }\n                    let scrollTop = -1;\n                    if (e.keyCode === 38 && i !== 0) {\n                        elements[i - 1].addClassName(\"flagrate-search-suggest-selected\");\n                        scrollTop = elements[i - 1].offsetHeight + elements[i - 1].offsetTop;\n                    }\n                    else if (e.keyCode === 40 && (i + 1) !== l) {\n                        elements[i + 1].addClassName(\"flagrate-search-suggest-selected\");\n                        scrollTop = elements[i + 1].offsetHeight + elements[i + 1].offsetTop;\n                    }\n                    if (scrollTop !== -1) {\n                        this._suggest.scrollTop = scrollTop + 4 - this._suggest.getHeight();\n                    }\n                    break;\n                }\n            }\n        }\n        else if (e.keyCode === 13) {\n            setTimeout(this.search.bind(this), 100);\n        }\n    },\n    _onKeyupHandler(e) {\n        if (this._lastValue !== this.getValue()) {\n            this._lastValue = this.getValue();\n            this.suggest();\n        }\n    },\n    _onFocusHandler(e) {\n        setTimeout(this.suggest.bind(this), 100);\n    },\n    _onBlurHandler(e) {\n        setTimeout(() => {\n            if (document.activeElement !== this._suggest && this._suggest.visible() === true) {\n                this._suggest.hide();\n            }\n        }, 100);\n    }\n};\nfunction _createCompletionHandler(searchBox, value) {\n    return () => {\n        searchBox._input.setValue(value);\n        searchBox._input.focus();\n    };\n}\nfunction _createSuggestionHandler(searchBox, onSelect) {\n    return () => {\n        onSelect.call(searchBox);\n        searchBox._input.blur();\n    };\n}\n\n//# sourceMappingURL=search-box.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { extendObject } from \"./util\";\nimport { Element } from \"./element\";\nimport { Pulldown } from \"./pulldown\";\nimport { Grid } from \"./grid\";\n/*?\n    flagrate.createSelect(option)\n    new flagrate.Select(option)\n    - option (Object) - options.\n\r\n    Select.\n\r\n    #### option\n\r\n    * `id`                       (String): `id` attribute of container element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `items`                    (Array):\n    * `listView`                 (Boolean; default `false`):\n    * `multiple`                 (Boolean; default `false`):\n    * `max`                      (Number; default `-1`):\n    * `selectedIndex`            (Number):\n    * `selectedIndexes`          (Array): array of Number.\n    * `isDisabled`               (Boolean; default `false`):\n**/\nfunction FSelect(option = {}) {\n    this.items = option.items || [];\n    this.listView = option.listView || false;\n    this.multiple = option.multiple || false;\n    this.max = option.max || -1;\n    if (this.multiple) {\n        this.selectedIndexes = option.selectedIndexes || [];\n    }\n    else {\n        this.selectedIndex = typeof option.selectedIndex === \"undefined\" ? -1 : option.selectedIndex;\n    }\n    const attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    this.isPulldown = (!this.listView && !this.multiple);\n    // create\n    const container = new Element(\"div\", attr);\n    function createOnSelectHandler(i) {\n        return () => container.select(i);\n    }\n    function createOnDeselectHandler(i) {\n        return () => container.deselect(i);\n    }\n    // normalize items\n    for (let i = 0, l = this.items.length; i < l; i++) {\n        if (typeof this.items[i] !== \"object\") {\n            this.items[i] = {\n                label: typeof this.items[i] === \"string\" ? this.items[i] : this.items[i].toString(10),\n                value: this.items[i]\n            };\n        }\n    }\n    if (this.isPulldown) {\n        container._pulldown = new Pulldown({\n            label: \"-\",\n            items: [\n                {\n                    label: \"-\",\n                    onSelect: createOnSelectHandler(-1)\n                }\n            ].concat(this.items.map((item, i) => {\n                return {\n                    label: item.label,\n                    labelHTML: item.labelHTML,\n                    icon: item.icon,\n                    onSelect: createOnSelectHandler(i)\n                };\n            }))\n        }).insertTo(container);\n    }\n    else {\n        container._grid = new Grid({\n            headless: true,\n            multiSelect: this.multiple,\n            cols: [\n                {\n                    key: \"label\"\n                }\n            ],\n            rows: this.items.map((item, i) => {\n                return {\n                    cell: {\n                        label: {\n                            text: item.label,\n                            html: item.labelHTML,\n                            icon: item.icon\n                        }\n                    },\n                    onSelect: createOnSelectHandler(i),\n                    onDeselect: createOnDeselectHandler(i)\n                };\n            })\n        }).insertTo(container);\n    }\n    extendObject(container, this);\n    container.addClassName(\"flagrate flagrate-select\");\n    if (!container.isPulldown) {\n        container.addClassName(\"flagrate-select-list-view\");\n    }\n    if (option.className) {\n        container.addClassName(option.className);\n    }\n    if (option.style) {\n        container.setStyle(option.style);\n    }\n    if (option.isDisabled) {\n        container.disable();\n    }\n    if (container.multiple) {\n        container.selectedIndexes.forEach(function (index) {\n            container.select(index);\n        });\n    }\n    else {\n        if (container.selectedIndex > -1) {\n            container.select(container.selectedIndex);\n        }\n    }\n    return container;\n}\nexport const Select = FSelect;\nexport function createSelect(option) {\n    return new Select(option);\n}\nSelect.prototype = {\n    select(index) {\n        if (this.items.length <= index) {\n            return this;\n        }\n        if (this.multiple) {\n            if (this.max > -1 && this.selectedIndexes.length >= this.max) {\n                if (this._grid.rows[index].isSelected === true) {\n                    this._grid.deselect(index);\n                }\n                return this;\n            }\n            if (this.selectedIndexes.indexOf(index) === -1) {\n                this.selectedIndexes.push(index);\n            }\n        }\n        else {\n            this.selectedIndex = index;\n        }\n        if (this.isPulldown) {\n            if (index === -1) {\n                this._pulldown.setLabel(\"-\");\n                this._pulldown.setIcon(null);\n            }\n            else {\n                if (this.items[index].label !== undefined) {\n                    this._pulldown.setLabel(this.items[index].label);\n                }\n                else if (this.items[index].labelHTML !== undefined) {\n                    this._pulldown.setLabelHTML(this.items[index].labelHTML);\n                }\n                this._pulldown.setIcon(this.items[index].icon);\n            }\n            this.fire(\"change\");\n        }\n        else {\n            if (!this._grid.rows[index].isSelected) {\n                this._grid.select(index);\n            }\n        }\n        return this;\n    },\n    deselect(index) {\n        if (this.items.length <= index) {\n            return this;\n        }\n        if (this.multiple) {\n            const selectedIndex = this.selectedIndexes.indexOf(index);\n            if (selectedIndex !== -1) {\n                this.selectedIndexes.splice(this.selectedIndexes.indexOf(index), 1);\n            }\n        }\n        else {\n            this.selectedIndex = -1;\n        }\n        if (this.isPulldown) {\n            this._pulldown.setLabel(\"-\");\n            this._pulldown.setIcon(null);\n            this.fire(\"change\");\n        }\n        else {\n            if (this.multiple) {\n                if (this._grid.rows[index].isSelected === true) {\n                    this._grid.deselect(index);\n                }\n            }\n            else {\n                for (let i = 0, l = this.items.length; i < l; i++) {\n                    if (this._grid.rows[i].isSelected === true) {\n                        this._grid.deselect(i);\n                    }\n                }\n            }\n        }\n        return this;\n    },\n    selectAll() {\n        if (this.multiple) {\n            this._grid.selectAll();\n            this.selectedIndexes = [];\n            for (let i = 0, l = this.items.length; i < l; i++) {\n                this.selectedIndexes.push(i);\n            }\n        }\n        return this;\n    },\n    deselectAll() {\n        if (this.multiple) {\n            this._grid.deselectAll();\n            this.selectedIndexes = [];\n        }\n        else {\n            this.deselect();\n        }\n        return this;\n    },\n    disable() {\n        this.addClassName(\"flagrate-disabled\");\n        if (this.isPulldown) {\n            this._pulldown.disable();\n        }\n        else {\n            this._grid.disable();\n        }\n        return this;\n    },\n    enable() {\n        this.removeClassName(\"flagrate-disabled\");\n        if (this.isPulldown) {\n            this._pulldown.enable();\n        }\n        else {\n            this._grid.enable();\n        }\n        return this;\n    },\n    isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    getValue() {\n        if (this.selectedIndex > -1) {\n            return this.items[this.selectedIndex].value;\n        }\n        else {\n            return void 0;\n        }\n    },\n    getValues() {\n        let result = [];\n        for (let i = 0, l = this.selectedIndexes.length; i < l; i++) {\n            result.push(this.items[this.selectedIndexes[i]].value);\n        }\n        return result;\n    }\n};\n\n//# sourceMappingURL=select.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { extendObject } from \"./util\";\nimport * as progress from \"./progress\";\n/*?\n    flagrate.createSlider(option)\n    new flagrate.Slider(option)\n    - option (Object) - options.\n**/\nfunction FSlider(opt = {}) {\n    //create\n    const slider = new progress.Progress(opt);\n    extendObject(slider, this);\n    slider.addClassName(\"flagrate-slider\");\n    if (slider.tabIndex === -1) {\n        slider.tabIndex = 0;\n    }\n    if (window.ontouchstart !== undefined) {\n        slider.addEventListener(\"touchstart\", slider._onTouchStartHandler.bind(slider));\n    }\n    if (navigator.pointerEnabled) {\n        slider.addEventListener(\"pointerdown\", slider._onPointerDownHandler.bind(slider));\n    }\n    else if (navigator.msPointerEnabled) {\n        // deprecated on IE11\n        slider.addEventListener(\"MSPointerDown\", slider._onPointerDownHandler.bind(slider));\n    }\n    else {\n        slider.addEventListener(\"mousedown\", slider._onPointerDownHandler.bind(slider));\n    }\n    if (opt.isDisabled) {\n        slider.disable();\n    }\n    return slider;\n}\nexport const Slider = FSlider;\nexport function createSlider(option) {\n    return new Slider(option);\n}\nSlider.prototype = {\n    disable() {\n        const slider = this;\n        slider.dataset[\"flagrateTabIndex\"] = slider.tabIndex.toString(10);\n        slider.removeAttribute(\"tabindex\");\n        return slider.addClassName(\"flagrate-disabled\");\n    },\n    enable() {\n        const slider = this;\n        const tabIndex = parseInt(slider.dataset[\"flagrateTabIndex\"]);\n        if (tabIndex !== -1) {\n            slider.tabIndex = tabIndex;\n        }\n        return slider.removeClassName(\"flagrate-disabled\");\n    },\n    isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    _onTouchStartHandler(e) {\n        if (!this.isEnabled()) {\n            return;\n        }\n        e.preventDefault();\n        this._slide(e.touches[0].pageX - this.cumulativeOffset().left, e.touches[0].clientX, \"touch\");\n    },\n    _onPointerDownHandler(e) {\n        if (!this.isEnabled()) {\n            return;\n        }\n        e.preventDefault();\n        this._slide(e.offsetX || e.layerX, e.clientX, \"pointer\");\n    },\n    _slide(x, pos, type) {\n        const slider = this;\n        const unitWidth = slider.getWidth() / slider.getMax();\n        const onMove = (e) => {\n            e.preventDefault();\n            if (e.touches && e.touches[0]) {\n                x = x + e.touches[0].clientX - pos;\n                pos = e.touches[0].clientX;\n            }\n            else {\n                x = x + e.clientX - pos;\n                pos = e.clientX;\n            }\n            slider.setValue(Math.round(x / unitWidth));\n            slider.fire(\"slide\", { targetSlider: slider });\n        };\n        const onUp = (e) => {\n            e.preventDefault();\n            if (type === \"pointer\") {\n                if (navigator.pointerEnabled) {\n                    document.removeEventListener(\"pointermove\", onMove);\n                    document.removeEventListener(\"pointerup\", onUp);\n                }\n                else if (navigator.msPointerEnabled) {\n                    document.removeEventListener(\"MSPointerUp\", onUp);\n                    document.removeEventListener(\"MSPointerMove\", onMove);\n                }\n                else {\n                    document.removeEventListener(\"mousemove\", onMove);\n                    document.removeEventListener(\"mouseup\", onUp);\n                }\n            }\n            else if (type === \"touch\") {\n                document.removeEventListener(\"touchmove\", onMove);\n                document.removeEventListener(\"touchend\", onUp);\n                document.removeEventListener(\"touchcancel\", onUp);\n            }\n            if (e.clientX) {\n                x = x + e.clientX - pos;\n                slider.setValue(Math.round(x / unitWidth));\n                slider.fire(\"slide\", { targetSlider: slider });\n            }\n            else if (e.touches && e.touches[0]) {\n                x = x + e.touches[0].clientX - pos;\n                slider.setValue(Math.round(x / unitWidth));\n                slider.fire(\"slide\", { targetSlider: slider });\n            }\n        };\n        if (type === \"pointer\") {\n            if (navigator.pointerEnabled) {\n                document.addEventListener(\"pointermove\", onMove);\n                document.addEventListener(\"pointerup\", onUp);\n            }\n            else if (navigator.msPointerEnabled) {\n                document.addEventListener(\"MSPointerMove\", onMove);\n                document.addEventListener(\"MSPointerUp\", onUp);\n            }\n            else {\n                document.addEventListener(\"mousemove\", onMove);\n                document.addEventListener(\"mouseup\", onUp);\n            }\n        }\n        else if (type === \"touch\") {\n            document.addEventListener(\"touchmove\", onMove);\n            document.addEventListener(\"touchend\", onUp);\n            document.addEventListener(\"touchcancel\", onUp);\n        }\n        slider.setValue(Math.round(x / unitWidth));\n        slider.fire(\"slide\", { targetSlider: slider });\n    }\n};\n\n//# sourceMappingURL=slider.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { extendObject } from \"./util\";\nimport { Button } from \"./button\";\n/*?\n    flagrate.createSwitch(option)\n    new flagrate.Switch(option)\n    - option (Object) - options.\n**/\nfunction FSwitch(opt = {}) {\n    //create\n    const sw = new Button({\n        id: opt.id,\n        className: opt.className,\n        attribute: opt.attribute,\n        style: opt.style,\n        isFocused: opt.isFocused,\n        isDisabled: opt.isDisabled\n    });\n    extendObject(sw, this);\n    sw.addEventListener(\"select\", sw.toggleSwitch.bind(sw));\n    sw.addClassName(\"flagrate-switch\");\n    if (sw.dataset) {\n        sw.dataset[\"flagrateSwitchStatus\"] = opt.isOn ? \"on\" : \"off\";\n    }\n    else {\n        sw.writeAttribute(\"data-flagrate-switch-status\", opt.isOn ? \"on\" : \"off\");\n    }\n    return sw;\n}\nexport const Switch = FSwitch;\nexport function createSwitch(option) {\n    return new Switch(option);\n}\nSwitch.prototype = {\n    isOn() {\n        if (this.dataset) {\n            return this.dataset.flagrateSwitchStatus === \"on\";\n        }\n        else {\n            return this.readAttribute(\"data-flagrate-switch-status\") === \"on\";\n        }\n    },\n    switchOn() {\n        if (this.dataset) {\n            this.dataset.flagrateSwitchStatus = \"on\";\n        }\n        else {\n            this.writeAttribute(\"data-flagrate-switch-status\", \"on\");\n        }\n        return this.fire(\"on\", { targetSwitch: this })\n            .fire(\"change\", { targetSwitch: this });\n    },\n    switchOff() {\n        if (this.dataset) {\n            this.dataset.flagrateSwitchStatus = \"off\";\n        }\n        else {\n            this.writeAttribute(\"data-flagrate-switch-status\", \"off\");\n        }\n        return this.fire(\"off\", { targetSwitch: this })\n            .fire(\"change\", { targetSwitch: this });\n    },\n    toggleSwitch() {\n        return this.isOn() ? this.switchOff() : this.switchOn();\n    }\n};\n\n//# sourceMappingURL=switch.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { extendObject } from \"./util\";\nimport { Element } from \"./element\";\nimport { Button } from \"./button\";\n/*?\n    flagrate.createTab(option)\n    new flagrate.Tab(option)\n    - option (Object) - option.\n\r\n    Create and initialize the tab.\n\r\n    #### option\n\r\n    * `id`            (String): `id` attribute of container.\n    * `className`     (String):\n    * `attribute`     (Object):\n    * `style`         (Object): (using flagrate.Element.setStyle)\n    * `tabs`          (Array): Array of **tab** object.\n    * `selectedIndex` (Number):\n    * `fill`          (Boolean; default `false`):\n    * `bodyless`      (Boolean; default `false`):\n    * `onSelect`      (Function): Triggered whenever select the tab.\n\r\n    #### tab\n\r\n    * `key`           (String):\n    * `label`         (String):\n    * `icon`          (String):\n    * `text`          (String):\n    * `html`          (String):\n    * `element`       (Element):\n    * `onSelect`      (Function):\n**/\nfunction FTab(opt = {}) {\n    const attr = opt.attribute || {};\n    attr[\"id\"] = opt.id;\n    attr[\"class\"] = \"flagrate flagrate-tab\";\n    if (opt.fill) {\n        attr[\"class\"] += \" flagrate-tab-fill\";\n    }\n    // create\n    const tab = new Element(\"div\", attr);\n    extendObject(tab, this);\n    if (opt.className) {\n        tab.addClassName(opt.className);\n    }\n    if (opt.style) {\n        tab.setStyle(opt.style);\n    }\n    tab._tabs = opt.tabs || [];\n    tab._bodyless = opt.bodyless || false;\n    tab._selectedIndex = opt.selectedIndex || 0;\n    tab.onSelect = opt.onSelect || null;\n    Object.defineProperties(tab, {\n        tabs: {\n            enumerable: true,\n            get() { return tab._tabs; },\n            set(tabs) {\n                tab._tabs = tabs;\n                tab._render();\n            }\n        },\n        bodyless: {\n            enumerable: true,\n            get() { return tab._bodyless; },\n            set(bodyless) {\n                tab._bodyless = bodyless;\n                tab.update()._create()._render();\n            }\n        },\n        selectedIndex: {\n            enumerable: true,\n            get() { return tab._selectedIndex; },\n            set(index) { tab.select(index); }\n        }\n    });\n    tab._create()._render();\n    if (tab.tabs.length > 0) {\n        tab.select(tab.selectedIndex);\n    }\n    return tab;\n}\nexport const Tab = FTab;\nexport function createTab(option) {\n    return new Tab(option);\n}\nTab.prototype = {\n    select(a) {\n        const tab = this;\n        const index = (typeof a === \"number\") ? a : tab.indexOf(a);\n        if (index < 0 || index >= tab._tabs.length) {\n            return tab;\n        }\n        if (0 <= tab._selectedIndex && tab._selectedIndex < tab._tabs.length && tab._tabs[tab._selectedIndex]._button) {\n            tab._tabs[tab._selectedIndex]._button.removeClassName(\"flagrate-tab-selected\");\n        }\n        tab._selectedIndex = index;\n        const tabItem = tab._tabs[index];\n        if (!tabItem || !tabItem._button) {\n            return tab;\n        }\n        tabItem._button.addClassName(\"flagrate-tab-selected\");\n        if (tabItem.text) {\n            tab._body.updateText(tabItem.text);\n        }\n        if (tabItem.html) {\n            tab._body.update(tabItem.html);\n        }\n        if (tabItem.element) {\n            tab._body.update(tabItem.element);\n        }\n        const tabEvent = window.event || {};\n        tabEvent.targetTab = tab;\n        tabEvent.targetTabItem = tabItem;\n        if (tabItem.onSelect) {\n            tabItem.onSelect.call(tab, tabEvent, tabItem);\n        }\n        if (tab.onSelect) {\n            tab.onSelect(tabEvent, tabItem);\n        }\n        return tab;\n    },\n    unshift(r) {\n        const tab = this;\n        if (r instanceof Array) {\n            for (let i = 0, l = r.length; i < l; i++) {\n                tab._tabs.unshift(r);\n            }\n        }\n        else {\n            tab._tabs.unshift(r);\n        }\n        tab._render();\n        return tab._tabs.length;\n    },\n    push(r) {\n        const tab = this;\n        if (r instanceof Array) {\n            for (let i = 0, l = r.length; i < l; i++) {\n                tab._tabs.push(r);\n            }\n        }\n        else {\n            tab._tabs.push(r);\n        }\n        tab._render();\n        return tab._tabs.length;\n    },\n    shift(c) {\n        const tab = this;\n        const count = c || 1;\n        const removes = [];\n        for (let i = 0, l = tab._tabs.length; i < l && i < count; i++) {\n            removes.push(tab._tabs.shift());\n        }\n        tab._render();\n        return !c ? removes[0] : removes;\n    },\n    pop(c) {\n        const tab = this;\n        const count = c || 1;\n        const removes = [];\n        for (let i = 0, l = tab._tabs.length; i < l && i < count; i++) {\n            removes.push(tab._tabs.pop());\n        }\n        tab._render();\n        return !c ? removes[0] : removes;\n    },\n    splice(index, c, t) {\n        const tab = this;\n        c = typeof c === \"undefined\" ? this._tabs.length - index : c;\n        const removes = tab._tabs.splice(index, c);\n        if (t) {\n            if (t instanceof Array === false) {\n                t = [t];\n            }\n            for (let i = 0, l = t.length; i < l; i++) {\n                tab._tabs.splice(index + i, 0, t[i]);\n            }\n        }\n        tab._render();\n        return removes;\n    },\n    removeTab(a) {\n        const tab = this;\n        const removes = [];\n        let bulk = true;\n        if (a instanceof Array === false) {\n            bulk = false;\n            a = [a];\n        }\n        for (let i = 0, l = a.length; i < l; i++) {\n            const index = (typeof a[i] === \"number\") ? a[i] : tab.indexOf(a[i]);\n            if (index !== -1) {\n                removes.push(tab.splice(index, 1));\n            }\n        }\n        return bulk ? removes : removes[0];\n    },\n    indexOf(a) {\n        const tab = this;\n        if (typeof a === \"string\") {\n            let index = -1;\n            for (let i = 0, l = tab._tabs.length; i < l; i++) {\n                if (tab._tabs[i].key === a) {\n                    index = i;\n                    break;\n                }\n            }\n            return index;\n        }\n        else {\n            return tab._tabs.indexOf(a);\n        }\n    },\n    _create() {\n        const tab = this;\n        tab._head = new Element(\"div\", { \"class\": \"flagrate-tab-head\" }).insertTo(tab);\n        if (tab._bodyless === true) {\n            tab._body = new Element();\n        }\n        else {\n            tab._body = new Element(\"div\", { \"class\": \"flagrate-tab-body\" }).insertTo(tab);\n        }\n        return tab;\n    },\n    _render() {\n        const tab = this;\n        tab._head.update();\n        tab._tabs.forEach(tabItem => {\n            if (!tabItem._button) {\n                tabItem._button = new Button({\n                    icon: tabItem.icon,\n                    label: tabItem.label,\n                    onSelect: tab._createOnSelectHandler(tabItem)\n                });\n            }\n            tabItem._button.insertTo(tab._head);\n        });\n        return tab;\n    },\n    _createOnSelectHandler(tabItem) {\n        const tab = this;\n        return (e) => {\n            if (/firefox/i.test(navigator.userAgent) === true) {\n                window.event = e;\n            }\n            tab.select(tabItem);\n        };\n    }\n};\n\n//# sourceMappingURL=tab.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { extendObject } from \"./util\";\nimport { Element } from \"./element\";\n/*?\n    flagrate.createTextArea(option)\n    new flagrate.TextArea(option)\n    - option (Object) - options.\n\r\n    TextArea.\n\r\n    #### option\n\r\n    * `id`                       (String): `id` attribute of `textarea` element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `value`                    (String):\n    * `placeholder`              (String):\n    * `icon`                     (String):\n    * `regexp`                   (RegExp):\n    * `isDisabled`               (Boolean; default `false`):\n**/\nfunction FTextArea(option = {}) {\n    this.regexp = option.regexp || null;\n    const attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    if (option.placeholder) {\n        attr[\"placeholder\"] = option.placeholder;\n    }\n    //create\n    const textArea = new Element(\"textarea\", attr);\n    extendObject(textArea, this);\n    textArea.addClassName(\"flagrate flagrate-textarea\");\n    if (option.className) {\n        textArea.addClassName(option.className);\n    }\n    if (option.style) {\n        textArea.setStyle(option.style);\n    }\n    if (option.icon) {\n        textArea.setIcon(option.icon);\n    }\n    if (option.value) {\n        textArea.setValue(option.value);\n    }\n    if (option.isDisabled) {\n        textArea.disable();\n    }\n    return textArea;\n}\nexport const TextArea = FTextArea;\nexport function createTextArea(option) {\n    return new TextArea(option);\n}\nTextArea.prototype = {\n    disable() {\n        this.addClassName(\"flagrate-disabled\");\n        this.writeAttribute(\"disabled\", true);\n        return this;\n    },\n    enable() {\n        this.removeClassName(\"flagrate-disabled\");\n        this.writeAttribute(\"disabled\", false);\n        return this;\n    },\n    isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    setValue(value) {\n        this.value = value;\n        return this;\n    },\n    getValue() {\n        return this.value;\n    },\n    setIcon(identifier) {\n        this._iconIdentifier = identifier;\n        if (identifier) {\n            return this.addClassName(\"flagrate-icon\").setStyle({\n                backgroundImage: `url(${identifier})`\n            });\n        }\n        else {\n            return this.removeClassName(\"flagrate-icon\").setStyle({\n                backgroundImage: \"none\"\n            });\n        }\n    },\n    getIcon() {\n        return this._iconIdentifier || \"\";\n    },\n    isValid: function () {\n        return this.regexp.test(this.getValue());\n    }\n};\n\n//# sourceMappingURL=text-area.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { extendObject } from \"./util\";\nimport { Element } from \"./element\";\n/*?\n    flagrate.createTextInput(option)\n    new flagrate.TextInput(option)\n    - option (Object) - options.\n\r\n    TextInput.\n\r\n    #### option\n\r\n    * `id`                       (String): `id` attribute of `input` element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `value`                    (String):\n    * `placeholder`              (String):\n    * `icon`                     (String):\n    * `regexp`                   (RegExp):\n    * `isDisabled`               (Boolean; default `false`):\n**/\nfunction FTextInput(option = {}) {\n    this.regexp = option.regexp || null;\n    const attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    if (option.value) {\n        attr[\"value\"] = option.value;\n    }\n    if (option.placeholder) {\n        attr[\"placeholder\"] = option.placeholder;\n    }\n    //create\n    const input = new Element(\"input\", attr);\n    extendObject(input, this);\n    input.addClassName(\"flagrate flagrate-textinput\");\n    if (option.className) {\n        input.addClassName(option.className);\n    }\n    if (option.style) {\n        input.setStyle(option.style);\n    }\n    if (option.icon) {\n        input.setIcon(option.icon);\n    }\n    if (option.isDisabled) {\n        input.disable();\n    }\n    return input;\n}\nexport const TextInput = FTextInput;\nexport function createTextInput(option) {\n    return new TextInput(option);\n}\nTextInput.prototype = {\n    disable() {\n        this.addClassName(\"flagrate-disabled\");\n        this.writeAttribute(\"disabled\", true);\n        return this;\n    },\n    enable() {\n        this.removeClassName(\"flagrate-disabled\");\n        this.writeAttribute(\"disabled\", false);\n        return this;\n    },\n    isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    setValue(value) {\n        this.value = value;\n        return this;\n    },\n    getValue() {\n        return this.value;\n    },\n    setIcon(identifier) {\n        this._iconIdentifier = identifier;\n        if (identifier) {\n            return this.addClassName(\"flagrate-icon\").setStyle({\n                backgroundImage: `url(${identifier})`\n            });\n        }\n        else {\n            return this.removeClassName(\"flagrate-icon\").setStyle({\n                backgroundImage: \"none\"\n            });\n        }\n    },\n    getIcon() {\n        return this._iconIdentifier || \"\";\n    },\n    isValid: function () {\n        return this.regexp.test(this.getValue());\n    }\n};\n\n//# sourceMappingURL=text-input.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { identity, extendObject } from \"./util\";\nimport { Element } from \"./element\";\nimport { Button } from \"./button\";\nimport { Menu } from \"./menu\";\nimport { TextInput } from \"./text-input\";\n/*?\n    flagrate.createTextInput(option)\n    new flagrate.TextInput(option)\n    - option (Object) - options.\n\r\n    TextInput.\n\r\n    #### option\n\r\n    * `id`                       (String): `id` attribute of `input` element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `value`                    (String):\n    * `placeholder`              (String):\n    * `icon`                     (String):\n    * `regexp`                   (RegExp):\n    * `isDisabled`               (Boolean; default `false`):\n**/\nfunction FTokenizer(option = {}) {\n    this.values = option.values || [];\n    this.max = option.max || -1;\n    this.tokenize = option.tokenize || option.tokenizeSync || identity;\n    if (option.onChange) {\n        this.onChange = option.onChange;\n    }\n    const attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    //create\n    const tokenizer = new Element(\"div\", attr);\n    extendObject(tokenizer, this);\n    tokenizer.addClassName(\"flagrate flagrate-tokenizer\");\n    if (option.className) {\n        tokenizer.addClassName(option.className);\n    }\n    tokenizer._tokens = new Element(\"span\").insertTo(tokenizer);\n    tokenizer._input = new TextInput({ placeholder: option.placeholder }).insertTo(tokenizer);\n    if (tokenizer.values.length !== 0) {\n        tokenizer._updateTokens();\n    }\n    tokenizer.addEventListener(\"click\", tokenizer._onClickHandler.bind(tokenizer));\n    tokenizer._input.addEventListener(\"keydown\", tokenizer._onKeydownHandler.bind(tokenizer));\n    tokenizer._input.addEventListener(\"focus\", tokenizer._onFocusHandler.bind(tokenizer));\n    tokenizer._input.addEventListener(\"blur\", tokenizer._onBlurHandler.bind(tokenizer));\n    if (option.style) {\n        tokenizer.setStyle(option.style);\n    }\n    if (option.icon) {\n        tokenizer.setIcon(option.icon);\n    }\n    if (option.isDisabled) {\n        tokenizer.disable();\n    }\n    return tokenizer;\n}\nexport const Tokenizer = FTokenizer;\nexport function createTokenizer(option) {\n    return new Tokenizer(option);\n}\nTokenizer.prototype = {\n    disable() {\n        this.addClassName(\"flagrate-disabled\");\n        this._input.disable();\n        return this._updateTokens();\n    },\n    enable() {\n        this.removeClassName(\"flagrate-disabled\");\n        this._input.enable();\n        return this._updateTokens();\n    },\n    isEnabled() {\n        return !this.hasClassName(\"flagrate-disabled\");\n    },\n    setValues(values) {\n        this.values = values;\n        return this._updateTokens();\n    },\n    getValues() {\n        return this.values;\n    },\n    removeValues() {\n        this.values = [];\n        return this._updateTokens();\n    },\n    removeValue(value) {\n        this.values.splice(this.values.indexOf(value), 1);\n        return this._updateTokens();\n    },\n    setIcon(identifier) {\n        this._iconIdentifier = identifier;\n        if (identifier) {\n            this.addClassName(\"flagrate-icon\").setStyle({\n                backgroundImage: `url(${identifier})`\n            });\n        }\n        else {\n            this.removeClassName(\"flagrate-icon\").setStyle({\n                backgroundImage: \"none\"\n            });\n        }\n        return this._updateTokens();\n    },\n    getIcon() {\n        return this._iconIdentifier || \"\";\n    },\n    focus() {\n        this._input.focus();\n    },\n    _updateTokens() {\n        const tokenizer = this;\n        tokenizer._tokens.update();\n        tokenizer.values.forEach(value => {\n            let label;\n            if (typeof value === \"string\") {\n                label = value;\n            }\n            else {\n                label = value.label;\n            }\n            new Button({\n                isDisabled: tokenizer.isEnabled() === false,\n                isRemovableByUser: tokenizer.isEnabled(),\n                onRemove: () => tokenizer.removeValue(value),\n                label: label\n            }).insertTo(tokenizer._tokens);\n        });\n        const vw = tokenizer.getWidth();\n        const bw = tokenizer.getStyle(\"border-width\") === null ? 2 : parseInt(tokenizer.getStyle(\"border-width\").replace(\"px\", \"\"), 10);\n        const pl = tokenizer.getStyle(\"padding-left\") === null ? 4 : parseInt(tokenizer.getStyle(\"padding-left\").replace(\"px\", \"\"), 10);\n        const pr = tokenizer.getStyle(\"padding-right\") === null ? 4 : parseInt(tokenizer.getStyle(\"padding-right\").replace(\"px\", \"\"), 10);\n        const tw = tokenizer._tokens.getWidth();\n        const tm = tokenizer._tokens.getStyle(\"margin-left\") === null ? 2 : parseInt(tokenizer._tokens.getStyle(\"margin-left\").replace(\"px\", \"\"), 10);\n        const im = tokenizer._input.getStyle(\"margin-left\") === null ? 2 : parseInt(tokenizer._input.getStyle(\"margin-left\").replace(\"px\", \"\"), 10);\n        const ip = tokenizer._input.getStyle(\"padding-left\") === null ? 2 : parseInt(tokenizer._input.getStyle(\"padding-left\").replace(\"px\", \"\"), 10);\n        const aw = vw - pl - pr - tw - tm - im - ip - (bw * 2) - 2;\n        if (aw > 30) {\n            tokenizer._input.style.width = `${aw}px`;\n        }\n        else if (aw < -5) {\n            tokenizer._input.style.width = \"\";\n        }\n        else {\n            tokenizer._input.style.width = \"100%\";\n        }\n        tokenizer.fire(\"change\");\n        return this;\n    },\n    _tokenize() {\n        this._candidates = [];\n        const str = this._input.value;\n        const result = this.tokenize(str, this._tokenized.bind(this));\n        if (result !== void 0) {\n            this._tokenized(result);\n        }\n        this._lastTokenizedValue = this._input.value;\n        return this;\n    },\n    _tokenized(candidates) {\n        if (candidates instanceof Array === false) {\n            candidates = [candidates];\n        }\n        this._candidates = [];\n        const menu = new Menu({\n            onSelect: () => menu.remove()\n        });\n        menu.style.left = `${this._input.offsetLeft}px`;\n        for (let i = 0, l = candidates.length, candidate, menuItem; i < l; i++) {\n            candidate = candidates[i];\n            if (typeof candidate === \"string\") {\n                if (candidate === \"\") {\n                    continue;\n                }\n                menuItem = { label: candidate };\n            }\n            else {\n                menuItem = candidate;\n            }\n            if (menuItem.onSelect) {\n                menuItem._onSelect = menuItem.onSelect;\n            }\n            menuItem.onSelect = _createMenuOnSelectHandler(this, candidate);\n            this._candidates.push(candidate);\n            menu.push(menuItem);\n        }\n        if (this._menu) {\n            this._menu.remove();\n        }\n        if (this._candidates.length !== 0) {\n            this.insert({ top: menu });\n            this._menu = menu;\n        }\n        return this;\n    },\n    _onClickHandler() {\n        this.focus();\n    },\n    _onKeydownHandler(e) {\n        // ENTER:13\n        if (e.keyCode === 13 && this._lastTokenizedValue !== this._input.value) {\n            e.stopPropagation();\n            e.preventDefault();\n            this._lastTokenizedValue = this._input.value;\n            this._tokenize();\n            return;\n        }\n        if (this._candidates && this._candidates.length !== 0) {\n            if (\n            // ENTER:13\n            (e.keyCode === 13) ||\n                // right:39\n                (e.keyCode === 39)) {\n                e.stopPropagation();\n                e.preventDefault();\n                this._input.value = \"\";\n                if (this.max < 0 || this.max > this.values.length) {\n                    this.values.push(this._candidates[0]);\n                }\n                this._updateTokens();\n                if (this.onChange) {\n                    this.onChange();\n                }\n                if (this._menu) {\n                    this._menu.remove();\n                }\n            }\n        }\n        if (this._input.value === \"\" && this.values.length !== 0) {\n            if (\n            // BS:8\n            (e.keyCode === 8)) {\n                e.stopPropagation();\n                e.preventDefault();\n                const value = this.values.pop();\n                this._input.value = typeof value === \"string\" ? value : typeof value.value === \"string\" ? value.value : \"\";\n                this._updateTokens();\n                if (this.onChange) {\n                    this.onChange();\n                }\n                if (this._menu) {\n                    this._menu.remove();\n                }\n            }\n        }\n        setTimeout(() => {\n            if (this.max > -1 && this.max <= this.values.length && this._input.value !== \"\") {\n                e.stopPropagation();\n                this._input.value = \"\";\n                return;\n            }\n            this._tokenize();\n        }, 0);\n    },\n    _onFocusHandler() {\n        this._updateTokens();\n        this._tokenize();\n        this.addClassName(\"flagrate-tokenizer-focus\");\n    },\n    _onBlurHandler() {\n        this._input.value = \"\";\n        if (this._menu) {\n            this._menu.style.opacity = \"0\";\n            setTimeout(() => this._menu.remove(), 500);\n        }\n        this.removeClassName(\"flagrate-tokenizer-focus\");\n    }\n};\nfunction _createMenuOnSelectHandler(tokenizer, candidate) {\n    return function (e) {\n        if (tokenizer.max < 0 || tokenizer.max > tokenizer.values.length) {\n            tokenizer.values.push(candidate);\n        }\n        tokenizer._updateTokens();\n        if (tokenizer.onChange) {\n            tokenizer.onChange(e, this);\n        }\n    };\n}\n\n//# sourceMappingURL=tokenizer.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { extendObject } from \"./util\";\nimport { Element } from \"./element\";\n/*?\n    flagrate.createToolbar(option)\n    new flagrate.Toolbar(option)\n    - option (Object) - options.\n\r\n    Toolbar.\n\r\n    #### option\n\r\n    * `id`                       (String): `id` attribute of container element.\n    * `className`                (String):\n    * `attribute`                (Object):\n    * `style`                    (Object): (using flagrate.Element.setStyle)\n    * `items`                    (Array): of item or String to create border, Element to insert any element.\n\r\n    #### item\n\r\n    * `key`                      (String):\n    * `element`                  (Element):\n**/\nfunction FToolbar(option = {}) {\n    const items = option.items || [];\n    const attr = option.attribute || {};\n    if (option.id) {\n        attr[\"id\"] = option.id;\n    }\n    //create\n    const container = new Element(\"div\", attr);\n    extendObject(container, this);\n    container.addClassName(\"flagrate flagrate-toolbar\");\n    if (option.className) {\n        container.addClassName(option.className);\n    }\n    if (option.style) {\n        container.setStyle(option.style);\n    }\n    for (let i = 0, l = items.length; i < l; i++) {\n        container.push(items[i]);\n    }\n    return container;\n}\nexport const Toolbar = FToolbar;\nexport function createToolbar(option) {\n    return new Toolbar(option);\n}\nToolbar.prototype = {\n    push(option) {\n        if (typeof option === \"string\") {\n            new Element(\"hr\").insertTo(this);\n        }\n        else if (option instanceof HTMLElement) {\n            this.insert(option);\n        }\n        else {\n            let element;\n            if (option.isBorder) {\n                element = new Element(\"hr\").insertTo(this);\n            }\n            else {\n                if (!option.element.isFlagrated) {\n                    option.element = Element.extend(option.element);\n                }\n                element = Element.insertTo(option.element, this);\n            }\n            if (option.key) {\n                element.dataset[\"_key\"] = option.key;\n            }\n        }\n        return this;\n    },\n    getElementByKey(key) {\n        const elements = this.childNodes;\n        for (let i = 0, l = elements.length; i < l; i++) {\n            if (elements[i].dataset[\"_key\"] === key) {\n                return elements[i];\n            }\n        }\n        return null;\n    },\n    getElements() {\n        return this.childNodes || [];\n    }\n};\n\n//# sourceMappingURL=toolbar.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\nimport { emptyFunction } from \"./util\";\nimport { Element } from \"./element\";\nimport { Button } from \"./button\";\nimport { Popover } from \"./popover\";\nimport { Modal } from \"./modal\";\n/*?\n    flagrate.createTutorial(option)\n    new flagrate.Tutorial(option)\n    - option (Object) - options.\n\r\n    Creates new tutorial.\n\r\n    #### option\n\r\n    * `steps`              (Array; required): Array of **step** object.\n    * `count`              (Number; default `0`): current count of step.\n    * `onFinish`           (Function): callback when finish.\n    * `onAbort`            (Function): callback when abort.\n    * `onClose`            (Function): callback when close.\n\r\n    #### step\n\r\n    * `target`             (Element|String): Element to target. If target is undefined or not found, will creates flagrate.Modal.\n    * `title`              (String): Title for this step.\n    * `text`               (String): Descriptive text for this step.\n    * `html`               (String): Descriptive html for this step.\n    * `onStep`             (Function): Triggered whenever a step is started.\n    * `onBeforeStep`       (Function): Triggered at before starting of this step.\n    * `onAfterStep`        (Function): Triggered at after of this step.\n\r\n    ##### onBeforeStep / onAfterStep\n\r\n        // async callback\n        function (done) {// if expects callback, will waits for it.\n            setTimeout(done, 1000);\n        }\n\r\n        // sync\n        function () {\n            // ...\n        }\n**/\nexport class Tutorial {\n    constructor(opt = {}) {\n        this.onFinish = emptyFunction;\n        this.onAbort = emptyFunction;\n        this.onClose = emptyFunction;\n        this._steps = [];\n        this._index = 0;\n        if (opt.steps) {\n            this._steps = opt.steps;\n        }\n        if (opt.index) {\n            this._index = opt.index;\n        }\n        if (opt.onFinish) {\n            this.onFinish = opt.onFinish;\n        }\n        if (opt.onAbort) {\n            this.onAbort = opt.onAbort;\n        }\n        if (opt.onClose) {\n            this.onClose = opt.onClose;\n        }\n    }\n    visible() {\n        return !!this._popover || !!this._modal || !!this._inStep;\n    }\n    open() {\n        if (this.visible() === false) {\n            this._main();\n        }\n        return this;\n    }\n    close() {\n        if (this.visible() === true) {\n            this._afterStep(this.onClose.bind(this));\n        }\n        return this;\n    }\n    abort() {\n        if (this.visible() === true) {\n            this._afterStep(this.onAbort.bind(this));\n        }\n        return this;\n    }\n    finish() {\n        this._afterStep(this.onFinish.bind(this));\n        this._index = 0;\n        return this;\n    }\n    prev() {\n        this._afterStep(() => {\n            if (this._index > 0) {\n                --this._index;\n            }\n            this._main();\n        });\n        return this;\n    }\n    next() {\n        this._afterStep(() => {\n            if ((this._index + 1) < this._steps.length) {\n                ++this._index;\n            }\n            this._main();\n        });\n        return this;\n    }\n    _main() {\n        this._inStep = true;\n        const step = this._steps[this._index];\n        if (step.onBeforeStep) {\n            if (step.onBeforeStep.length) {\n                step.onBeforeStep.call(this, this._step.bind(this));\n                return this;\n            }\n            else {\n                step.onBeforeStep.call(this);\n            }\n        }\n        this._step();\n        return this;\n    }\n    _step() {\n        const step = this._steps[this._index];\n        const buttons = [];\n        if ((this._index + 1) >= this._steps.length) {\n            buttons.push({\n                className: \"flagrate-tutorial-button-finish\",\n                onSelect: () => {\n                    this._afterStep(this.finish.bind(this));\n                }\n            });\n        }\n        else {\n            buttons.push({\n                className: \"flagrate-tutorial-button-next\",\n                onSelect: () => {\n                    this._afterStep(this.next.bind(this));\n                }\n            });\n        }\n        if (this._index > 0) {\n            buttons.push({\n                className: \"flagrate-tutorial-button-prev\",\n                onSelect: () => {\n                    this._afterStep(this.prev.bind(this));\n                }\n            });\n        }\n        if ((this._index + 1) < this._steps.length) {\n            buttons.push({\n                className: \"flagrate-tutorial-button-abort\",\n                onSelect: () => {\n                    this._afterStep(this.abort.bind(this));\n                }\n            });\n        }\n        buttons[0].color = \"@primary\";\n        let target;\n        if (typeof step.target === \"string\") {\n            target = document.querySelector(step.target);\n        }\n        else if (Element.isElement(step.target) === true) {\n            target = step.target;\n        }\n        if (target) {\n            const container = new Element();\n            const body = new Element();\n            if (step.html) {\n                body.insert(step.html).insertTo(container);\n            }\n            if (step.text) {\n                body.insertText(step.text).insertTo(container);\n            }\n            const buttonContainer = new Element(\"footer\").insertTo(container);\n            buttons.forEach(button => {\n                new Button(button).insertTo(buttonContainer);\n            });\n            this._popover = new Popover({\n                className: \"flagrate-tutorial\",\n                element: container\n            });\n            this._popover.open(target);\n        }\n        else {\n            this._modal = new Modal({\n                disableCloseByMask: true,\n                disableCloseButton: true,\n                disableCloseByEsc: true,\n                className: \"flagrate-tutorial\",\n                title: step.title,\n                text: step.text,\n                html: step.html,\n                buttons: buttons\n            });\n            this._modal.open();\n        }\n        if (step.onStep) {\n            step.onStep.call(this);\n        }\n        return this;\n    }\n    _afterStep(done) {\n        this._inStep = false;\n        let pp = false;\n        if (this._popover) {\n            pp = true;\n            this._popover.remove();\n            delete this._popover;\n        }\n        if (this._modal) {\n            pp = true;\n            this._modal.close();\n            delete this._modal;\n        }\n        if (pp === true) {\n            const step = this._steps[this._index];\n            if (step.onAfterStep) {\n                if (step.onAfterStep.length) {\n                    step.onAfterStep.call(this, done);\n                    return this;\n                }\n                else {\n                    step.onAfterStep.call(this);\n                }\n            }\n        }\n        done();\n        return this;\n    }\n}\nexport function createTutorial(option) {\n    return new Tutorial(option);\n}\n\n//# sourceMappingURL=tutorial.js.map\n","/*\n   Copyright 2016 Webnium\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\n\r\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\"use strict\";\n/**\n * Identity.\n */\nexport function identity(a) {\n    return a;\n}\n/**\n * Extend Object.\n */\nexport function extendObject(dest, source) {\n    let k;\n    for (k in source) {\n        dest[k] = source[k];\n    }\n    return dest;\n}\nexport function emptyFunction() { }\n/*?\n    Flagrate#jsonPointer\n\r\n    ref: node-jsonpointer https://github.com/janl/node-jsonpointer\n    ref: http://tools.ietf.org/html/draft-ietf-appsawg-json-pointer-08\n**/\n/**\n * JSON Pointer Implementation.\n */\nexport var jsonPointer;\n(function (jsonPointer) {\n    function get(object, pointer) {\n        var pts = validate_input(object, pointer);\n        if (pts.length === 0) {\n            return object;\n        }\n        return traverse(object, pts);\n    }\n    jsonPointer.get = get;\n    function set(object, pointer, value) {\n        if (pointer === \"\" && typeof value === \"object\") {\n            extendObject(object, value);\n            return value;\n        }\n        else {\n            var pts = validate_input(object, pointer);\n            if (pts.length === 0) {\n                throw new Error(\"Invalid JSON pointer for set.\");\n            }\n            return traverse(object, pts, value, true);\n        }\n    }\n    jsonPointer.set = set;\n    function untilde(str) {\n        return str.replace(/~[01]/g, function (m) {\n            switch (m) {\n                case \"~0\":\n                    return \"~\";\n                case \"~1\":\n                    return \"/\";\n            }\n            throw new Error(\"Invalid tilde escape: \" + m);\n        });\n    }\n    function traverse(object, pts, value, isSet) {\n        var part = untilde(pts.shift());\n        if (/^\\d+$/.test(part)) {\n            part = parseInt(part, 10);\n        }\n        if (pts.length !== 0) {\n            if (isSet && typeof object[part] !== \"object\") {\n                if (value === void 0) {\n                    return value;\n                }\n                if (/^\\d+$/.test(pts[0])) {\n                    object[part] = [];\n                }\n                else {\n                    object[part] = {};\n                }\n            }\n            return traverse(object[part], pts, value, isSet);\n        }\n        // we're done\n        if (!isSet) {\n            // just reading\n            return object[part];\n        }\n        // set new value, and return\n        if (value === void 0) {\n            delete object[part];\n        }\n        else {\n            object[part] = value;\n        }\n        return value;\n    }\n    function validate_input(object, pointer) {\n        if (typeof object !== \"object\") {\n            throw new Error(\"Invalid input object.\");\n        }\n        if (pointer === \"\") {\n            return [];\n        }\n        if (!pointer) {\n            throw new Error(\"Invalid JSON pointer.\");\n        }\n        var pts = pointer.split(\"/\");\n        if (pts.shift() !== \"\") {\n            throw new Error(\"Invalid JSON pointer.\");\n        }\n        return pts;\n    }\n})(jsonPointer || (jsonPointer = {}));\n\n//# sourceMappingURL=util.js.map\n"]}